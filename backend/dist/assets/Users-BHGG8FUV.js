import{j as e,L as p,r,aa as k,A as C,ab as P}from"./index-jfVTkSr8.js";import{V as U,H as S,P as _,F as A}from"./PageContent-C8XW3_vI.js";import"./index-DBMsOViK.js";const $=()=>e.jsx("div",{className:"relative overflow-hidden bg-white shadow-md dark:bg-gray-800 sm:rounded-lg",children:e.jsxs("div",{className:"flex-row items-center justify-between p-4 space-y-3 sm:flex sm:space-y-0 sm:space-x-4",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"Users"})}),e.jsxs(p,{to:"/admin/users/new",className:"flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 focus:outline-none dark:focus:ring-primary-800",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Add New User"]})]})}),F=({setFilter:a,totalUsers:s,filter:l,users:o,loginPassword:x})=>{const[c,t]=r.useState([]),i=async()=>{const n=await k(x);n.status==200&&t(n.data.getUserRoles.roles)};return r.useEffect(()=>{i()},[]),e.jsxs("div",{className:"flex flex-row gap-4 mt-4",children:[e.jsxs("button",{type:"button",onClick:()=>a("all"),className:`text-sm ${l=="all"?"text-black font-bold":"text-blue-800"}`,children:["All ",e.jsxs("span",{className:"font-normal",children:["(",s,")"]})]}),c==null?void 0:c.map(n=>e.jsxs("button",{type:"button",onClick:()=>a(n.role),className:`text-sm ${l==n.role?"text-black font-bold":"text-blue-800"}`,children:[n.role.replace(/_/g," ").replace(/\b\w/g,h=>h.toUpperCase())," ",e.jsxs("span",{className:"font-normal",children:["(",o.filter(h=>h.user_role.id==n.id).length,")"]})]},n.id))]})},R=({users:a,filter:s,selectedIds:l,toggleCheckbox:o,allSelected:x,toggleAllCheckboxes:c})=>e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 ",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-200  ",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:e.jsx("input",{type:"checkbox",checked:x,onChange:c,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 focus:ring-2"})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Username"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Role"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Posts"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Registered"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Edit Profile"})]})}),e.jsx("tbody",{children:(s==="all"?a:a.filter(t=>t.user_role.role===s)).map((t,i)=>e.jsxs("tr",{className:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700 border-gray-200",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 w-[40px] font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.jsx("input",{id:"default-checkbox",type:"checkbox",value:t.id,checked:l.includes(t.id),onChange:()=>o(t.id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 focus:ring-2"})}),e.jsx("td",{className:"px-6 py-4 flex flex-col",children:e.jsx(p,{to:`/admin/users/edit/${t.id}`,className:"text-blue-700 font-bold",children:t.user_login})}),e.jsxs("td",{className:"px-6 py-4",children:[t.first_name," ",t.last_name]}),e.jsx("td",{className:"px-6 py-4",children:t.user_email}),e.jsx("td",{className:"px-6 py-4",children:t.user_role.role}),e.jsx("td",{className:"px-6 py-4",children:t.post_count}),e.jsx("td",{className:"px-6 py-4",children:new Date(t.user_registered).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(p,{to:`/admin/users/edit/${t.id}`,className:"text-blue-700 font-bold",children:"Edit Profile"})})]},i))})]}),(s==="all"?a:a.filter(t=>t.user_role.role===s)).length==0&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-4 mt-4 text-sm text-yellow-800 rounded-lg bg-yellow-50",role:"alert",children:[e.jsx("span",{className:"font-medium",children:"No Users Found!"})," No users match the current user role."]})})]}),E=({totalUsers:a,page:s,perPage:l,setPage:o})=>{const x=async()=>{o(1)},c=async()=>{o(s-1)},t=async()=>{o(s+1)},i=async()=>{o(Math.ceil(a/l))};return e.jsxs("div",{className:"flex flex-rows justify-end items-center px-4 py-8",children:[e.jsxs("p",{className:"mr-4",children:[a," items"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:`px-3 py-2 font-medium rounded shadow ${s==1?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"}`,onClick:()=>{s>=2&&x()},children:"«"}),e.jsx("button",{className:`px-3 py-2 font-medium rounded shadow ${s==1?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"}`,onClick:()=>{s>=2&&c()},children:"‹"}),e.jsxs("p",{children:[s," of ",Math.ceil(a/l)]}),e.jsx("button",{className:`px-3 py-2 font-medium rounded shadow ${s==Math.ceil(a/l)?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"}`,onClick:()=>{s!==Math.ceil(a/l)&&t()},children:"›"}),e.jsx("button",{className:`px-3 py-2 font-medium rounded shadow ${s==Math.ceil(a/l)?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"}`,onClick:()=>{s!==Math.ceil(a/l)&&i()},children:"»"})]})]})},M=()=>{const{loginPassword:a}=r.useContext(C),[s,l]=r.useState([]),[o,x]=r.useState([]),[c,t]=r.useState(0),[i,n]=r.useState("all"),[h,b]=r.useState(1),[y,L]=r.useState(20),[m,g]=r.useState([]),j=d=>{g(u=>u.includes(d)?u.filter(v=>v!==d):[...u,d])},f=()=>{m.length===s.length?g([]):g(s.map(d=>d.id))},N=s.length>0&&m.length===s.length,w=async()=>{const d=await P(a,h,y);d.status==200&&(l(d.data.getUsers.users),t(d.data.getUsers.total))};return r.useEffect(()=>{w()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx($,{}),e.jsx(F,{users:s,filter:i,setFilter:n,totalUsers:c,loginPassword:a}),e.jsxs("div",{className:"panel mt-8",children:[e.jsx(R,{users:s,filter:i,selectedIds:m,toggleCheckbox:j,allSelected:N,toggleAllCheckboxes:f}),e.jsx(E,{totalUsers:c,page:h,perPage:y,setPage:b})]})]})})},V=({siteTitle:a})=>(document.title=`Users - ${a}`,e.jsxs(U,{children:[e.jsx(S,{}),e.jsx(_,{children:e.jsx(M,{})}),e.jsx(A,{})]}));export{V as default};

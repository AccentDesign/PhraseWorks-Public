import{j as e,L as u,r,A as k}from"./index-n5AiC0OA.js";import{V as C,H as P,P as U,F as S}from"./PageContent-2U22pPkP.js";import{A as _,a as A}from"./APIUsers-DmPOgH-d.js";import"./index-CmqmJUPe.js";const F=()=>e.jsx("div",{className:"relative overflow-hidden bg-white shadow-md dark:bg-gray-800 sm:rounded-lg",children:e.jsxs("div",{className:"flex-row items-center justify-between p-4 space-y-3 sm:flex sm:space-y-0 sm:space-x-4",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"Users"})}),e.jsxs(u,{to:"/admin/users/new",className:"flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 focus:outline-none dark:focus:ring-primary-800",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Add New User"]})]})}),R=({setFilter:a,totalUsers:t,filter:l,users:o,loginPassword:x})=>{const[c,s]=r.useState([]),i=async()=>{const n=await _(x);n.status==200&&s(n.data.getUserRoles.roles)};return r.useEffect(()=>{i()},[]),e.jsxs("div",{className:"flex flex-row gap-4 mt-4",children:[e.jsxs("button",{type:"button",onClick:()=>a("all"),className:`text-sm ${l=="all"?"text-black font-bold":"text-blue-800"}`,children:["All ",e.jsxs("span",{className:"font-normal",children:["(",t,")"]})]}),c==null?void 0:c.map(n=>e.jsxs("button",{type:"button",onClick:()=>a(n.role),className:`text-sm ${l==n.role?"text-black font-bold":"text-blue-800"}`,children:[n.role.replace(/_/g," ").replace(/\b\w/g,m=>m.toUpperCase())," ",e.jsxs("span",{className:"font-normal",children:["(",o.filter(m=>m.user_role.id==n.id).length,")"]})]},n.id))]})},$=({users:a,filter:t,selectedIds:l,toggleCheckbox:o,allSelected:x,toggleAllCheckboxes:c})=>e.jsxs(e.Fragment,{children:[e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 ",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-200  ",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:e.jsx("input",{type:"checkbox",checked:x,onChange:c,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 focus:ring-2"})}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Username"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Role"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Posts"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Registered"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Edit Profile"})]})}),e.jsx("tbody",{children:(t==="all"?a:a.filter(s=>s.user_role.role===t)).map((s,i)=>e.jsxs("tr",{className:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-50 even:dark:bg-gray-800 border-b dark:border-gray-700 border-gray-200",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 w-[40px] font-medium text-gray-900 whitespace-nowrap dark:text-white",children:e.jsx("input",{id:"default-checkbox",type:"checkbox",value:s.id,checked:l.includes(s.id),onChange:()=>o(s.id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 focus:ring-2"})}),e.jsx("td",{className:"px-6 py-4 flex flex-col",children:e.jsx(u,{to:`/admin/users/edit/${s.id}`,className:"text-blue-700 font-bold",children:s.user_login})}),e.jsxs("td",{className:"px-6 py-4",children:[s.first_name," ",s.last_name]}),e.jsx("td",{className:"px-6 py-4",children:s.user_email}),e.jsx("td",{className:"px-6 py-4",children:s.user_role.role}),e.jsx("td",{className:"px-6 py-4",children:s.post_count}),e.jsx("td",{className:"px-6 py-4",children:new Date(s.user_registered).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx(u,{to:`/admin/users/edit/${s.id}`,className:"text-blue-700 font-bold",children:"Edit Profile"})})]},i))})]}),(t==="all"?a:a.filter(s=>s.user_role.role===t)).length==0&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-4 mt-4 text-sm text-yellow-800 rounded-lg bg-yellow-50",role:"alert",children:[e.jsx("span",{className:"font-medium",children:"No Users Found!"})," No users match the current user role."]})})]}),E=({totalUsers:a,page:t,perPage:l,setPage:o})=>{const x=async()=>{o(1)},c=async()=>{o(t-1)},s=async()=>{o(t+1)},i=async()=>{o(Math.ceil(a/l))};return e.jsxs("div",{className:"flex flex-rows justify-end items-center px-4 py-8",children:[e.jsxs("p",{className:"mr-4",children:[a," items"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:`px-3 py-2 font-medium rounded shadow ${t==1?"bg-gray-50 text-gray-200":"text-gray-800 bg-gray-200 hover:bg-gray-300"}`,onClick:x,children:"«"}),e.jsx("button",{className:`px-3 py-2 font-medium rounded shadow ${t==1?"bg-gray-50 text-gray-200":"text-gray-800 bg-gray-200 hover:bg-gray-300"}`,onClick:c,children:"‹"}),e.jsxs("p",{children:[t," of ",Math.ceil(a/l)]}),e.jsx("button",{className:`px-3 py-2 font-medium rounded shadow ${t==Math.ceil(a/l)?"bg-gray-50 text-gray-200":"text-gray-800 bg-gray-200 hover:bg-gray-300"}`,onClick:s,children:"›"}),e.jsx("button",{className:`px-3 py-2 font-medium rounded shadow ${t==Math.ceil(a/l)?"bg-gray-50 text-gray-200":"text-gray-800 bg-gray-200 hover:bg-gray-300"}`,onClick:i,children:"»"})]})]})},L=()=>{const{loginPassword:a}=r.useContext(k),[t,l]=r.useState([]),[o,x]=r.useState([]),[c,s]=r.useState(0),[i,n]=r.useState("all"),[m,j]=r.useState(1),[y,T]=r.useState(20),[h,g]=r.useState([]),b=d=>{g(p=>p.includes(d)?p.filter(v=>v!==d):[...p,d])},f=()=>{h.length===t.length?g([]):g(t.map(d=>d.id))},N=t.length>0&&h.length===t.length,w=async()=>{const d=await A(a,m,y);d.status==200&&(l(d.data.getUsers.users),s(d.data.getUsers.total))};return r.useEffect(()=>{w()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(F,{}),e.jsx(R,{users:t,filter:i,setFilter:n,totalUsers:c,loginPassword:a}),e.jsxs("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg w-full mt-8",children:[e.jsx($,{users:t,filter:i,selectedIds:h,toggleCheckbox:b,allSelected:N,toggleAllCheckboxes:f}),e.jsx(E,{totalUsers:c,page:m,perPage:y,setPage:j})]})]})})},H=()=>(document.title="Users",e.jsxs(C,{children:[e.jsx(P,{}),e.jsx(U,{children:e.jsx(L,{})}),e.jsx(S,{})]}));export{H as default};

import{r as t,j as e,U as v,u as N,J as P,n as m}from"./index-n5AiC0OA.js";import{g as S,a as C}from"./Users-Dnk3imjk.js";import{e as k}from"./APIUsers-DmPOgH-d.js";const L=({password:a,setPassword:i,hide:o,setHide:g,getPasswordStrength:c})=>{const[r,d]=t.useState(0);return t.useEffect(()=>{d(c(a))},[a]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full flex flex-row items-center",children:e.jsx("input",{type:o?"password":"text",name:"password",id:"password",placeholder:"Password",autoComplete:"Current Password",value:a,className:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5",required:"",onChange:u=>{i(u.target.value)}})}),e.jsxs("div",{className:`mt-1 ${r.bg} px-4 py-2`,children:[e.jsx("div",{className:"w-full bg-gray-200 rounded h-2",children:e.jsx("div",{className:`h-2 rounded ${r.color} ${r.width}`,style:{transition:"width 0.3s ease"}})}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r.label})]})]})},H=()=>{document.title="Login";const{LoginUser:a}=t.useContext(v),i=N(),o=P(),[g,c]=t.useState(null),[r,d]=t.useState(null),[u,w]=t.useState(null),x=new URLSearchParams(o.search).get("redirect")||"/",[l,n]=t.useState(""),[f,p]=t.useState(""),[h,b]=t.useState(!1),y=async s=>{s.preventDefault(),l!=""?await a(f,l)==!0&&b(!0):m("Incorrect Password","error")},j=async()=>{const s=await k(l,u,r);s.status==200?s.data.createNewPassword.success==!0&&s.data.createNewPassword.success===!0&&(m("Password successfully updated.","success"),n(""),i("/login",{replace:!0})):m("Incorrect Key","error")};return t.useEffect(()=>{h&&(window.location.href=x)},[h,x]),t.useEffect(()=>{const s=new URLSearchParams(o.search);c(s.get("action")),s.get("action")=="rp"&&n(S()),d(s.get("key")),w(s.get("login"))},[o]),e.jsx("div",{className:"bg-gradient-to-b from-dark-teal from-20% to-mid-teal bg-fixed min-h-screen top-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen px-8 md:px-0",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx("div",{className:"flex flex-row min-h-screen justify-end items-center md:mr-16",children:e.jsxs("div",{className:"w-full md:w-[500px]",children:[e.jsx("div",{className:"flex align-items-center mb-2 justify-between",children:e.jsx("img",{src:"/images/accent-logo-desktop-white.svg",width:"229",height:"62",alt:"Logo"})}),g==null?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h2 text-white text-2xl",children:"Sign in"}),e.jsxs("form",{className:"space-y-4 md:space-y-4 mt-4",action:"#",children:[e.jsx("div",{children:e.jsx("input",{type:"email",name:"email",id:"email",placeholder:"Email",autoComplete:"Current Email",value:f,className:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5",required:"",onChange:s=>p(s.target.value)})}),e.jsx("div",{children:e.jsx("input",{type:"password",name:"password",id:"password",placeholder:"Password",autoComplete:"Current Password",value:l,className:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5",required:"",onChange:s=>n(s.target.value)})}),e.jsx("button",{type:"submit",className:"w-full cursor-pointer text-white bg-mid-teal hover:bg-lighter-teal focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",onClick:s=>y(s),children:"Sign in"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h2 mb-4 text-white text-2xl",children:"Set Password"}),e.jsx(L,{getPasswordStrength:C,password:l,setPassword:n}),e.jsx("button",{type:"submit",className:"mt-4 w-full cursor-pointer text-white bg-mid-teal hover:bg-lighter-teal focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center",onClick:()=>j(),children:"Save"})]})]})})}),e.jsx("div",{className:"w-full md:w-1/2",children:e.jsx("div",{className:"flex flex-row min-h-screen justify-center items-center md:ml-16"})})]})})};export{H as default};

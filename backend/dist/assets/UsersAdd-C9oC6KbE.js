import{j as e,r as t,A as S,u as k,aa as F,n as x,ac as A}from"./index-jfVTkSr8.js";import{V as R,H as U,P as E,F as H}from"./PageContent-C8XW3_vI.js";import{g as I,a as p}from"./Users-xwfcvSRk.js";import"./index-DBMsOViK.js";const V=()=>e.jsx("div",{className:"relative overflow-hidden bg-white shadow-md dark:bg-gray-800 sm:rounded-lg",children:e.jsx("div",{className:"flex-row items-center justify-between p-4 space-y-3 sm:flex sm:space-y-0 sm:space-x-4",children:e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"Add User"})})})}),c=({type:a,title:r,name:l,value:n,updateFunction:o})=>e.jsxs("div",{className:"w-full my-4",children:[e.jsx("label",{children:r}),e.jsx("input",{type:a,name:l,placeholder:r,autoComplete:r,value:n,className:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5",required:!0,onChange:s=>{o(s.target.value)}})]}),$=({title:a,name:r,value:l,updateFunction:n,options:o})=>e.jsxs("div",{className:"my-4 w-full",children:[e.jsx("label",{children:a}),e.jsxs("select",{id:r,className:"block w-auto bg-gray-100 border-gray-300 border px-4 py-2 divide-y divide-gray-100 rounded shadow w-44 dark:bg-gray-700 dark:divide-gray-600",value:l,onChange:s=>n(s.target.value),children:[e.jsx("option",{value:"",children:a}),o.map(s=>e.jsx("option",{value:s.id,onChange:d=>n(d.target.value),children:s.role.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase())},s.id))]})]}),L=({password:a,setPassword:r,hide:l,setHide:n,getPasswordStrength:o})=>{const[s,d]=t.useState(0);return t.useEffect(()=>{d(o(a))},[a]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full flex flex-row items-center",children:[e.jsx("input",{type:l?"password":"text",name:"password",id:"password",placeholder:"Password",autoComplete:"Current Password",value:a,className:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5",required:"",onChange:i=>{r(i.target.value)}}),e.jsx("button",{type:"button",className:"ml-4 secondary-btn",onClick:()=>n(i=>!i),children:l?"Show":"Hide"}),e.jsx("button",{type:"button",className:"ml-4 secondary-btn",onClick:()=>setShowPassword(!1),children:"Cancel"})]}),e.jsxs("div",{className:`mt-1 ${s.bg} px-4 py-2`,children:[e.jsx("div",{className:"w-full bg-gray-200 rounded h-2",children:e.jsx("div",{className:`h-2 rounded ${s.color} ${s.width}`,style:{transition:"width 0.3s ease"}})}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:s.label})]})]})},M=()=>{const{loginPassword:a}=t.useContext(S),r=k(),[l,n]=t.useState(""),[o,s]=t.useState(""),[d,i]=t.useState(""),[g,f]=t.useState(""),[h,w]=t.useState(0),[b,j]=t.useState([]),[u,y]=t.useState(I()),[v,N]=t.useState(!1),C=async()=>{if(p(u).label=="Weak"){x("Cannot save a weak password, please amend and try again.","error");return}if((await A(d,l,o,g,u,h)).status==200){x("Successfully added user.","success"),r("/admin/users");return}x("Failed to add user.","error")},P=async()=>{const m=await F(a);m.status==200&&j(m.data.getUserRoles.roles)};return t.useEffect(()=>{P()},[]),e.jsx("div",{className:"w-full flex flex-col md:flex-row",children:e.jsxs("div",{className:"w-full",children:[e.jsx(V,{}),e.jsxs("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg bg-white w-full mt-8 p-4",children:[e.jsx(c,{type:"text",name:"nicename",title:"Nice Name",value:d,updateFunction:i}),e.jsx(c,{type:"text",name:"first_name",title:"First Name",value:l,updateFunction:n}),e.jsx(c,{type:"text",name:"last_name",title:"Last Name",value:o,updateFunction:s}),e.jsx($,{name:"role",title:"Role",value:h,updateFunction:w,options:b}),e.jsx("h1",{className:"text-xl mb-4",children:"Contact Info"}),e.jsx(c,{type:"email",name:"email",title:"Email",value:g,updateFunction:f}),e.jsx("h1",{className:"text-xl mb-4",children:"Account Management"}),e.jsxs("div",{className:"w-full my-4",children:[e.jsx("label",{children:"New Password"}),e.jsx(L,{password:u,setPassword:y,hide:v,setHide:N,getPasswordStrength:p})]}),e.jsxs("button",{type:"button",className:"flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 focus:outline-none dark:focus:ring-primary-800",onClick:()=>{C()},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"})}),"Add"]})]})]})})},T=({siteTitle:a})=>(document.title=`Add User - ${a}`,e.jsxs(R,{children:[e.jsx(U,{}),e.jsx(E,{children:e.jsx(M,{})}),e.jsx(H,{})]}));export{T as default};

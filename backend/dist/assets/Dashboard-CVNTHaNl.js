import{j as e,g as d,r as l}from"./index-a7MOmxjO.js";import{V as m}from"./VerifyLogin-C-BRNdBM.js";import{H as h,P as u,F as g}from"./PageContent-CWYPIEK3.js";const x=()=>e.jsx("div",{children:"DashboardPageContent"}),b=async t=>{const a=new FormData;a.append("file",t);const s=await fetch(`${d}api/v1/files/upload`,{method:"PUT",body:a}),r=await s.json();return{status:s.status,data:r}},j=async t=>{const a=await fetch(`${d}api/v1/files/${encodeURIComponent(t)}`,{method:"GET"});if(!a.ok)throw new Error(`Failed to fetch file: ${a.statusText}`);return a.blob()},P=()=>{const[t,a]=l.useState(null),[s,r]=l.useState(null);document.title="Dashboard";const f=n=>{a(n.target.files[0])};return l.useEffect(()=>{const n=async()=>{try{if((await b(t)).status==200){const p=t.name,o=await j(p);if(!(o instanceof Blob))throw new Error("APIGetFile did not return a valid Blob");if(!o.type.startsWith("image/"))throw new Error(`Invalid Blob type: ${o.type}`);console.log("Blob:",o,"Type:",o.type);const c=URL.createObjectURL(o);r(c),console.log("Image URL:",c)}}catch(i){console.error("Upload or fetch failed:",i)}};t!=null&&n()},[t]),e.jsx(m,{children:e.jsxs("div",{className:"bg-gradient-to-b from-dark-teal from-20% to-mid-teal bg-fixed min-h-screen top-0 flex flex-col",children:[e.jsxs("div",{className:"pt-[5rem] lg:pt-[8rem] f-1",children:[e.jsx(h,{}),e.jsxs(u,{children:[e.jsx(x,{}),e.jsx("input",{type:"file",onChange:f}),e.jsx("button",{type:"submit",children:"Upload"}),s&&e.jsx("img",{src:s,className:"w-[150px]",alt:"Uploaded Preview"})]})]}),e.jsx(g,{})]})})};export{P as default};

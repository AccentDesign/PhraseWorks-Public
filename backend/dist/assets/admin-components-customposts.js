import{j as e,r as t}from"./vendor-react.js";import{L as s,u as a,a as l}from"./vendor-other.js";import{u as i,A as n,U as r,v as o,h as d,w as c,x as u,t as m,y as p,z as x,B as h,p as g,q as f,r as v,C as b,s as j,n as y,D as w,E as N,F as S,G as C,H as k,I as P,J as M,K as T,L as I,M as _,N as F,O as E,P as R,Q as D,R as V,S as Z,T as O}from"./index.js";import{P as B,a as A,b as H,S as U,C as L}from"./admin-core.js";import{z as $,L as J}from"./vendor-headless-ui.js";import{E as z}from"./vendor-tinymce.js";import{T as q,a as W,R as G,I as K,F as Q,W as X,L as Y,P as ee,b as te,c as se}from"./admin-components-customfields.js";const ae=({postType:t,customPostName:a})=>e.jsx("div",{className:"title-panel",children:e.jsxs("div",{className:"title-bar",children:[e.jsx("div",{children:e.jsxs("h2",{className:"text-3xl",children:[a," Posts"]})}),e.jsxs(s,{to:`/admin/custom/${t}/new`,className:"text-white bg-blue-700 hover:bg-blue-800 btn",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Add New ",a," Post"]})]})}),le=({setFilter:t,totalPosts:s,filter:a,posts:l,user:i})=>e.jsxs("div",{className:"filter-panel",children:[e.jsxs("button",{type:"button",onClick:()=>t("all"),className:"text-sm "+("all"==a?"text-black font-bold":"text-blue-800"),children:["All ",e.jsxs("span",{className:"font-normal",children:["(",s,")"]})]}),e.jsxs("button",{type:"button",onClick:()=>t("mine"),className:"text-sm "+("mine"==a?"text-black font-bold":"text-blue-800"),children:["Mine"," ",e.jsxs("span",{className:"font-normal",children:["(",l.filter(e=>e.post_author==i.id).length,")"]})]}),e.jsxs("button",{type:"button",onClick:()=>t("draft"),className:"text-sm "+("draft"==a?"text-black font-bold":"text-blue-800"),children:["Drafts"," ",e.jsxs("span",{className:"font-normal",children:["(",l.filter(e=>"draft"==e.post_status).length,")"]})]}),l.filter(e=>"trash"==e.post_status).length>0&&e.jsxs("button",{type:"button",onClick:()=>t("trash"),className:"text-sm "+("trash"==a?"text-black font-bold":"text-red-800"),children:["Trash"," ",e.jsxs("span",{className:"font-normal",children:["(",l.filter(e=>"trash"==e.post_status).length,")"]})]})]}),ie=({bulkAction:t,setBulkAction:s,handleApply:a,filter:l})=>e.jsxs("div",{className:"actions-panel",children:[e.jsxs("select",{id:"actionsDropdown",className:"select",value:t,onChange:e=>s(e.target.value),children:[e.jsx("option",{value:"",children:"Bulk Actions"}),"trash"!=l?e.jsx("option",{value:"trash",children:"Trash Items"}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"delete",children:"Delete Permanently"}),e.jsx("option",{value:"restore",children:"Restore"})]})]}),e.jsxs("button",{type:"button",className:"ml-4 text-white bg-blue-700 hover:bg-blue-800 btn",onClick:a,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"})}),"Apply"]})]}),ne=({postId:s,fieldName:a})=>{const[l,n]=t.useState(null);return t.useEffect(()=>{(async()=>{var e,t;const l=await i(s);if(200==l.status&&null!=l.data){const s=JSON.parse(null==(e=null==l?void 0:l.data)?void 0:e.getFields);n(null==(t=s.find(e=>e.name==a))?void 0:t.value)}})()},[s,a]),e.jsx("td",{children:l??"-"})},re=({posts:l,selectedIds:i,toggleCheckbox:n,restorePost:r,binPost:o,publishPost:d,draftPost:c,permanentDelete:u,allSelected:m,toggleAllCheckboxes:p,postTableFields:x})=>{const h=window.__FIELD_RENDERERS__||{},{postType:g}=a();return e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:e.jsx("input",{type:"checkbox",checked:m,onChange:p,className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 focus:ring-2"})}),null==x?void 0:x.slice().sort((e,t)=>e.order-t.order).slice(1).map((t,s)=>e.jsx("th",{scope:"col",children:t.title},s))]})}),e.jsx("tbody",{children:l.map((a,l)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"table-checkbox-cell",children:e.jsx("input",{id:"default-checkbox",type:"checkbox",value:a.id,checked:i.includes(a.id),onChange:()=>n(a.id),className:"checkbox"})}),null==x?void 0:x.slice().sort((e,t)=>e.order-t.order).slice(1).map((l,i)=>e.jsxs(t.Fragment,{children:["title"==l.name&&e.jsxs("td",{className:"flex flex-col",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsxs(s,{to:`/admin/custom/${g}/edit/${a.id}`,className:"text-blue-700 font-bold",children:[a.post_title," -"," ",e.jsx("span",{className:"text-gray-800",children:a.post_status})]})}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:["publish"==a.post_status&&e.jsx("p",{children:e.jsx(s,{to:`/${a.post_name}`,className:"link-blue-xs",children:"View"})}),"trash"==a.post_status?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx("button",{className:"link-blue-xs",onClick:()=>r(a.id),children:"Restore"})}),e.jsx("p",{children:e.jsx("button",{className:"link-red-xs",onClick:()=>u(a.id),children:"Permanently Delete"})})]}):e.jsxs(e.Fragment,{children:["publish"!=a.post_status&&e.jsx("p",{children:e.jsx("button",{className:"link-blue-xs",onClick:()=>{d(a.id)},children:"Publish"})}),"draft"!=a.post_status&&e.jsx("p",{children:e.jsx("button",{className:"link-blue-xs",onClick:()=>{c(a.id)},children:"Draft"})}),e.jsx("p",{children:e.jsx("button",{className:"link-red-xs",onClick:()=>{o(a.id)},children:"Bin"})})]})]})]}),"author"==l.name&&e.jsx("td",{children:a.author.user_login}),"categories"==l.name&&e.jsx("td",{children:"-"}),"tags"==l.name&&e.jsx("td",{children:"-"}),"date"==l.name&&e.jsx("td",{children:new Date(a.post_date).toLocaleDateString()}),h[l.name]&&h[l.name](a),!["title","author","categories","tags","date"].includes(l.name)&&!h[l.name]&&e.jsx(ne,{postId:a.id,fieldName:l.name})]},i))]},l))})]})},oe=({totalPosts:t,page:s,perPage:a,setPage:l})=>e.jsxs("div",{className:"pagination-block",children:[e.jsxs("p",{className:"mr-4",children:[t," items"]}),e.jsxs("div",{className:"pagination-buttons",children:[e.jsx("button",{className:"pagination-btn "+(1==s?"pagination-btn-disabled":"pagination-btn-enabled"),onClick:()=>{s>=2&&(async()=>{l(1)})()},children:"«"}),e.jsx("button",{className:"pagination-btn "+(1==s?"pagination-btn-disabled":"pagination-btn-enabled"),onClick:()=>{s>=2&&(async()=>{l(s-1)})()},children:"‹"}),e.jsxs("p",{children:[s," of ",Math.ceil(t/a)]}),e.jsx("button",{className:"pagination-btn "+(s==Math.ceil(t/a)?"pagination-btn-disabled":"pagination-btn-enabled"),onClick:()=>{s!==Math.ceil(t/a)&&(async()=>{l(s+1)})()},children:"›"}),e.jsx("button",{className:"pagination-btn "+(s==Math.ceil(t/a)?"pagination-btn-disabled":"pagination-btn-enabled"),onClick:()=>{s!==Math.ceil(t/a)&&(async()=>{l(Math.ceil(t/a))})()},children:"»"})]})]}),de=()=>{const{loginPassword:s}=t.useContext(n),{postType:l}=a(),{user:i}=t.useContext(r),[g,f]=t.useState([]),[v,b]=t.useState([]),[j,y]=t.useState(0),[w,N]=t.useState(!1),[S,C]=t.useState([]),[k,P]=t.useState("all"),[M,T]=t.useState(1),[I,_]=t.useState(20),[F,E]=t.useState(""),[R,D]=t.useState([]),[V,Z]=t.useState(""),O=g.length>0&&R.length===g.length,B=async(e=!0)=>{const t=await o(l,s);if(e&&200==t.status){const a=JSON.parse(t.data.getCustomPostBySlug);if(Z(a.name),"all"==k){const t=await d(s,M,I,l);e&&200==t.status&&(f(t.data.getPosts.posts),y(t.data.getPosts.total))}else if("mine"==k){const t=await c(M,I,l,i.id);e&&200==t.status&&f(t.data.getPostsByAuthor.posts)}else{const t=await u(s,M,I,l,k);e&&200==t.status&&f(t.data.getPostsByStatus.posts)}const n=await m(s,1,2147483647,l);e&&200==n.status&&b(n.data.getPosts.posts);const r=await p(s,l);e&&200==r.status&&C(r.data.getPostTableFields.fields)}};return t.useEffect(()=>{let e=!0;return(async()=>{await B(e)})(),()=>{e=!1}},[M,k]),t.useEffect(()=>{let e=!0;return w&&(N(!1),"all"!==k?P("all"):B(e)),()=>{e=!1}},[w]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(ae,{postType:l,customPostName:V}),e.jsx(le,{posts:v,totalPosts:j,filter:k,setFilter:P,user:i}),e.jsx(ie,{bulkAction:F,setBulkAction:E,handleApply:async()=>{if("trash"===F&&R.length>0){(await Promise.all(R.map(async e=>{var t,a;const l=await x(s,"trash",e);return 200===l.status&&(null==(a=null==(t=l.data)?void 0:t.updatePostStatus)?void 0:a.success)}))).some(e=>e)&&(N(!0),D([]))}else if("restore"===F&&R.length>0){(await Promise.all(R.map(async e=>{var t,a;const l=await x(s,"draft",e);return 200===l.status&&(null==(a=null==(t=l.data)?void 0:t.updatePostStatus)?void 0:a.success)}))).some(e=>e)&&(N(!0),D([]))}},filter:k}),e.jsxs("div",{className:"panel mt-8",children:[e.jsx(re,{posts:g,selectedIds:R,toggleCheckbox:e=>{D(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},restorePost:async e=>{const t=await x(s,"draft",e);200==t.status&&t.data.updatePostStatus.success&&N(!0)},binPost:async e=>{const t=await x(s,"trash",e);200==t.status&&t.data.updatePostStatus.success&&N(!0)},publishPost:async e=>{const t=await x(s,"publish",e);200==t.status&&t.data.updatePostStatus.success&&N(!0)},draftPost:async e=>{const t=await x(s,"draft",e);200==t.status&&t.data.updatePostStatus.success&&N(!0)},permanentDelete:async e=>{const t=await h(s,e);200==t.status&&t.data.deletePost.success&&N(!0)},allSelected:O,toggleAllCheckboxes:()=>{R.length===g.length?D([]):D(g.map(e=>e.id))},postTableFields:S}),e.jsx(oe,{totalPosts:j,page:M,perPage:I,setPage:T})]})]})})},ce=({customPostName:t})=>e.jsx("div",{className:"title-panel",children:e.jsx("div",{className:"title-bar",children:e.jsx("div",{children:e.jsxs("h2",{className:"text-3xl",children:["Add ",t," Post"]})})})}),ue=({tags:t,tagsSelectedIds:s,toggleTagCheckbox:a})=>e.jsxs("div",{className:"panel mt-8",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Tags"}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"flex flex-col gap-2 items-start mt-4 rounded  border border-gray-300",children:e.jsx("ul",{className:"py-4",children:t.map((t,l)=>e.jsxs("li",{className:"ml-2 flex flex-row items-center gap-4",children:[e.jsx("input",{id:"default-checkbox",type:"checkbox",value:t.term_id,checked:s.includes(t.term_id),onChange:()=>a(t.term_id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 focus:ring-2"}),e.jsx("p",{children:t.name})]},l))})})]}),me=({categories:t,categoriesSelectedIds:s,toggleCategoryCheckbox:a})=>e.jsxs("div",{className:"panel mt-8",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Categories"}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"flex flex-col gap-2 items-start mt-4 rounded  border border-gray-300",children:e.jsx("ul",{className:"py-4",children:t.map((t,l)=>e.jsxs("li",{className:"ml-2 flex flex-row items-center gap-4",children:[e.jsx("input",{id:"default-checkbox",type:"checkbox",value:t.term_id,checked:s.includes(t.term_id),onChange:()=>a(t.term_id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 focus:ring-2"}),e.jsx("p",{children:t.name})]},l))})})]}),pe=({submitDraft:t,submitPublish:s,content:a,featuredImage:l,title:i,categories:n})=>e.jsxs("div",{className:"panel",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Publish"}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("button",{type:"button",className:"secondary-btn",onClick:t,children:"Save Draft"}),e.jsx(B,{post:null,content:a,featuredImage:l,title:i,categories:n,type:"post"})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-start mt-4",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"})}),e.jsxs("p",{children:["Status: ",e.jsx("strong",{children:"Draft"})," ",e.jsx("button",{className:"underline underline-offset-4 text-blue-800 hover:text-blue-600",children:"Edit"})]})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:[e.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),e.jsx("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"})]}),e.jsxs("p",{children:["Visibility: ",e.jsx("strong",{children:"Public"})," ",e.jsx("button",{className:"underline underline-offset-4 text-blue-800 hover:text-blue-600",children:"Edit"})]})]}),e.jsxs("div",{className:"flex flex-row justify-between mt-4",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:[e.jsx("path",{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"}),e.jsx("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"})]}),e.jsxs("p",{children:["Publish: ",e.jsx("strong",{children:"immediately"})," ",e.jsx("button",{className:"underline underline-offset-4 text-blue-800 hover:text-blue-600",children:"Edit"})]})]})]}),e.jsx("div",{className:"flex flex-row justify-end",children:e.jsxs("button",{type:"button",className:"ml-4 flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 focus:outline-none",onClick:s,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Publish"]})})]}),xe=({files:t,setFeaturedImageId:s,setSliderMediaOpen:a})=>e.jsx("div",{className:"flex flex-wrap gap-4",children:t.map((t,l)=>{var i,n,r;const o=(null==(r=null==(n=null==(i=null==t?void 0:t.attachment_metadata)?void 0:i.sizes)?void 0:n.find(e=>"thumbnail"===e.slug))?void 0:r.file)||(null==t?void 0:t.filename);return e.jsxs("button",{type:"button",className:"w-[150px] flex flex-col items-center gap-2 cursor-pointer",onClick:()=>{s(t.id),a(!1)},children:[e.jsx("img",{src:`http://localhost/uploads/${o}`,className:"w-[150px] h-[150px] object-cover",alt:(null==t?void 0:t.post_title)||(null==t?void 0:t.filename)}),e.jsx("span",{className:"w-full text-center break-words whitespace-normal text-sm overflow-hidden line-clamp-2",children:t.filename})]},l)})}),he=({search:t,setSearch:s})=>e.jsx("div",{className:"relative bg-white shadow-md sm:rounded-lg mt-4",children:e.jsx("div",{className:"flex flex-col items-center justify-between p-4 space-y-3 md:flex-row md:space-y-0 md:space-x-4",children:e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",id:"simple-search",className:"block w-full p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-primary-500 focus:border-primary-500",placeholder:"Search",required:"",value:t,onChange:e=>s(e.target.value)})]})]})})})}),ge=({reloadMedia:s,setReloadMedia:a})=>{const{loginPassword:l}=t.useContext(n),i=t.useRef(),[r,o]=t.useState(!1),[d,c]=t.useState(null),u=e=>{c(e.target.files[0])};return e.jsxs("div",{className:"flex flex-row items-center p-4 mt-8 border-4 border-dashed rounded-md min-h-40 "+(r?"border-blue-500 bg-blue-50":"border-gray-300"),onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),o(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0){const t=e.dataTransfer.files;i.current.files=t,u({target:{files:t}})}},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),o(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),o(!1)},children:[e.jsx("input",{type:"file",multiple:!0,ref:i,onChange:u}),e.jsx("button",{className:"ml-4 flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 focus:outline-none",type:"submit",onClick:async()=>{await(async()=>{const e=i.current.files;if(e.length)try{200==(await g(l,Array.from(e))).status&&(a(!0),c(null),i.current.value="")}catch(t){await f(t.stack||String(t))}})()},children:"Upload"})]})},fe=({totalFiles:t,page:s,perPage:a,setPage:l})=>e.jsxs("div",{className:"flex flex-rows justify-end items-center px-4 py-8",children:[e.jsxs("p",{className:"mr-4",children:[t," items"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(1==s?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s>=2&&(async()=>{l(1)})()},children:"«"}),e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(1==s?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s>=2&&(async()=>{l(s-1)})()},children:"‹"}),e.jsxs("p",{children:[s," of ",Math.ceil(t/a)]}),e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(s==Math.ceil(t/a)?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s!==Math.ceil(t/a)&&(async()=>{l(s+1)})()},children:"›"}),e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(s==Math.ceil(t/a)?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s!==Math.ceil(t/a)&&(async()=>{l(Math.ceil(t/a))})()},children:"»"})]})]}),ve=({featuredImage:s,setFeaturedImageId:a,reloadMedia:l,setReloadMedia:i})=>{const{loginPassword:r}=t.useContext(n),[o,d]=t.useState(!1),[c,u]=t.useState([]),[m,p]=t.useState("all"),[x,h]=t.useState(""),[g,f]=t.useState(1),[b,j]=t.useState(1),[y,w]=t.useState(0),N=async(e=!0)=>{const t=await v(r,20*(g-1),m,x);if(e&&200==t.status){const e=[];w(t.data.getMediaFiles.total),t.data.getMediaFiles.files.map(t=>{const s=`http://localhost/uploads/${t.filename}`,a={id:t.id,filename:t.filename,mimetype:t.mimetype,url:s,author:t.author,date:t.date,attachment_metadata:JSON.parse(t.attachment_metadata)};e.push(a)}),u(e)}};return t.useEffect(()=>{let e=!0;return(async()=>{await N(e)})(),()=>{e=!1}},[g,m,x]),t.useEffect(()=>{let e=!0;return!0===l&&(i(!1),N(e)),()=>{e=!1}},[l]),t.useEffect(()=>{var e,t,a;if(null!=s){const l=(null==(a=null==(t=null==(e=null==s?void 0:s.attachment_metadata)?void 0:e.sizes)?void 0:t.find(e=>"thumbnail"===e.slug))?void 0:a.file)||(null==s?void 0:s.filename);j(l)}},[s]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"panel mt-8",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Featured Image"}),e.jsx("hr",{className:"my-4"}),null!=s&&e.jsx("img",{src:`http://localhost/uploads/${b}`,className:"w-full h-auto object-cover",alt:(null==s?void 0:s.post_title)||(null==s?void 0:s.filename)}),e.jsx("div",{className:"flex flex-row justify-start",children:e.jsxs("button",{type:"button",className:"flex items-center justify-center  py-2 text-sm font-medium text-blue-700 hover:text-blue-800 ",onClick:()=>d(!0),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Set Featured Image"]})})]}),e.jsx($.Root,{show:o,as:t.Fragment,children:e.jsxs(J,{as:"div",className:"slide-panel",onClose:()=>{},children:[e.jsx("div",{className:"fixed inset-0"}),e.jsx("div",{className:"slide-panel-content-wrapper",children:e.jsx("div",{className:"slide-panel-content",children:e.jsx("div",{className:"slide-panel-content-inner",children:e.jsx($.Child,{as:t.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:e.jsx(J.Panel,{className:"pointer-events-auto w-screen max-w-7xl",children:e.jsx("div",{className:"bg-gray-100 flex h-full flex-col overflow-y-scroll  py-6 shadow-2xl",children:e.jsx("div",{className:"px-4 sm:px-6",children:e.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:e.jsx("div",{className:"flex items-start justify-start",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-start justify-between w-full pt-3",children:[e.jsx(J.Title,{className:"text-gray-900 text-base font-semibold leading-6",children:"Media"}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",className:"relative rounded-md text-gray-400 hover:text-gray-500",onClick:()=>{d(!1)},children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-6 w-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(he,{search:x,setSearch:h}),e.jsx(ge,{reloadMedia:l,setReloadMedia:i}),e.jsxs("div",{className:"panel mt-8",children:[e.jsx(xe,{files:c,setFeaturedImageId:a,setSliderMediaOpen:d}),e.jsx(fe,{totalFiles:y,page:g,perPage:20,setPage:f})]})]})]})})})})})})})})})})]})})]})},be=({activeContentTab:t,setActiveContentTab:s,content:a,HandleContentEditorChange:l,HandleContentChange:i})=>e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex flex-row justify-end items-center",children:e.jsxs("div",{className:"flex justify-end border-b border-gray-200",children:[e.jsx("button",{className:"px-4 py-2 "+("visual"===t?"border-b-4 border-blue-500 text-blue-500":"text-gray-800 font-medium"),onClick:()=>s("visual"),children:"Visual"}),e.jsx("button",{className:"px-4 py-2 "+("text"===t?"border-b-4 border-blue-500 text-blue-500":"text-gray-800 font-medium"),onClick:()=>s("text"),children:"Text"})]})}),e.jsxs("div",{className:"mt-4",children:["visual"===t&&e.jsx(z,{tinymceScriptSrc:"/tinymce/tinymce.min.js",license_key:"gpl",value:a,init:{height:500,menubar:!0,plugins:"advlist link image lists",toolbar:"undo redo | styles | bold italic backcolor |                     alignleft aligncenter alignright alignjustify |                     bullist numlist outdent indent | removeformat | help",branding:!1,script_url:"/tinymce/tinymce.min.js"},onEditorChange:l}),"text"===t&&e.jsx("textarea",{value:a,onChange:i,className:"w-full h-64 p-2 mt-4 border border-gray-300 rounded font-mono text-sm",placeholder:"Enter HTML content here..."})]})]}),je=({title:t,updateTitle:s})=>e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{children:["Title ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",name:"title",placeholder:"Title",autoComplete:"Title",value:t,className:"input",required:!0,onChange:e=>{s(e.target.value)}})]}),ye=({post:s,groups:a,fieldValues:l,setFieldValues:i})=>{const[n,r]=t.useState([]),o=(e,t,s)=>{i(a=>({...a,[e]:{...a[e],[t]:s}}))};return t.useEffect(()=>{const e=a.map(e=>({groupId:e.id,fields:e.fields})),t={};e.forEach(({groupId:e,fields:s})=>{t[e]={},s.forEach(s=>{t[e][s.name]=s.defaultValue||""})}),r(e),i(t)},[a]),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"text-lg font-semibold mb-4",children:"Custom Fields"}),n.map(({groupId:s,fields:a})=>e.jsx("div",{className:"mb-6",children:a.map((a,i)=>{var n,r,d,c,u,m,p,x,h,g;return e.jsxs(t.Fragment,{children:[("text"===a.type||"email"===a.type||"number"==a.type||"url"==a.type||"password"==a.type)&&e.jsx(q,{type:a.type,label:a.label,name:a.name,value:(null==(n=l[s])?void 0:n[a.name])||"",setValue:e=>o(s,a.name,e.target.value)}),"text_area"===a.type&&e.jsx(W,{type:a.type,label:a.label,name:a.name,value:(null==(r=l[s])?void 0:r[a.name])||"",setValue:e=>o(s,a.name,e.target.value)}),"range"===a.type&&e.jsx(G,{type:a.type,label:a.label,name:a.name,value:(null==(d=l[s])?void 0:d[a.name])??Math.floor((a.rangeStart+a.rangeEnd)/2),setValue:e=>o(s,a.name,e.target.value),args:{rangeStart:a.rangeStart,rangeEnd:a.rangeEnd}}),"image"==a.type&&e.jsx(K,{type:a.type,label:a.label,name:a.name,value:(null==(c=l[s])?void 0:c[a.name])||"",setValue:e=>o(s,a.name,e.target.value)}),"file"==a.type&&e.jsx(Q,{type:a.type,label:a.label,name:a.name,value:(null==(u=l[s])?void 0:u[a.name])||"",setValue:e=>o(s,a.name,e.target.value)}),"wysiwyg"==a.type&&e.jsx(X,{type:a.type,label:a.label,name:a.name,value:(null==(m=l[s])?void 0:m[a.name])||"",setValue:e=>o(s,a.name,e.target.value)}),"link"==a.type&&e.jsx(Y,{type:a.type,label:a.label,name:a.name,value:(null==(p=l[s])?void 0:p[a.name])||"",setValue:e=>o(s,a.name,e.target.value),args:{postType:a.postType}}),"post"==a.type&&e.jsx(ee,{type:a.type,label:a.label,name:a.name,value:(null==(x=l[s])?void 0:x[a.name])||"",setValue:e=>o(s,a.name,e.target.value),args:{postType:a.postType}}),"page_link"==a.type&&e.jsx(te,{type:a.type,label:a.label,name:a.name,value:(null==(h=l[s])?void 0:h[a.name])||"",setValue:e=>o(s,a.name,e.target.value),args:{postType:a.postType}}),"relationship"==a.type&&e.jsx(se,{type:a.type,label:a.label,name:a.name,value:(null==(g=l[s])?void 0:g[a.name])||"",setValue:e=>o(s,a.name,e.target.value),args:{postType:a.postType}})]},s+"_"+i)})},s))]})},we=({post:s,seo:a,setSEO:l,setPostSocialImageId:i,setPostSocialImage:r,postSocialImage:o,postSocialImageId:d})=>{const{loginPassword:c}=t.useContext(n),[u,m]=t.useState(!1),[p,x]=t.useState(""),[h,g]=t.useState(""),[f,v]=t.useState(""),[j,y]=t.useState(""),[w,N]=t.useState(""),[S,C]=t.useState(""),k=[{name:"Title",value:"title"},{name:"Site Title",value:"siteTitle"},{name:"Seperator",value:"seperator"}],P=(e,t)=>{const s={title:p,description:h,ogTitle:f,ogDescription:j,ogUrl:w,ogSiteName:S};s[e]=t,l(s),"title"==e&&x(t),"description"==e&&g(t),"ogTitle"==e&&v(t),"ogDescription"==e&&y(t),"ogUrl"==e&&N(t),"ogSiteName"==e&&C(t)};return t.useEffect(()=>{(async()=>{const e=await b();let t=null;200==e.status&&(t=JSON.parse(e.data.getSiteSEOSettings)),x(t&&"string"==typeof t.postSEOTitle&&""!==t.postSEOTitle.trim()?t.postSEOTitle:""),g(t&&"string"==typeof t.postDescription&&""!==t.postDescription.trim()?t.postDescription:""),v(t&&"string"==typeof t.postSocialTitle&&""!==t.postSocialTitle.trim()?t.postSocialTitle:""),y(t&&"string"==typeof t.postSocialDescription&&""!==t.postSocialDescription.trim()?t.postSocialDescription:""),C(t&&"string"==typeof t.websiteName&&""!==t.websiteName.trim()?t.websiteName:""),i(t&&"number"==typeof t.postSocialImageId?t.postSocialImageId:null)})()},[]),e.jsxs("div",{className:"panel-no-pad mt-8",children:[e.jsxs("div",{className:"w-full bg-gray-200 p-4 flex flex-row items-center justify-between",children:[e.jsx("p",{children:"SEO"}),u?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"text-white hover:text-blue-500 cursor-pointer w-4 h-4",onClick:()=>m(!1),children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}):e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"text-white hover:text-blue-500 cursor-pointer w-4 h-4",onClick:()=>m(!0),children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})]}),u&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"SEO Title"}),e.jsx(A,{value:p,setValue:x,variables:k})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{className:"block",children:"Description"}),e.jsx(H,{value:h,setValue:g,variables:k})]}),e.jsx("div",{className:"w-full mb-4",children:e.jsx(U,{socialImage:o,setSocialImage:r,setImageId:i})}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"Social Title"}),e.jsx(A,{value:f,setValue:v,variables:k})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{className:"block",children:"Social Description"}),e.jsx(H,{value:j,setValue:y,variables:k})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"og:Url"}),e.jsx("input",{type:"text",name:"ogUrl",placeholder:"og:Url",autoComplete:"og:Url",value:w,className:"input",required:!0,onChange:e=>{P("ogUrl",e.target.value)}})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"og:SiteName"}),e.jsx("input",{type:"text",name:"ogSiteName",placeholder:"og:SiteName",autoComplete:"og:SiteName",value:S,className:"input",required:!0,onChange:e=>{P("ogSiteName",e.target.value)}})]})]})]})},Ne=()=>{const{loginPassword:s}=t.useContext(n),{postType:i}=a(),r=l(),[d,c]=t.useState([]),[u,m]=t.useState([]),[p,x]=t.useState(""),[h,g]=t.useState(""),[f,v]=t.useState(null),[b,M]=t.useState(null),[T,I]=t.useState("visual"),[_,F]=t.useState(""),[E,R]=t.useState([]),[D,V]=t.useState([]),[Z,O]=t.useState(!1),[B,A]=t.useState([]),[H,U]=t.useState({}),[$,J]=t.useState(!0),[z,q]=t.useState(!1),[W,G]=t.useState(null),[K,Q]=t.useState(""),[X,Y]=t.useState(""),[ee,te]=t.useState({title:"",description:"",ogTitle:"",ogDescription:"",ogUrl:"",ogSiteName:"",socialImageId:W});return t.useEffect(()=>{let e=!0;return(async()=>{await(async(e=!0)=>{const t=await o(i,s);if(e&&200==t.status){const e=JSON.parse(t.data.getCustomPostBySlug);Y(e.name)}const a=await k(s,"category");e&&200==a.status&&c(a.data.getCategories.categories);const l=await k(s,"post_tag");e&&200==l.status&&m(l.data.getCategories.categories);const n=await P("post_type","is_equal",i,s);if(200==n.status){const e=JSON.parse(n.data.getCustomFieldGroupsWhereMatch);A(e)}})(e)})(),()=>{e=!1}},[]),t.useEffect(()=>{let e=!0;return null!=W&&(async(e=!0)=>{const t=await j(W);e&&200==t.status&&Q(t.data.getMediaFileById)})(e),()=>{e=!1}},[W]),t.useEffect(()=>{let e=!0;return null!=f&&(async(e=!0)=>{const t=await j(f);e&&200==t.status&&M(t.data.getMediaFileById)})(e),()=>{e=!1}},[f]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full flex flex-col md:flex-row",children:[e.jsxs("div",{className:"w-full md:w-3/4 md:mr-4",children:[e.jsx(ce,{customPostName:X}),e.jsx("div",{className:"panel mt-8",children:e.jsx(je,{title:p,updateTitle:e=>{if("string"!=typeof e)return"";x(e)}})}),e.jsxs("div",{className:"panel-no-pad mt-8",children:[e.jsxs("div",{className:"w-full bg-gray-200 p-4 flex flex-row items-center justify-between",children:[e.jsx("p",{children:"Content"}),e.jsx(L,{expanded:$,setValue:J})]}),$&&e.jsx("div",{className:"p-4",children:e.jsx(be,{activeContentTab:T,setActiveContentTab:I,content:_,HandleContentEditorChange:e=>{F(e)},HandleContentChange:e=>{const t=""===e.target.value.trim()?"":e.target.value;F(t)}})})]}),e.jsxs("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg bg-white w-full mt-8",children:[e.jsxs("div",{className:"w-full bg-gray-200 p-4 flex flex-row items-center justify-between",children:[e.jsx("p",{children:"Custom Fields"}),e.jsx(L,{expanded:z,setValue:q})]}),z&&e.jsx("div",{className:"p-4",children:e.jsx(ye,{groups:B,fieldValues:H,setFieldValues:U})})]}),e.jsx(we,{seo:ee,setSEO:te,setPostSocialImageId:G,setPostSocialImage:Q,postSocialImage:K,postSocialImageId:W})]}),e.jsxs("div",{className:"w-full md:w-1/4 md:ml-4",children:[e.jsx(pe,{submitDraft:async()=>{if(""==p)return void y("Failed to create page, requires a title.","error");const e=await C(s,p,_,f,E,D,i);if(200==e.status){y("Successfully created post.","success");const t=e.data.createDraftNewPost.post_id,a=Object.entries(H).map(([e,t])=>({group_id:e,fields:t}));await N(a,t,s),ee.socialImageId=W;const l=JSON.stringify(ee);return await S(s,l,t),void r(`/admin/custom/${i}/edit/${t}`)}y("Failed to create post.","error")},submitPublish:async()=>{if(""==p)return void y("Failed to create page, requires a title.","error");const e=await w(s,p,_,f,E,D,i);if(200==e.status){y("Successfully created post.","success");const t=e.data.createPublishNewPost.post_id,a=Object.entries(H).map(([e,t])=>({group_id:e,fields:t}));await N(a,t,s),ee.socialImageId=W;const l=JSON.stringify(ee);return await S(s,l,t),void r(`/admin/custom/${i}/edit/${t}`)}y("Failed to create post.","error")},content:_,featuredImage:b,title:p,categories:d}),e.jsx(ve,{featuredImage:b,setFeaturedImageId:v,reloadMedia:Z,setReloadMedia:O}),e.jsx(me,{categories:d,categoriesSelectedIds:E,toggleCategoryCheckbox:e=>{R(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])}}),e.jsx(ue,{tags:u,tagsSelectedIds:D,toggleTagCheckbox:e=>{V(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])}})]})]})})},Se=({post:t,customPostName:s})=>{const a=window.location.origin;return e.jsx("div",{className:"title-panel",children:e.jsx("div",{className:"title-bar",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl",children:["Edit ",s," Post"]}),"publish"==(null==t?void 0:t.post_status)&&e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-500",children:"Permalink:"})," ",e.jsxs("a",{href:`${a}${null==t?void 0:t.guid}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 hover:text-blue-500 underline underline-offset-4",children:[a,null==t?void 0:t.guid]})]})]})})})},Ce=({title:t,updateTitle:s})=>e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{children:["Title ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",name:"title",placeholder:"Title",autoComplete:"Title",value:t,className:"input",required:!0,onChange:e=>{s(e.target.value)}})]}),ke=({activeContentTab:t,setActiveContentTab:s,content:a,HandleContentEditorChange:l,HandleContentChange:i})=>e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"flex flex-row justify-end items-center",children:e.jsxs("div",{className:"flex justify-end border-b border-gray-200",children:[e.jsx("button",{className:"px-4 py-2 "+("visual"===t?"border-b-4 border-blue-500 text-blue-500":"text-gray-800 font-medium"),onClick:()=>s("visual"),children:"Visual"}),e.jsx("button",{className:"px-4 py-2 "+("text"===t?"border-b-4 border-blue-500 text-blue-500":"text-gray-800 font-medium"),onClick:()=>s("text"),children:"Text"})]})}),e.jsxs("div",{className:"mt-4",children:["visual"===t&&e.jsx(z,{tinymceScriptSrc:"/tinymce/tinymce.min.js",license_key:"gpl",value:a,init:{height:500,menubar:!0,plugins:"advlist link image lists",toolbar:"undo redo | styles | bold italic backcolor |                     alignleft aligncenter alignright alignjustify |                     bullist numlist outdent indent | removeformat | help",branding:!1,script_url:"/tinymce/tinymce.min.js"},onEditorChange:l}),"text"===t&&e.jsx("textarea",{value:a,onChange:i,className:"w-full h-64 p-2 mt-4 border border-gray-300 rounded font-mono text-sm",placeholder:"Enter HTML content here..."})]})]}),Pe=({updatePost:s,post:a,setReloadPost:l,content:i,featuredImage:r,title:o,categories:d})=>{const{loginPassword:c}=t.useContext(n),[u,m]=t.useState(!1),[p,h]=t.useState("draft"),[g,f]=t.useState(!1),[v,b]=t.useState(""),[j,y]=t.useState(!1),[w,N]=t.useState(!1),[S,C]=t.useState("");return t.useEffect(()=>{a&&(h(a.post_status),b(a.post_date),null==a.post_password?"private"==a.post_status?N("private"):N("public"):N("password"))},[a]),e.jsxs("div",{className:"panel",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Publish"}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"flex flex-row justify-end items-center",children:e.jsx(B,{post:a,content:i,featuredImage:r,title:o,categories:d,type:"post"})}),e.jsxs("div",{className:"flex flex-col gap-2 items-start mt-4",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"m11.54 22.351.07.04.028.016a.76.76 0 0 0 .723 0l.028-.015.071-.041a16.975 16.975 0 0 0 1.144-.742 19.58 19.58 0 0 0 2.683-2.282c1.944-1.99 3.963-4.98 3.963-8.827a8.25 8.25 0 0 0-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58 0 0 0 2.682 2.282 16.975 16.975 0 0 0 1.145.742ZM12 13.5a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z",clipRule:"evenodd"})}),e.jsxs("p",{children:["Status: ",e.jsx("strong",{children:null==a?void 0:a.post_status.replace(/\b\w/g,e=>e.toUpperCase())})," ",0==u&&e.jsx("button",{className:"underline underline-offset-4 text-blue-800 hover:text-blue-600",onClick:()=>m(!0),children:"Edit"})]})]}),u&&e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs("select",{name:"status",className:"bg-gray-100 border-gray-300 border px-4 py-2 divide-y divide-gray-100 rounded shadow w-44",value:p,onChange:e=>h(e.target.value),children:[e.jsx("option",{value:"publish",children:"Published"}),e.jsx("option",{value:"pending",children:"Pending Review"}),e.jsx("option",{value:"draft",children:"Draft"})]}),e.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>{(async()=>{const e=await x(c,p,a.id);200==e.status&&e.data.updatePostStatus.success&&(l(!0),m(!1))})()},children:"Ok"}),e.jsx("button",{type:"button",className:"underline underline-offset-4 text-blue-800 hover:text-blue-600",onClick:()=>m(!1),children:"Cancel"})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:[e.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"}),e.jsx("path",{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"})]}),e.jsxs("p",{children:["Visibility:"," ",e.jsx("strong",{children:null==(null==a?void 0:a.post_password)?e.jsx(e.Fragment,{children:"private"==(null==a?void 0:a.post_status)?"Private":"Public"}):"Password Protected"})," ",e.jsx("button",{className:"underline underline-offset-4 text-blue-800 hover:text-blue-600",onClick:()=>y(!0),children:"Edit"})]})]}),j&&e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs("select",{name:"status",className:"bg-gray-100 border-gray-300 border px-4 py-2 divide-y divide-gray-100 rounded shadow w-44",value:w,onChange:e=>N(e.target.value),children:[e.jsx("option",{value:"public",children:"Public"}),e.jsx("option",{value:"private",children:"Private"}),e.jsx("option",{value:"password",children:"PasswordProtected"})]}),e.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>{"public"==w||"private"==w?(async e=>{const t=await x(c,e,a.id);200==t.status&&t.data.updatePostStatus.success&&(l(!0),m(!1))})("public"==w?"publish":"private"):(async()=>{const e=await T(c,S,a.id);200==e.status&&e.data.updatePostPassword.success&&(l(!0),y(!1))})()},children:"Ok"}),e.jsx("button",{type:"button",className:"underline underline-offset-4 text-blue-800 hover:text-blue-600",onClick:()=>y(!1),children:"Cancel"})]}),"password"==w&&e.jsx("p",{children:e.jsx("input",{type:"password",className:"w-full bg-gray-100 border-gray-300 border px-4 py-2 divide-y divide-gray-100 rounded shadow w-44",placeholder:"Password",onChange:e=>{C(e.target.value)}})}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:[e.jsx("path",{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"}),e.jsx("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"})]}),e.jsxs("div",{children:["Published on: ",e.jsx("strong",{children:new Date(null==a?void 0:a.post_date).toDateString()})," ",e.jsx("button",{className:"underline underline-offset-4 text-blue-800 hover:text-blue-600",onClick:()=>f(!0),children:"Edit"})]})]}),g&&e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(M,{id:"release-date",date:v,updateFunction:e=>{const[t,s,a]=e.split("/").map(Number),l=new Date(a,s-1,t);l.setHours(12,0,0,0);const i=l.toISOString();b(i)}},`dp-${v}`),e.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>{(async e=>{const t=await I(c,e,a.id);200==t.status&&t.data.updatePostPublishDate.success&&(l(!0),f(!1))})(v)},children:"Ok"}),e.jsx("button",{type:"button",className:"underline underline-offset-4 text-blue-800 hover:text-blue-600",onClick:()=>f(!1),children:"Cancel"})]})]}),e.jsxs("div",{className:`flex flex-row justify-${"trash"==(null==a?void 0:a.post_status)?"end":"between"} mt-4`,children:["trash"!=(null==a?void 0:a.post_status)&&e.jsx("button",{type:"button",className:"text-red-800 underline underline-offset-4",onClick:()=>{(async()=>{const e=await x(c,"trash",a.id);200==e.status&&e.data.updatePostStatus.success&&l(!0)})()},children:"Move To Bin"}),e.jsxs("button",{type:"button",className:"ml-4 flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 focus:outline-none",onClick:()=>{s()},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})]})]})},Me=({files:t,setFeaturedImageId:s,setSliderMediaOpen:a})=>e.jsx("div",{className:"flex flex-wrap gap-4",children:t.map((t,l)=>{var i,n,r;const o=(null==(r=null==(n=null==(i=null==t?void 0:t.attachment_metadata)?void 0:i.sizes)?void 0:n.find(e=>"thumbnail"===e.slug))?void 0:r.file)||(null==t?void 0:t.filename);return e.jsxs("button",{type:"button",className:"w-[150px] flex flex-col items-center gap-2 cursor-pointer",onClick:()=>{s(t.id),a(!1)},children:[e.jsx("img",{src:`http://localhost/uploads/${o}`,className:"w-[150px] h-[150px] object-cover",alt:(null==t?void 0:t.post_title)||(null==t?void 0:t.filename)}),e.jsx("span",{className:"w-full text-center break-words whitespace-normal text-sm overflow-hidden line-clamp-2",children:t.filename})]},l)})}),Te=({search:t,setSearch:s})=>e.jsx("div",{className:"relative bg-white shadow-md sm:rounded-lg mt-4",children:e.jsx("div",{className:"flex flex-col items-center justify-between p-4 space-y-3 md:flex-row md:space-y-0 md:space-x-4",children:e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",id:"simple-search",className:"block w-full p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-primary-500 focus:border-primary-500",placeholder:"Search",required:"",value:t,onChange:e=>s(e.target.value)})]})]})})})}),Ie=({totalFiles:t,page:s,perPage:a,setPage:l})=>e.jsxs("div",{className:"flex flex-rows justify-end items-center px-4 py-8",children:[e.jsxs("p",{className:"mr-4",children:[t," items"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(1==s?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s>=2&&(async()=>{l(1)})()},children:"«"}),e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(1==s?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s>=2&&(async()=>{l(s-1)})()},children:"‹"}),e.jsxs("p",{children:[s," of ",Math.ceil(t/a)]}),e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(s==Math.ceil(t/a)?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s!==Math.ceil(t/a)&&(async()=>{l(s+1)})()},children:"›"}),e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(s==Math.ceil(t/a)?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s!==Math.ceil(t/a)&&(async()=>{l(Math.ceil(t/a))})()},children:"»"})]})]}),_e=({reloadMedia:s,setReloadMedia:a})=>{const{loginPassword:l}=t.useContext(n),i=t.useRef(),[r,o]=t.useState(!1),[d,c]=t.useState(null),u=e=>{c(e.target.files[0])};return e.jsxs("div",{className:"flex flex-row items-center p-4 mt-8 border-4 border-dashed rounded-md min-h-40 "+(r?"border-blue-500 bg-blue-50":"border-gray-300"),onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),o(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0){const t=e.dataTransfer.files;i.current.files=t,u({target:{files:t}})}},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),o(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),o(!1)},children:[e.jsx("input",{type:"file",multiple:!0,ref:i,onChange:u}),e.jsx("button",{className:"ml-4 flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 focus:outline-none",type:"submit",onClick:async()=>{await(async()=>{const e=i.current.files;if(e.length)try{200==(await g(l,Array.from(e))).status&&(a(!0),c(null),i.current.value="")}catch(t){await f(t.stack||String(t))}})()},children:"Upload"})]})},Fe=({featuredImage:s,setFeaturedImageId:a,reloadMedia:l,setReloadMedia:i})=>{const{loginPassword:r}=t.useContext(n),[o,d]=t.useState(!1),[c,u]=t.useState(!1),[m,p]=t.useState([]),[x,h]=t.useState("all"),[g,f]=t.useState(""),[b,j]=t.useState(1),[y,w]=t.useState(1),[N,S]=t.useState(0),C=async()=>{const e=await v(r,20*(b-1),x,g);if(200==e.status){const t=[];S(e.data.getMediaFiles.total),e.data.getMediaFiles.files.map(e=>{const s=`http://localhost/uploads/${e.filename}`,a={id:e.id,filename:e.filename,mimetype:e.mimetype,url:s,author:e.author,date:e.date,attachment_metadata:JSON.parse(e.attachment_metadata)};t.push(a)}),p(t)}};t.useEffect(()=>{C()},[b,x,g]),t.useEffect(()=>{1==l&&(i(!1),C())},[l]),t.useEffect(()=>{var e,t,a;if(null!=s){const l=(null==(a=null==(t=null==(e=null==s?void 0:s.attachment_metadata)?void 0:e.sizes)?void 0:t.find(e=>"thumbnail"===e.slug))?void 0:a.file)||(null==s?void 0:s.filename);w(l)}},[s]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"panel mt-8",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Featured Image"}),e.jsx("hr",{className:"my-4"}),null==s||o?e.jsx("div",{className:"text-gray-300 w-full flex justify-center items-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-[50%]",children:e.jsx("path",{fillRule:"evenodd",d:"M1.5 6a2.25 2.25 0 0 1 2.25-2.25h16.5A2.25 2.25 0 0 1 22.5 6v12a2.25 2.25 0 0 1-2.25 2.25H3.75A2.25 2.25 0 0 1 1.5 18V6ZM3 16.06V18c0 .414.336.75.75.75h16.5A.75.75 0 0 0 21 18v-1.94l-2.69-2.689a1.5 1.5 0 0 0-2.12 0l-.88.879.97.97a.75.75 0 1 1-1.06 1.06l-5.16-5.159a1.5 1.5 0 0 0-2.12 0L3 16.061Zm10.125-7.81a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Z",clipRule:"evenodd"})})}):e.jsx("img",{src:`http://localhost/uploads/${y}`,className:"w-full h-auto object-cover",alt:(null==s?void 0:s.post_title)||(null==s?void 0:s.filename),onError:()=>d(!0)}),e.jsx("div",{className:"flex flex-row justify-start",children:e.jsxs("button",{type:"button",className:"flex items-center justify-center  py-2 text-sm font-medium text-blue-700 hover:text-blue-800 ",onClick:()=>u(!0),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Set Featured Image"]})})]}),e.jsx($.Root,{show:c,as:t.Fragment,children:e.jsxs(J,{as:"div",className:"slide-panel",onClose:()=>{},children:[e.jsx("div",{className:"fixed inset-0"}),e.jsx("div",{className:"slide-panel-content-wrapper",children:e.jsx("div",{className:"slide-panel-content",children:e.jsx("div",{className:"slide-panel-content-inner",children:e.jsx($.Child,{as:t.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:e.jsx(J.Panel,{className:"pointer-events-auto w-screen max-w-7xl",children:e.jsx("div",{className:"bg-gray-100 flex h-full flex-col overflow-y-scroll  py-6 shadow-2xl",children:e.jsx("div",{className:"px-4 sm:px-6",children:e.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:e.jsx("div",{className:"flex items-start justify-start",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-start justify-between w-full pt-3",children:[e.jsx(J.Title,{className:"text-gray-900 text-base font-semibold leading-6",children:"Media"}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",className:"relative rounded-md text-gray-400 hover:text-gray-500",onClick:()=>{u(!1)},children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-6 w-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(Te,{search:g,setSearch:f}),e.jsx(_e,{reloadMedia:l,setReloadMedia:i}),e.jsxs("div",{className:"panel mt-8",children:[e.jsx(Me,{files:m,setFeaturedImageId:a,setSliderMediaOpen:u}),e.jsx(Ie,{totalFiles:N,page:b,perPage:20,setPage:j})]})]})]})})})})})})})})})})]})})]})},Ee=({categories:s,categoriesSelectedIds:a,toggleCategoryCheckbox:l,postId:i,setReloadPost:r})=>{const{loginPassword:o}=t.useContext(n);return e.jsxs("div",{className:"panel mt-8",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Categories"}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"flex flex-col gap-2 items-start mt-4 rounded  border border-gray-300",children:e.jsx("ul",{className:"py-4",children:s.map((t,s)=>e.jsxs("li",{className:"ml-2 flex flex-row items-center gap-4",children:[e.jsx("input",{id:"default-checkbox",type:"checkbox",value:t.term_id,checked:a.includes(t.term_id),onChange:()=>l(t.term_id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 focus:ring-2"}),e.jsx("p",{children:t.name})]},s))})}),e.jsx("div",{className:"flex flex-row justify-start",children:e.jsxs("button",{type:"button",className:"mt-4 secondary-btn",onClick:()=>(async()=>{const e=await _(o,a,i);if(200==e.status&&1==e.data.updatePostCategories.success)return r(!0),void y("Successfully updated post categories","success");y("Failed to update post categories","error")})(),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update Categories"]})})]})},Re=({tags:s,tagsSelectedIds:a,toggleTagCheckbox:l,postId:i,setReloadPost:r})=>{const{loginPassword:o}=t.useContext(n);return e.jsxs("div",{className:"panel mt-8",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Tags"}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"flex flex-col gap-2 items-start mt-4 rounded  border border-gray-300",children:e.jsx("ul",{className:"py-4",children:s.map((t,s)=>e.jsxs("li",{className:"ml-2 flex flex-row items-center gap-4",children:[e.jsx("input",{id:"default-checkbox",type:"checkbox",value:t.term_id,checked:a.includes(t.term_id),onChange:()=>l(t.term_id),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 focus:ring-2"}),e.jsx("p",{children:t.name})]},s))})}),e.jsx("div",{className:"flex flex-row justify-start",children:e.jsxs("button",{type:"button",className:"mt-4 secondary-btn ",onClick:()=>(async()=>{const e=await F(o,a,i);if(200==e.status&&1==e.data.updatePostTags.success)return r(!0),void y("Successfully updated post tags","success");y("Failed to update post tags","error")})(),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update Tags"]})})]})},De=({post:s,groups:a,fieldValues:l,setFieldValues:i})=>{const[n,r]=t.useState([]),o=(e,t,s)=>{i(a=>({...a,[e]:{...a[e],[t]:s}}))};return t.useEffect(()=>{(async()=>{const e=a.map(e=>({groupId:e.id,fields:e.fields}));r(e)})()},[a]),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"text-lg font-semibold mb-4",children:"Custom Fields"}),n.map(({groupId:s,fields:a})=>e.jsx("div",{className:"mb-6",children:a.map((a,i)=>{var n,r,d,c,u,m,p,x,h,g;return e.jsxs(t.Fragment,{children:[("text"===a.type||"email"===a.type||"number"==a.type||"url"==a.type||"password"==a.type)&&e.jsx(q,{type:a.type,label:a.label,name:a.name,value:(null==(n=l[s])?void 0:n[a.name])||"",setValue:e=>o(s,a.name,e.target.value)}),"text_area"===a.type&&e.jsx(W,{type:a.type,label:a.label,name:a.name,value:(null==(r=l[s])?void 0:r[a.name])||"",setValue:e=>o(s,a.name,e.target.value)}),"range"===a.type&&e.jsx(G,{type:a.type,label:a.label,name:a.name,value:(null==(d=l[s])?void 0:d[a.name])??Math.floor((a.rangeStart+a.rangeEnd)/2),setValue:e=>o(s,a.name,e.target.value),args:{rangeStart:a.rangeStart,rangeEnd:a.rangeEnd}}),"image"==a.type&&e.jsx(K,{type:a.type,label:a.label,name:a.name,value:(null==(c=l[s])?void 0:c[a.name])||"",setValue:e=>o(s,a.name,e.target.value)}),"file"==a.type&&e.jsx(Q,{type:a.type,label:a.label,name:a.name,value:(null==(u=l[s])?void 0:u[a.name])||"",setValue:e=>o(s,a.name,e.target.value)}),"wysiwyg"==a.type&&e.jsx(X,{type:a.type,label:a.label,name:a.name,value:(null==(m=l[s])?void 0:m[a.name])||"",setValue:e=>o(s,a.name,e.target.value)}),"link"==a.type&&e.jsx(Y,{type:a.type,label:a.label,name:a.name,value:(null==(p=l[s])?void 0:p[a.name])||"",setValue:e=>o(s,a.name,e.target.value),args:{postType:a.postType}}),"post"==a.type&&e.jsx(ee,{type:a.type,label:a.label,name:a.name,value:(null==(x=l[s])?void 0:x[a.name])||"",setValue:e=>o(s,a.name,e.target.value),args:{postType:a.postType}}),"page_link"==a.type&&e.jsx(te,{type:a.type,label:a.label,name:a.name,value:(null==(h=l[s])?void 0:h[a.name])||"",setValue:e=>o(s,a.name,e.target.value),args:{postType:a.postType}}),"relationship"==a.type&&e.jsx(se,{type:a.type,label:a.label,name:a.name,value:(null==(g=l[s])?void 0:g[a.name])||"",setValue:e=>o(s,a.name,e.target.value),args:{postType:a.postType}})]},s+"_"+i)})},s))]})},Ve=({post:s})=>{const{loginPassword:a}=t.useContext(n),[l,i]=t.useState(!1),[r,o]=t.useState(null),[d,c]=t.useState(""),[u,m]=t.useState(""),[p,x]=t.useState(""),[h,g]=t.useState(""),[f,v]=t.useState(""),[w,N]=t.useState(""),[C,k]=t.useState(""),[P,M]=t.useState(null),T=[{name:"Title",value:"title"},{name:"Site Title",value:"siteTitle"},{name:"Seperator",value:"seperator"}];return t.useEffect(()=>{(null==s?void 0:s.id)&&(async()=>{const e=await b(),t=await E(s.id);let a=null,l=null;200==e.status&&(a=JSON.parse(e.data.getSiteSEOSettings)),200==t.status&&(t.data.getPostSEO?(l=JSON.parse(JSON.parse(t.data.getPostSEO)),o(l),c(l&&"string"==typeof l.title&&""!==l.title.trim()?l.title:a&&"string"==typeof a.postSEOTitle&&""!==a.postSEOTitle.trim()?a.postSEOTitle:""),m(l&&"string"==typeof l.description&&""!==l.description.trim()?l.description:a&&"string"==typeof a.postDescription&&""!==a.postDescription.trim()?a.postDescription:""),x(l&&"string"==typeof l.ogTitle&&""!==l.ogTitle.trim()?l.ogTitle:a&&"string"==typeof a.postSocialTitle&&""!==a.postSocialTitle.trim()?a.postSocialTitle:""),g(l&&"string"==typeof l.ogDescription&&""!==l.ogDescription.trim()?l.ogDescription:a&&"string"==typeof a.postSocialDescription&&""!==a.postSocialDescription.trim()?a.postSocialDescription:""),v(l.ogUrl?l.ogUrl:""),N(l&&"string"==typeof l.ogSiteName&&""!==l.ogSiteName.trim()?l.ogSiteName:a&&"string"==typeof a.websiteName&&""!==a.websiteName.trim()?a.websiteName:""),M(l&&Number.isInteger(l.socialImageId)?l.socialImageId:a&&Number.isInteger(a.postSocialImageId)?a.postSocialImageId:null)):(c(a&&"string"==typeof a.postSEOTitle&&""!==a.postSEOTitle.trim()?a.postSEOTitle:""),m(a&&"string"==typeof a.postDescription&&""!==a.postDescription.trim()?a.postDescription:""),x(a&&"string"==typeof a.postSocialTitle&&""!==a.postSocialTitle.trim()?a.postSocialTitle:""),g(a&&"string"==typeof a.postSocialDescription&&""!==a.postSocialDescription.trim()?a.postSocialDescription:""),N(a&&"string"==typeof a.websiteName&&""!==a.websiteName.trim()?a.websiteName:""),M(a&&"number"==typeof a.postSocialImageId?a.postSocialImageId:null)))})()},[s]),t.useEffect(()=>{null!=P&&(async()=>{const e=await j(P);200==e.status&&k(e.data.getMediaFileById)})()},[P]),e.jsxs("div",{className:"panel-no-pad mt-8",children:[e.jsxs("div",{className:"w-full bg-gray-200 p-4 flex flex-row items-center justify-between",children:[e.jsx("p",{children:"SEO"}),l?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"text-white hover:text-blue-500 cursor-pointer w-4 h-4",onClick:()=>i(!1),children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}):e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"text-white hover:text-blue-500 cursor-pointer w-4 h-4",onClick:()=>i(!0),children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})]}),l&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"SEO Title"}),e.jsx(A,{value:d,setValue:c,variables:T})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{className:"block",children:"Description"}),e.jsx(H,{value:u,setValue:m,variables:T})]}),e.jsx("div",{className:"w-full mb-4",children:e.jsx(U,{socialImage:C,setSocialImage:k,setImageId:M})}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"Social Title"}),e.jsx(A,{value:p,setValue:x,variables:T})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{className:"block",children:"Social Description"}),e.jsx(H,{value:h,setValue:g,variables:T})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"Social Url"}),e.jsx("input",{type:"text",name:"ogUrl",placeholder:"og:Url",autoComplete:"og:Url",value:f,className:"input",required:!0,onChange:e=>{v(e.target.value)}})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"Social SiteName"}),e.jsx("input",{type:"text",name:"ogSiteName",placeholder:"og:SiteName",autoComplete:"og:SiteName",value:w,className:"input",required:!0,onChange:e=>{N(e.target.value)}})]}),e.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:()=>{(async()=>{const e=JSON.stringify({title:d,description:u,ogTitle:p,ogDescription:h,ogUrl:f,ogSiteName:w,socialImageId:P}),t=await S(a,e,s.id);200==t.status&&t.data.updatePostSEO.success?y("Successfully updated SEO","success"):y("Failed to update SEO","error")})()},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})]})]})},Ze=()=>{const{loginPassword:s}=t.useContext(n),{postType:l,id:i}=a(),[r,d]=t.useState(null),[c,u]=t.useState(!1),[m,p]=t.useState([]),[x,h]=t.useState([]),[g,f]=t.useState(""),[v,b]=t.useState(""),[w,S]=t.useState(null),[C,M]=t.useState(null),[T,I]=t.useState("visual"),[_,F]=t.useState(""),[E,B]=t.useState([]),[A,H]=t.useState([]),[U,$]=t.useState(!1),[J,z]=t.useState([]),[q,W]=t.useState({}),[G,K]=t.useState(!0),[Q,X]=t.useState(!1),[Y,ee]=t.useState(""),te=async(e=!0)=>{const t=await R("id",i);e&&null!=t&&(d(t),f(t.post_title),F(t.post_content),S(t.featured_image_id));const a=await D(i),n=[];for(const s of a)n.push(s.term_id);B(n);const r=await V(i),o=[];for(const s of r)o.push(s.term_id);H(o);const c=await P("post_type","is_equal",l,s);if(200==c.status){const e=JSON.parse(c.data.getCustomFieldGroupsWhereMatch);z(e)}const u=await Z(i,s);if(200==u.status){const e=JSON.parse(u.data.getPostCustomFieldData).reduce((e,t)=>(e[t.group_id]=t.fields,e),{});W(e)}};return t.useEffect(()=>{let e=!0;return(async()=>{await(async(e=!0)=>{const t=await o(l,s);if(e&&200==t.status){const e=JSON.parse(t.data.getCustomPostBySlug);ee(e.name)}const a=await k(s,"category");e&&200==a.status&&p(a.data.getCategories.categories);const i=await k(s,"post_tag");e&&200==i.status&&h(i.data.getCategories.categories)})(e),await te(e)})(),()=>{e=!1}},[]),t.useEffect(()=>{let e=!0;return null!=w&&(async(e=!0)=>{const t=await j(w);e&&200==t.status&&M(t.data.getMediaFileById)})(e),()=>{e=!1}},[w]),t.useEffect(()=>{let e=!0;return!0===c&&(u(!1),te(e)),()=>{e=!1}},[c]),e.jsxs("div",{className:"w-full flex flex-col md:flex-row",children:[e.jsxs("div",{className:"w-full md:w-3/4 md:mr-4",children:[e.jsx(Se,{post:r,customPostName:Y}),e.jsx("div",{className:"panel mt-8",children:e.jsx(Ce,{title:g,updateTitle:e=>{if("string"!=typeof e)return"";f(e)}})}),e.jsxs("div",{className:"panel-no-pad mt-8",children:[e.jsxs("div",{className:"w-full bg-gray-200 p-4 flex flex-row items-center justify-between",children:[e.jsx("p",{children:"Content"}),e.jsx(L,{expanded:G,setValue:K})]}),G&&e.jsx("div",{className:"p-4",children:e.jsx(ke,{activeContentTab:T,setActiveContentTab:I,content:_,HandleContentEditorChange:e=>{F(e)},HandleContentChange:e=>{const t=""===e.target.value.trim()?"":e.target.value;F(t)}})})]}),e.jsxs("div",{className:"panel-no-pad mt-8",children:[e.jsxs("div",{className:"w-full bg-gray-200 p-4 flex flex-row items-center justify-between",children:[e.jsx("p",{children:"Custom Fields"}),e.jsx(L,{expanded:Q,setValue:X})]}),Q&&e.jsx("div",{className:"p-4",children:e.jsx(De,{post:r,groups:J,fieldValues:q,setFieldValues:W})})]}),e.jsx(Ve,{post:r})]}),e.jsxs("div",{className:"w-full md:w-1/4 md:ml-4",children:[e.jsx(Pe,{updatePost:async()=>{if(200!=(await O(s,g,_,w,null==r?void 0:r.id)).status)return void y("Failed to update post.","error");y("Successfully updated post.","success");const e=Object.entries(q).map(([e,t])=>({group_id:e,fields:t}));await N(e,null==r?void 0:r.id,s)},post:r,setReloadPost:u,content:_,featuredImage:C,title:g,categories:m}),e.jsx(Fe,{featuredImage:C,setFeaturedImageId:S,reloadMedia:U,setReloadMedia:$}),e.jsx(Ee,{categories:m,categoriesSelectedIds:E,toggleCategoryCheckbox:e=>{B(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},postId:null==r?void 0:r.id,setReloadPost:u}),e.jsx(Re,{tags:x,tagsSelectedIds:A,toggleTagCheckbox:e=>{H(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},postId:null==r?void 0:r.id,setReloadPost:u})]})]})};export{de as C,Ne as a,Ze as b};

import{j as e,r as s}from"./vendor-react.js";import{A as t,s as a,C as l,am as i,n as r,an as n,ao as c,ap as o,aq as d,ar as u,H as h,as as x,at as m,au as p,av as g,aw as v,q as j,ax as b,ay as f,az as w,g as N,aA as S,aB as y,aC as C}from"./index.js";import{a as k,b as P,S as I}from"./admin-core.js";import{L as T,C as F,a as E,v as R,u as A}from"./vendor-other.js";import{d as _,e as D,A as M}from"./admin-components-customfields.js";import{u as O,d as B,e as U,D as V,f as z,S as Z,v as q,c as G,g as H,K as L,P as W}from"./vendor-dnd.js";const J=()=>e.jsx("div",{className:"title-panel",children:e.jsx("div",{className:"title-bar",children:e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"SEO Settings"})})})}),Y=()=>e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 576 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",children:e.jsx("path",{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"})}),$=({expanded:s,itemName:t})=>e.jsx(e.Fragment,{children:s.find(e=>e.name==t).expanded?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"seo-settings-sidebar-chevron w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}):e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"seo-settings-sidebar-chevron w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})})}),K=({expanded:s,updateExpanded:t,activeTab:a,setActiveTab:l})=>e.jsxs("div",{className:"seo-settings-sidebar",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"seo-settings-sidebar-block-header",onClick:()=>t("general",!s.find(e=>"general"==e.name).expanded),children:[e.jsx("div",{children:"General"}),e.jsx($,{expanded:s,itemName:"general"})]}),e.jsx("ul",{className:"seo-settings-sidebar-list "+(s.find(e=>"general"===e.name).expanded?"max-h-96":"max-h-0"),children:e.jsxs("li",{className:" seo-settings-sidebar-list-item",onClick:()=>l("site_basics"),children:["site_basics"==a&&e.jsx(Y,{}),e.jsx("p",{children:"Site Basics"})]})})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"seo-settings-sidebar-block-header-mid",onClick:()=>t("content",!s.find(e=>"content"==e.name).expanded),children:[e.jsx("div",{children:"Content Types"}),e.jsx($,{expanded:s,itemName:"content"})]}),e.jsxs("ul",{className:"seo-settings-sidebar-list "+(s.find(e=>"content"===e.name).expanded?"max-h-96":"max-h-0"),children:[e.jsxs("li",{className:"seo-settings-sidebar-list-item",onClick:()=>l("page"),children:["page"==a&&e.jsx(Y,{}),e.jsx("p",{children:"Page"})]}),e.jsxs("li",{className:"seo-settings-sidebar-list-item",onClick:()=>l("post"),children:["post"==a&&e.jsx(Y,{}),e.jsx("p",{children:"Post"})]})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:`seo-settings-sidebar-block-heaer-end ${s.find(e=>"social"==e.name).expanded?"":"rounded-b"} border-r border-gray-200 cursor-pointer`,onClick:()=>t("social",!s.find(e=>"social"==e.name).expanded),children:[e.jsx("div",{children:"Social"}),e.jsx($,{expanded:s,itemName:"social"})]}),e.jsx("ul",{className:"seo-settings-sidebar-list "+(s.find(e=>"social"===e.name).expanded?"max-h-96":"max-h-0"),children:e.jsxs("li",{className:`seo-settings-sidebar-list-item-last  ${s.find(e=>"social"==e.name).expanded?"rounded-b":""} flex flex-row items-center gap-2 text-gray-800 hover:text-blue-500 cursor-pointer`,onClick:()=>l("social_settings"),children:["social_settings"==a&&e.jsx(Y,{}),e.jsx("p",{children:"Social Settings"})]})})]})]}),Q=({websiteName:s,setWebsiteName:t,seperator:a,setSeperator:l,submitUpdate:i})=>e.jsxs("div",{children:[e.jsx("h2",{className:"seo-settings-header",children:"Site Basics"}),e.jsx("p",{className:"seo-settings-details",children:"Set the basic info for your website. You can use tagline and separator as replacement variables when configuring the search appearance of your content."}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"Website Name"}),e.jsx("input",{type:"text",name:"websiteName",placeholder:"WebsiteName",autoComplete:"WebsiteName",value:s,className:"input",required:!0,onChange:e=>{t(e.target.value)}})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"Seperator"}),e.jsx("input",{type:"text",name:"seperator",placeholder:"Seperator",autoComplete:"Seperator",value:a,className:"input",required:!0,onChange:e=>{l(e.target.value)}})]}),e.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:i,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})]}),X=({pageSEOTitle:s,setPageSEOTitle:t,pageDescription:a,setPageDescription:l,pageSocialImage:i,setPageSocialImage:r,pageSocialImageId:n,setPageSocialImageId:c,pageSocialTitle:o,setPageSocialTitle:d,pageSocialDescription:u,setPageSocialDescription:h,submitUpdate:x})=>{const m=[{name:"Title",value:"title"},{name:"Site Title",value:"siteTitle"},{name:"Seperator",value:"seperator"},{name:"Page",value:"page"}];return e.jsxs("div",{children:[e.jsx("h2",{className:"seo-settings-header",children:"Page"}),e.jsx("h3",{className:"seo-settings-sub-header",children:"Search appearance"}),e.jsx("p",{className:"seo-settings-details",children:"Determine what your posts should look like in the search results by default. You can always customize the settings for individual posts in the SEO metabox."}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"SEO Title"}),e.jsx(k,{value:s,setValue:t,variables:m})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{className:"block",children:"Description"}),e.jsx(P,{value:a,setValue:l,variables:m})]}),e.jsx("h3",{className:"seo-settings-sub-header",children:"Social media appearance"}),e.jsx("p",{className:"seo-settings-details",children:"Determine how your posts should look on social media by default. You can always customize the settings for individual posts in the SEO metabox."}),e.jsx("div",{className:"w-full mb-4",children:e.jsx(I,{socialImage:i,setSocialImage:r,setImageId:c})}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"Social Title"}),e.jsx(k,{value:o,setValue:d,variables:m})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{className:"block",children:"Social Description"}),e.jsx(P,{value:u,setValue:h,variables:m})]}),e.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:x,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})]})},ee=({postSEOTitle:s,setPostSEOTitle:t,postDescription:a,setPostDescription:l,postSocialImage:i,setPostSocialImage:r,postSocialImageId:n,setPostSocialImageId:c,postSocialTitle:o,setPostSocialTitle:d,postSocialDescription:u,setPostSocialDescription:h,submitUpdate:x})=>{const m=[{name:"Title",value:"title"},{name:"Site Title",value:"siteTitle"},{name:"Seperator",value:"seperator"},{name:"Post",value:"post"}];return e.jsxs("div",{children:[e.jsx("h2",{className:"seo-settings-header",children:"Post"}),e.jsx("h3",{className:"seo-settings-sub-header",children:"Search appearance"}),e.jsx("p",{className:"seo-settings-details",children:"Determine what your posts should look like in the search results by default. You can always customize the settings for individual posts in the SEO metabox."}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"SEO Title"}),e.jsx(k,{value:s,setValue:t,variables:m})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{className:"block",children:"Description"}),e.jsx(P,{value:a,setValue:l,variables:m})]}),e.jsx("h3",{className:"seo-settings-sub-header",children:"Social media appearance"}),e.jsx("p",{className:"seo-settings-details",children:"Determine how your posts should look on social media by default. You can always customize the settings for individual posts in the SEO metabox."}),e.jsx("div",{className:"w-full mb-4",children:e.jsx(I,{socialImage:i,setSocialImage:r,setImageId:c})}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"Social Title"}),e.jsx(k,{value:o,setValue:d,variables:m})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{className:"block",children:"Social Description"}),e.jsx(P,{value:u,setValue:h,variables:m})]}),e.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:x,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})]})},se=({defaultSocialImage:s,setDefaultSocialImage:t,defaultSocialImageId:a,setDefaultSocialImageId:l,submitUpdate:i})=>e.jsxs("div",{children:[e.jsx("h2",{className:"seo-settings-header",children:"Social"}),e.jsx("p",{className:"seo-settings-details",children:"Determine the default of how your posts should look on social media by default. You can always customize the settings for individual posts in the SEO metabox."}),e.jsx("div",{className:"w-full mb-4",children:e.jsx(I,{socialImage:s,setSocialImage:t,setImageId:l})}),e.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:i,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})]}),te=()=>{const{loginPassword:n}=s.useContext(t),[c,o]=s.useState([{name:"general",expanded:!0},{name:"content",expanded:!1},{name:"social",expanded:!1}]),[d,u]=s.useState("site_basics"),[h,x]=s.useState(""),[m,p]=s.useState(""),[g,v]=s.useState(""),[j,b]=s.useState(""),[f,w]=s.useState(""),[N,S]=s.useState(null),[y,C]=s.useState(""),[k,P]=s.useState(""),[I,T]=s.useState(""),[F,E]=s.useState(""),[R,A]=s.useState(""),[_,D]=s.useState(null),[M,O]=s.useState(""),[B,U]=s.useState(""),[V,z]=s.useState(""),[Z,q]=s.useState(null),G=async()=>{const e={websiteName:h,seperator:m,pageSEOTitle:g,pageDescription:j,pageSocialImage:f,pageSocialImageId:N,pageSocialTitle:y,pageSocialDescription:k,postSEOTitle:I,postDescription:F,postSocialImageId:_,postSocialTitle:M,postSocialDescription:B,defaultSocialImageId:Z},s=await i(n,e);200==s.status&&s.data.updateSiteSEOSettings.success?r("Updated site SEO settings successfully","success"):r("Failed to update site SEO settings","error")},H=async(e,s)=>{const t=await a(e);200==t.status&&("page"==s?w(t.data.getMediaFileById):"post"==s?A(t.data.getMediaFileById):z(t.data.getMediaFileById))};return s.useEffect(()=>{null!=N&&H(N,"page")},[N]),s.useEffect(()=>{null!=_&&H(_,"post")},[_]),s.useEffect(()=>{null!=Z&&H(Z,"default")},[Z]),s.useEffect(()=>{(async()=>{const e=await l();if(200==e.status){const s=JSON.parse(e.data.getSiteSEOSettings);x(s.websiteName),p(s.seperator),v(s.pageSEOTitle),b(s.pageDescription),S(s.pageSocialImageId),C(s.pageSocialTitle),P(s.pageSocialDescription),T(s.postSEOTitle),E(s.postDescription),D(s.postSocialImageId),O(s.postSocialTitle),U(s.postSocialDescription),q(s.defaultSocialImageId)}})()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(J,{}),e.jsxs("div",{className:"panel mt-8 mt-8 flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"w-full lg:w-1/6 min-w-[200px]",children:e.jsx(K,{expanded:c,updateExpanded:(e,s)=>{const t=c.map(t=>t.name===e?{...t,expanded:s}:t);o(t)},activeTab:d,setActiveTab:u})}),e.jsx("div",{className:"w-full lg:w-5/6",children:"site_basics"==d?e.jsx(Q,{websiteName:h,setWebsiteName:x,seperator:m,setSeperator:p,submitUpdate:G}):"page"==d?e.jsx(X,{pageSEOTitle:g,setPageSEOTitle:v,pageDescription:j,setPageDescription:b,pageSocialImage:f,setPageSocialImage:w,pageSocialImageId:N,setPageSocialImageId:S,pageSocialTitle:y,setPageSocialTitle:C,pageSocialDescription:k,setPageSocialDescription:P,submitUpdate:G}):"post"==d?e.jsx(ee,{postSEOTitle:I,setPostSEOTitle:T,postDescription:F,setPostDescription:E,postSocialImage:R,setPostSocialImage:A,postSocialImageId:_,setPostSocialImageId:D,postSocialTitle:M,setPostSocialTitle:O,postSocialDescription:B,setPostSocialDescription:U,submitUpdate:G}):e.jsx(se,{defaultSocialImage:V,setDefaultSocialImage:z,defaultSocialImageId:Z,setDefaultSocialImageId:q,submitUpdate:G})})]})]})})},ae=()=>e.jsx("div",{className:"title-panel",children:e.jsx("div",{className:"title-bar",children:e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"General Settings"})})})}),le=({name:s,title:t,value:a,updateFunction:l,text:i})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"w-full md:w-1/2 ",children:[e.jsx("label",{children:t}),e.jsx("input",{type:"text",name:s,placeholder:t,autoComplete:t,value:a,className:"input",required:!0,onChange:e=>{l(e.target.value)}})]}),i?e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:i}):""]}),ie=()=>{const{loginPassword:a}=s.useContext(t),[l,i]=s.useState(""),[o,d]=s.useState(""),[u,h]=s.useState(""),[x,m]=s.useState(""),p=async()=>{const e=await n(a);if(200==e.status){const s=e.data.getGeneralSettings;i(s.site_title),d(s.site_tagline??""),h(s.site_address),m(s.admin_email)}};return s.useEffect(()=>{p()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(ae,{}),e.jsxs("div",{className:"panel mt-8 mt-8",children:[e.jsx(le,{title:"Site Title",name:"site_title",value:l,updateFunction:i}),e.jsx(le,{title:"Site Tagline",name:"site_tagline",value:o,updateFunction:d}),e.jsx(le,{title:"Site Address",name:"site_address",value:u,updateFunction:h}),e.jsx(le,{title:"Administration Email Address",name:"admin_email",value:x,updateFunction:m,text:"This address is used for admin purposes. If you change this, an email will be sent to your new address to confirm it. The new address will not become active until confirmed."}),e.jsx("div",{className:"flex flex-row justify-end",children:e.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:async()=>{const e=await c(a,l,u,x,o);200==e.status&&e.data.updateGeneralSettings.success?(p(),r("Successfully updated settings.","success")):r("Failed to update settings.","error")},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})})]})]})})},re=()=>e.jsx("div",{className:"title-panel",children:e.jsx("div",{className:"title-bar",children:e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"Reading Settings"})})})}),ne=({name:s,title:t,value:a,updateFunction:l,text:i})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"w-auto",children:[e.jsx("label",{children:t}),e.jsx("input",{type:"number",name:s,placeholder:t,autoComplete:t,value:a,min:0,className:"input",required:!0,onChange:e=>{l(e.target.value)}})]}),i?e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:i}):""]}),ce=()=>{const{loginPassword:a}=s.useContext(t),[l,i]=s.useState(0),[n,c]=s.useState(!1),u=async()=>{const e=await o(a);200==e.status&&(i(e.data.getReadingSettings.show_at_most),c(e.data.getReadingSettings.search_engine_visibility))};return s.useEffect(()=>{u()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(re,{}),e.jsxs("div",{className:"panel mt-8 mt-8",children:[e.jsx(ne,{name:"show_at_most",title:"Blog pages show at most",value:l,updateFunction:i}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{id:"default-checkbox",type:"checkbox",checked:n,onChange:e=>c(e.target.checked),className:"checkbox mt-1"}),e.jsxs("div",{className:"ml-2",children:[e.jsx("label",{htmlFor:"default-checkbox",className:"text-sm text-gray-700",children:"Discourage search engines from indexing this site"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"It is up to search engines to honour this request."})]})]}),e.jsx("div",{className:"flex flex-row justify-end mt-8",children:e.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:async()=>{const e=await d(a,l,n);200==e.status&&e.data.updateReadingSettings.success?(u(),r("Successfully updated reading settings.","success")):r("Failed to update reading settings.","error")},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})})]})]})})},oe=()=>e.jsx("div",{className:"title-panel",children:e.jsx("div",{className:"title-bar",children:e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"Writing Settings"})})})}),de=()=>{const{loginPassword:a}=s.useContext(t),[l,i]=s.useState(""),[n,c]=s.useState([]),o=async()=>{const e=await u(a);200==e.status&&(null==e.data.getWritingSettings.default_post_category?i(""):i(e.data.getWritingSettings.default_post_category));const s=await h(a,"category");200==s.status&&c(s.data.getCategories.categories)};return s.useEffect(()=>{o()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(oe,{}),e.jsxs("div",{className:"panel mt-8 mt-8",children:[e.jsx("label",{className:"block",children:"Default Post Category"}),e.jsxs("select",{id:"defaultPostCategory",className:"select",value:l,onChange:e=>i(e.target.value),children:[e.jsx("option",{value:"",children:"Uncategorised"}),n.map((s,t)=>e.jsx("option",{value:s.term_id,children:s.name},t))]}),e.jsx("div",{className:"flex flex-row justify-end mt-8",children:e.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:async()=>{const e=await x(a,l);200==e.status&&e.data.updateWritingSettings.success?(o(),r("Successfully updated writing settings.","success")):r("Failed to update writing settings.","error")},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})})]})]})})},ue=()=>e.jsx("div",{className:"title-panel",children:e.jsx("div",{className:"title-bar",children:e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"Email Settings"})})})}),he=({name:s,title:t,value:a,updateFunction:l,text:i})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"w-full md:w-1/2 ",children:[e.jsx("label",{children:t}),e.jsx("input",{type:"text",name:s,placeholder:t,autoComplete:t,value:a,className:"input",required:!0,onChange:e=>{l(e.target.value)}})]}),i?e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:i}):""]}),xe=({name:s,title:t,value:a,updateFunction:l,text:i})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"w-full md:w-1/2 ",children:[e.jsx("label",{children:t}),e.jsx("input",{type:"number",name:s,placeholder:t,autoComplete:t,value:a,min:0,className:"input",required:!0,onChange:e=>{l(e.target.value)}})]}),i?e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:i}):""]}),me=()=>{const{loginPassword:a}=s.useContext(t),[l,i]=s.useState([]),[n,c]=s.useState(""),[o,d]=s.useState(""),[u,h]=s.useState("login"),[x,v]=s.useState(""),[j,b]=s.useState(587),[f,w]=s.useState(!1),[N,S]=s.useState(""),y=async()=>{const e=await m(a);if(200==e.status){const s=JSON.parse(e.data.getEmailSettings.data);i(s),c(s.SMTP_USERNAME),d(s.SMTP_PASSWORD),h(s.SMTP_AUTHTYPE),v(s.SMTP_HOST),b(s.SMTP_PORT),w(s.SMTP_SECURE)}};return s.useEffect(()=>{y()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(ue,{}),e.jsxs("div",{className:"panel mt-8 mt-8",children:[e.jsx(he,{name:"smtp_username",title:"SMTP Username",value:n,updateFunction:c}),e.jsx(he,{name:"smtp_password",title:"SMTP Password",value:o,updateFunction:d}),e.jsx("label",{className:"block",children:"SMTP Authtype"}),e.jsxs("select",{id:"smtp_authtype",className:"select mb-4",value:u,onChange:e=>h(e.target.value),children:[e.jsx("option",{value:"",children:"Please select an option..."}),e.jsx("option",{value:"plain",children:"Plain"}),e.jsx("option",{value:"login",children:"Login"}),e.jsx("option",{value:"cram-md5",children:"Cram md5"})]}),e.jsx(he,{name:"smtp_host",title:"SMTP Host",value:x,updateFunction:v}),e.jsx(xe,{name:"smtp_port",title:"SMTP Port",value:j,updateFunction:b}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{id:"default-checkbox",type:"checkbox",checked:f,onChange:e=>w(e.target.checked),className:"checkbox mt-1"}),e.jsx("div",{className:"ml-2",children:e.jsx("label",{htmlFor:"default-checkbox",className:"text-sm text-gray-700",children:"SMTP Secure"})})]}),e.jsx("div",{className:"flex flex-row justify-end mt-8",children:e.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:async()=>{const e={SMTP_USERNAME:n,SMTP_PASSWORD:o,SMTP_AUTHTYPE:u,SMTP_HOST:x,SMTP_PORT:j,SMTP_SECURE:f},s=await p(a,e);200==s.status&&s.data.updateEmailSettings.success?(y(),r("Successfully updated email settings.","success")):r("Failed to update email settings.","error")},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})}),e.jsx("hr",{className:"my-4"}),e.jsx("h2",{className:"text-xl",children:"Test Email"}),e.jsx(he,{name:"to",title:"To Email",value:N,updateFunction:S}),e.jsx("div",{className:"flex flex-row justify-end mt-8",children:e.jsxs("button",{type:"button",className:"text-white bg-gray-500 hover:bg-gray-800 btn",onClick:async()=>{if(""!=N){200==(await g(a,N)).status&&(S(""),r("We cannot guarantee that it will send but have received no errors, please check your emails.","success"))}},children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:[e.jsx("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),e.jsx("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"})]}),"Send Test"]})})]})]})})},pe=()=>e.jsx("div",{className:"title-panel",children:e.jsxs("div",{className:"title-bar",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"Custom Field Groups"})}),e.jsxs(T,{to:"/admin/settings/custom_fields/groups/new",className:"text-white bg-blue-700 hover:bg-blue-800 btn",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Add New Group"]})]})}),ge=({groups:s,selectedIds:t,toggleCheckbox:a,restoreGroup:l,binGroup:i,allSelected:r,toggleAllCheckboxes:n})=>e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:e.jsx("input",{type:"checkbox",checked:r,onChange:n,className:"chexkbox mt-1"})}),e.jsx("th",{scope:"col",children:"Title"}),e.jsx("th",{scope:"col",children:"Description"}),e.jsx("th",{scope:"col",children:"Key"}),e.jsx("th",{scope:"col",children:"Location"}),e.jsx("th",{scope:"col",children:"Fields"})]})}),e.jsx("tbody",{children:s.map((s,r)=>e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"table-checkbox-cell",children:e.jsx("input",{id:"default-checkbox",type:"checkbox",value:s.id,checked:t.includes(s.id),onChange:()=>a(s.id),className:"checkbox"})}),e.jsxs("td",{className:"flex flex-col",children:[e.jsx("div",{className:"flex-center",children:e.jsx(T,{to:`/admin/settings/custom_fields/group/${s.id}`,className:"link-bold",children:s.name})}),e.jsx("div",{className:"flex-center-4",children:"trash"==s.status?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx("button",{className:"link-blue-xs",onClick:()=>l(s.id),children:"Restore"})}),e.jsx("p",{children:e.jsx("button",{className:"link-red-xs",children:"Permanently Delete"})})]}):e.jsx(e.Fragment,{children:e.jsx("p",{children:e.jsx("button",{className:"link-red-xs",onClick:()=>{i(s.id)},children:"Bin"})})})})]}),e.jsx("td",{children:s.description?s.description:"-"}),e.jsx("td",{children:`group_${s.id}`}),e.jsx("td",{children:s.rules[0].target.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}),e.jsx("td",{children:s.fields.length})]},r))})]}),ve=({groups:s,setGroups:t,selectedIds:a,setSelectedIds:l,toggleCheckbox:i,restoreGroup:r,binGroup:n,allSelected:c,toggleAllCheckboxes:o})=>e.jsx("div",{children:e.jsx(ge,{groups:s,selectedIds:a,toggleCheckbox:i,restoreGroup:r,binGroup:n,allSelected:c,toggleAllCheckboxes:o})}),je=({setFilter:s,totalGroups:t,filter:a,groups:l})=>e.jsxs("div",{className:"filter-panel",children:[e.jsxs("button",{type:"button",onClick:()=>s("all"),className:"text-sm "+("all"==a?"text-black font-bold":"text-blue-800"),children:["All ",e.jsxs("span",{className:"font-normal",children:["(",t,")"]})]}),l.filter(e=>"trash"==e.status).length>0&&e.jsxs("button",{type:"button",onClick:()=>s("trash"),className:"text-sm "+("trash"==a?"text-black font-bold":"text-red-800"),children:["Trash"," ",e.jsxs("span",{className:"font-normal",children:["(",l.filter(e=>"trash"==e.status).length,")"]})]})]}),be=({bulkAction:s,setBulkAction:t,handleApply:a,filter:l})=>e.jsxs("div",{className:"flex flex-row items-center my-4",children:[e.jsxs("select",{id:"actionsDropdown",className:"select",value:s,onChange:e=>t(e.target.value),children:[e.jsx("option",{value:"",children:"Bulk Actions"}),"trash"!=l?e.jsx("option",{value:"trash",children:"Trash Items"}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"delete",children:"Delete Permanently"}),e.jsx("option",{value:"restore",children:"Restore"})]})]}),e.jsxs("button",{type:"button",className:"ml-4 text-white bg-blue-700 hover:bg-blue-800 btn",onClick:a,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"})}),"Apply"]})]}),fe=()=>{const{loginPassword:a}=s.useContext(t),[l,i]=s.useState([]),[n,c]=s.useState([]),[o,d]=s.useState(0),[u,h]=s.useState(!1),[x,m]=s.useState("all"),[p,g]=s.useState(""),[f,w]=s.useState([]),N=l.length>0&&f.length===l.length,S=async()=>{const e=await v(a);if(200===e.status)try{let s=JSON.parse(e.data.getCustomFieldGroups),t=[];"all"==x?t=s.filter(e=>"trash"!=e.status):"trash"==x&&(t=s.filter(e=>"trash"==e.status)),i(t),c(s),d(s.filter(e=>"trash"!=e.status).length)}catch(s){return await j(s.stack||String(s)),void r("Error parsing groups.","error")}else r("Error saving group.","error")};return s.useEffect(()=>{S()},[x]),s.useEffect(()=>{u&&(h(!1),S())},[u]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(pe,{}),e.jsx(je,{groups:n,totalGroups:o,filter:x,setFilter:m}),e.jsx(be,{bulkAction:p,setBulkAction:g,handleApply:async()=>{if("trash"===p&&f.length>0){(await Promise.all(f.map(async e=>{var s,t;const l=await b(a,"trash",e);return 200===l.status&&(null==(t=null==(s=l.data)?void 0:s.updateCustomFieldGroupsStatus)?void 0:t.success)}))).some(e=>e)&&(h(!0),w([]))}else if("restore"===p&&f.length>0){(await Promise.all(f.map(async e=>{var s,t;const l=await b(a,"active",e);return 200===l.status&&(null==(t=null==(s=l.data)?void 0:s.updateCustomFieldGroupsStatus)?void 0:t.success)}))).some(e=>e)&&(h(!0),w([]))}},filter:x}),e.jsx("div",{className:"panel mt-8",children:e.jsx(ve,{groups:l,setGroups:i,selectedIds:f,setSelectedIds:w,toggleCheckbox:e=>{w(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},restoreGroup:async e=>{const s=await b(a,"active",e);200==s.status&&s.data.updateCustomFieldGroupsStatus.success&&h(!0)},binGroup:async e=>{const s=await b(a,"trash",e);200==s.status&&s.data.updateCustomFieldGroupsStatus.success&&h(!0)},allSelected:N,toggleAllCheckboxes:()=>{f.length===l.length?w([]):w(l.map(e=>e.id))}})})]})})},we=({name:s,setName:t,triggerSave:a})=>e.jsx("div",{className:"title-panel",children:e.jsxs("div",{className:"title-bar",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("h2",{className:"text-3xl",children:"Add New Field Group"}),e.jsx("div",{className:"ml-4",children:e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:s,onChange:e=>t(e.target.value),className:"input"})})]}),e.jsxs("button",{className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:()=>a(),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Save Changes"]})]})}),Ne=({field:t,fields:a,setFields:l,idx:i,expandedIndex:r,toggleRow:n,updateFieldType:c})=>{const[o,d]=s.useState(t),[u,h]=s.useState(!1),{attributes:x,listeners:m,setNodeRef:p,transform:g,transition:v,isDragging:j}=O({id:t.order}),b={transform:g?F.Transform.toString(g):void 0,transition:v,...j?{zIndex:9999,backgroundColor:"rgba(0, 0, 255, 0.1)"}:{}};return s.useEffect(()=>{u&&(h(!1),l(e=>e.map(e=>e.id===o.id?o:e)),n(i))},[u]),e.jsx(e.Fragment,{children:e.jsxs("tbody",{ref:p,style:b,...x,className:"cursor-default",id:t.order,children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"flex items-center gap-2",children:[e.jsx("span",{...m,className:"cursor-grab",children:e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 320 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",children:e.jsx("path",{d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"})})}),i+1,r===i?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"custom-fields-chevron w-4 h-4",onClick:()=>n(i),children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}):e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"custom-fields-chevron w-4 h-4",onClick:()=>n(i),children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),e.jsx("td",{className:"text-blue-500",children:t.label}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.type})]}),e.jsx("tr",{className:r===i?"":"hidden",children:e.jsxs("td",{colSpan:"4",className:"border-l-4 border-l-blue-400 px-4 pt-4",children:[e.jsx("p",{children:"Type"}),e.jsx(_,{type:t.type,setType:c,field:t,isUpdate:!0}),t.type&&e.jsx(D,{type:t.type,fieldData:t,setFieldData:d,setUpdateFields:h})]})})]})})},Se=({fields:t,setFields:a,expandedIndex:l,toggleRow:i,updateFieldType:r})=>{const[n,c]=s.useState(null),o=B(U(W),U(L));return e.jsxs(V,{sensors:o,collisionDetection:z,onDragStart:e=>{c(e.active.order)},onDragEnd:e=>{c(null);const{active:s,over:l}=e;if(s.id!==(null==l?void 0:l.id)){const e=t.findIndex(e=>e.order===s.id),i=t.findIndex(e=>e.order===l.id);a(H(t,e,i))}},onDragCancel:()=>{c(null)},children:[e.jsx(Z,{items:t.map(e=>e.order),strategy:q,children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-[10%]",children:"#"}),e.jsx("th",{className:"w-[30%]",children:"Label"}),e.jsx("th",{className:"w-[30%]",children:"Name"}),e.jsx("th",{className:"w-[30%]",children:"Type"})]})}),t.map((s,n)=>{const c=s.name&&""!==s.name?s.name:`field-${n}`;return e.jsx(Ne,{id:c,field:s,fields:t,setFields:a,idx:n,expandedIndex:l,toggleRow:i,updateFieldType:r},c)})]})}),e.jsx(G,{})]})},ye=({fields:t,setFields:a})=>{const[l,i]=s.useState(!1),[r,n]=s.useState(null);return e.jsxs("div",{children:[e.jsx("div",{className:"flex flex-row justify-end items-center mb-4",children:e.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>i(!0),children:"Add Field"})}),e.jsx(Se,{fields:t,setFields:a,expandedIndex:r,toggleRow:e=>{n(r===e?null:e)},updateFieldType:(e,s)=>{const l=[...t],i=l.findIndex(s=>s.id===e);-1!==i&&(l[i]={...l[i],type:s},a(l))}}),e.jsx(M,{sliderAddOpen:l,setSliderAddOpen:i,HandleClose:()=>{},fields:t,setFields:a})]})},Ce=({fields:s,setFields:t})=>e.jsx("div",{className:"panel mt-8",children:e.jsx(ye,{fields:s,setFields:t})}),ke=({value:t,setValue:a,groupedOptions:l})=>{var i;const[r,n]=s.useState(!1),c=(null==(i=l.flatMap(e=>e.options).find(e=>e.value===t))?void 0:i.label)||"Please select...";return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("button",{type:"button",className:"w-full text-left bg-white border border-gray-300 px-4 py-2 rounded shadow flex justify-between items-center",onClick:()=>n(!r),children:[e.jsx("span",{children:c}),e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),r&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded shadow max-h-64 overflow-y-auto",children:l.map((s,t)=>e.jsxs("div",{className:"px-2 py-1",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase py-1 px-2",children:s.label}),s.options.map(s=>e.jsx("button",{className:"w-full text-left px-4 py-2 hover:bg-blue-50 text-sm flex flex-row items-center",onClick:()=>{a(s.value),n(!1)},children:s.label},s.value))]},t))})]})},Pe=[{name:"post_type",list:[{label:"Post Type",options:[{label:"Post",value:"post"},{label:"Page",value:"page"}]}]},{name:"post_status",list:[{label:"Post Status",options:[{label:"Published",value:"published"},{label:"Scheduled",value:"scheduled"},{label:"Draft",value:"draft"},{label:"Pending",value:"pending"},{label:"Private",value:"private"},{label:"Bin",value:"bin"}]}]},{name:"current_user",list:[{label:"Current User",options:[{label:"Logged In",value:"logged in"}]}]},{name:"current_user_role",list:[{label:"Current User Role",options:[{label:"Administrator",value:"administrator"},{label:"Editor",value:"editor"},{label:"Author",value:"author"},{label:"Subscriber",value:"subscriber"}]}]}],Ie=[{label:"Post",options:[{label:"Post Type",value:"post_type"},{label:"Post Status",value:"post_status"}]},{label:"User",options:[{label:"Current User",value:"current_user"},{label:"Current User Role",value:"current_user_role"}]}],Te=[{label:"Equal",options:[{label:"is equal to",value:"is_equal"},{label:"is not equal to",value:"is_not_equal"}]}],Fe=({rules:t,setRules:a,active:l,setActive:i})=>{const[r,n]=s.useState("location"),c=(e,s,t)=>{a(a=>a.map((a,l)=>l===e?{...a,[s]:t}:a))};return e.jsxs("div",{className:"relative shadow-md sm:rounded-lg bg-white w-full mt-4 p-4",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsx("h2",{className:"text-3xl",children:"Settings"})}),e.jsx("div",{className:"flex flex-row justify-between items-center",children:e.jsxs("div",{className:"flex justify-end border-b border-gray-200",children:[e.jsx("button",{className:"px-4 py-2 "+("location"===r?"custom-fields-settings-active-tab":"custom-fields-settings-inactive-tab"),onClick:()=>n("location"),children:"Location"}),e.jsx("button",{className:"px-4 py-2 "+("settings"===r?"custom-fields-settings-active-tab":"custom-fields-settings-inactive-tab"),onClick:()=>n("settings"),children:"Group Settings"})]})}),e.jsxs("div",{className:"mt-4",children:["location"===r&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:"Rules"}),e.jsx("p",{className:"font-bold",children:"Show this field group if"}),t.map((s,t)=>e.jsxs("div",{className:"flex flex-row items-center gap-4 mb-4",children:[e.jsxs("div",{className:"w-2/5 flex flex-row items-center gap-4",children:[t>0&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-red-700 hover:text-red-500 cursor-pointer",onClick:()=>(e=>{a(s=>s.filter((s,t)=>t!==e))})(t),children:e.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"})}),e.jsx(ke,{value:s.field,setValue:e=>c(t,"field",e),groupedOptions:Ie})]}),e.jsx("div",{className:"w-1/5",children:e.jsx(ke,{value:s.equal,setValue:e=>c(t,"equal",e),groupedOptions:Te})}),e.jsx("div",{className:"w-2/5",children:e.jsx(ke,{value:s.target,setValue:e=>c(t,"target",e),groupedOptions:Pe.find(e=>e.name==s.field).list})})]},t)),e.jsx("button",{onClick:()=>{a(e=>[...e,{field:"post_type",equal:"is_equal",target:"post"}])},className:"text-sm text-blue-500 hover:text-blue-700",children:"Add rule group"})]}),"settings"===r&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:l,onChange:e=>i(e.target.checked)}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer \n        peer-checked:after:translate-x-full \n        peer-checked:after:border-white \n        after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border \n        after:rounded-full after:h-5 after:w-5 after:transition-all \n        peer-checked:bg-blue-600"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-900 block",children:"Active"})})]})})})]})]})},Ee=()=>{const{loginPassword:a}=s.useContext(t),l=E(),[i,n]=s.useState(""),[c,o]=s.useState([{field:"post_type",equal:"is_equal",target:"post"}]),[d,u]=s.useState(!0),[h,x]=s.useState([{id:R(),order:1,type:"text",label:"no-label",name:"",defaultValue:""}]);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(we,{name:i,setName:n,triggerSave:async()=>{if(""===i)return void r("Field group 'Name' required.","error");const e={id:R(),name:i,active:d,rules:c,fields:h},s=await v(a);if(200!==s.status)return void r("Error saving group.","error");let t=[];try{t=JSON.parse(s.data.getCustomFieldGroups),Array.isArray(t)||(t=[])}catch(n){return await j(n.stack||String(n)),void r("Error parsing groups.","error")}t.push(e);200===(await f(t,a)).status?(r("Success saving group.","success"),l("/admin/settings/custom_fields")):r("Error saving group.","error")}}),e.jsx(Ce,{fields:h,setFields:x}),e.jsx(Fe,{rules:c,setRules:o,active:d,setActive:u})]})})},Re=({name:s,setName:t,triggerSave:a})=>e.jsx("div",{className:"title-panel",children:e.jsxs("div",{className:"title-bar",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("h2",{className:"text-3xl",children:"Edit Field Group"}),e.jsx("div",{className:"ml-4",children:e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:s,onChange:e=>t(e.target.value),className:"w-full p-2 border rounded"})})]}),e.jsxs("button",{className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:()=>a(),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Save Changes"]})]})}),Ae=({field:t,fields:a,setFields:l,idx:i,expandedIndex:r,toggleRow:n,updateFieldType:c})=>{const[o,d]=s.useState(t),[u,h]=s.useState(!1),{attributes:x,listeners:m,setNodeRef:p,transform:g,transition:v,isDragging:j}=O({id:t.order}),b={transform:g?F.Transform.toString(g):void 0,transition:v,...j?{zIndex:9999,backgroundColor:"rgba(0, 0, 255, 0.1)"}:{}};return s.useEffect(()=>{u&&(h(!1),l(e=>e.map(e=>e.id===o.id?o:e)),n(i))},[u]),e.jsx(e.Fragment,{children:e.jsxs("tbody",{ref:p,style:b,...x,className:"cursor-default",id:t.order,children:[e.jsxs("tr",{children:[e.jsxs("td",{className:"flex items-center gap-2 py-2 px-4",children:[e.jsx("span",{...m,className:"cursor-grab",children:e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 320 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",children:e.jsx("path",{d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"})})}),i+1,r===i?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"ml-2 text-gray-500 cursor-pointer w-4 h-4",onClick:()=>n(i),children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}):e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"ml-2 text-gray-500 cursor-pointer w-4 h-4",onClick:()=>n(i),children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),e.jsx("td",{className:"text-blue-500 py-2 px-4",children:t.label}),e.jsx("td",{className:"py-2 px-4",children:t.name}),e.jsx("td",{className:"py-2 px-4",children:t.type})]}),e.jsx("tr",{className:r===i?"":"hidden",children:e.jsxs("td",{colSpan:"4",className:"border-l-4 border-l-blue-500 px-4 pt-4",children:[e.jsx("p",{children:"Type"}),e.jsx(_,{type:t.type,setType:c}),t.type&&e.jsx(D,{type:t.type,fieldData:t,setFieldData:d,setUpdateFields:h})]})})]})})},_e=({fields:t,setFields:a,expandedIndex:l,toggleRow:i,updateFieldType:r})=>{const[n,c]=s.useState(null),o=B(U(W),U(L));return e.jsxs(V,{sensors:o,collisionDetection:z,onDragStart:e=>{c(e.active.order)},onDragEnd:e=>{c(null);const{active:s,over:l}=e;if(s.id!==(null==l?void 0:l.id)){const e=t.findIndex(e=>e.order===s.id),i=t.findIndex(e=>e.order===l.id);a(H(t,e,i))}},onDragCancel:()=>{c(null)},children:[e.jsx(Z,{items:t.map(e=>e.order),strategy:q,children:e.jsxs("table",{className:"w-full table-auto text-sm text-left rtl:text-right text-gray-500 mt-4",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 w-[10%]",children:"#"}),e.jsx("th",{className:"py-2 px-4 w-[30%]",children:"Label"}),e.jsx("th",{className:"py-2 px-4 w-[30%]",children:"Name"}),e.jsx("th",{className:"py-2 px-4 w-[30%]",children:"Type"})]})}),t.map((s,n)=>e.jsx(Ae,{id:s.id,field:s,fields:t,setFields:a,idx:n,expandedIndex:l,toggleRow:i,updateFieldType:r},s.id))]})}),e.jsx(G,{})]})},De=({fields:t,setFields:a})=>{const[l,i]=s.useState(!1),[r,n]=s.useState(null);return e.jsxs("div",{children:[e.jsx("div",{className:"flex flex-row justify-end items-center",children:e.jsx("button",{type:"button",className:"secondary-btn",onClick:()=>i(!0),children:"Add Field"})}),e.jsx(_e,{fields:t,setFields:a,expandedIndex:r,toggleRow:e=>{n(r===e?null:e)},updateFieldType:()=>{}}),e.jsx(M,{sliderAddOpen:l,setSliderAddOpen:i,HandleClose:()=>{},fields:t,setFields:a})]})},Me=({fields:s,setFields:t})=>e.jsx("div",{className:"panel mt-8 p-4",children:e.jsx(De,{fields:s,setFields:t})}),Oe=({value:t,setValue:a,groupedOptions:l})=>{var i;const[r,n]=s.useState(!1),c=(null==(i=l.flatMap(e=>e.options).find(e=>e.value===t))?void 0:i.label)||"Please select...";return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("button",{type:"button",className:"w-full text-left bg-white border border-gray-300 px-4 py-2 rounded shadow flex justify-between items-center",onClick:()=>n(!r),children:[e.jsx("span",{children:c}),e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 20 20","aria-hidden":"true",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),r&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded shadow max-h-64 overflow-y-auto",children:l.map((s,t)=>e.jsxs("div",{className:"px-2 py-1",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase py-1 px-2",children:s.label}),s.options.map(s=>e.jsx("button",{className:"w-full text-left px-4 py-2 hover:bg-blue-50 text-sm flex flex-row items-center",onClick:()=>{a(s.value),n(!1)},children:s.label},s.value))]},t))})]})},Be=[{name:"post_type",list:[{label:"Post Type",options:[{label:"Post",value:"post"},{label:"Page",value:"page"}]}]},{name:"post_status",list:[{label:"Post Status",options:[{label:"Published",value:"published"},{label:"Scheduled",value:"scheduled"},{label:"Draft",value:"draft"},{label:"Pending",value:"pending"},{label:"Private",value:"private"},{label:"Bin",value:"bin"}]}]},{name:"current_user",list:[{label:"Current User",options:[{label:"Logged In",value:"logged in"}]}]},{name:"current_user_role",list:[{label:"Current User Role",options:[{label:"Administrator",value:"administrator"},{label:"Editor",value:"editor"},{label:"Author",value:"author"},{label:"Subscriber",value:"subscriber"}]}]}],Ue=[{label:"Post",options:[{label:"Post Type",value:"post_type"},{label:"Post Status",value:"post_status"}]},{label:"User",options:[{label:"Current User",value:"current_user"},{label:"Current User Role",value:"current_user_role"}]}],Ve=[{label:"Equal",options:[{label:"is equal to",value:"is_equal"},{label:"is not equal to",value:"is_not_equal"}]}],ze=({rules:t,setRules:a,active:l,setActive:i})=>{const[r,n]=s.useState("location"),c=(e,s,t)=>{a(a=>a.map((a,l)=>l===e?{...a,[s]:t}:a))};return e.jsxs("div",{className:"relative shadow-md sm:rounded-lg bg-white w-full mt-4 p-4",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsx("h2",{className:"text-3xl",children:"Settings"})}),e.jsx("div",{className:"flex flex-row justify-between items-center",children:e.jsxs("div",{className:"flex justify-end border-b border-gray-200",children:[e.jsx("button",{className:"px-4 py-2 "+("location"===r?"border-b-4 border-blue-500 text-blue-500":"text-gray-800 font-medium"),onClick:()=>n("location"),children:"Location"}),e.jsx("button",{className:"px-4 py-2 "+("settings"===r?"border-b-4 border-blue-500 text-blue-500":"text-gray-800 font-medium"),onClick:()=>n("settings"),children:"Group Settings"})]})}),e.jsxs("div",{className:"mt-4",children:["location"===r&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:"Rules"}),e.jsx("p",{className:"font-bold",children:"Show this field group if"}),t.map((s,t)=>e.jsxs("div",{className:"flex flex-row items-center gap-4 mb-4",children:[e.jsxs("div",{className:"w-2/5 flex flex-row items-center gap-4",children:[t>0&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-red-700 hover:text-red-500 cursor-pointer",onClick:()=>(e=>{a(s=>s.filter((s,t)=>t!==e))})(t),children:e.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"})}),e.jsx(Oe,{value:s.field,setValue:e=>c(t,"field",e),groupedOptions:Ue})]}),e.jsx("div",{className:"w-1/5",children:e.jsx(Oe,{value:s.equal,setValue:e=>c(t,"equal",e),groupedOptions:Ve})}),e.jsx("div",{className:"w-2/5",children:e.jsx(Oe,{value:s.target,setValue:e=>c(t,"target",e),groupedOptions:Be.find(e=>e.name==s.field).list})})]},t)),e.jsx("button",{onClick:()=>{a(e=>[...e,{field:"post_type",equal:"is_equal",target:"post"}])},className:"text-sm text-blue-500 hover:text-blue-700",children:"Add rule group"})]}),"settings"===r&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:l,onChange:e=>i(e.target.checked)}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer \n        peer-checked:after:translate-x-full \n        peer-checked:after:border-white \n        after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border \n        after:rounded-full after:h-5 after:w-5 after:transition-all \n        peer-checked:bg-blue-600"}),e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-900 block",children:"Active"})})]})})})]})]})},Ze=()=>{const{loginPassword:a}=s.useContext(t),{id:l}=A(),i=E(),[n,c]=s.useState(""),[o,d]=s.useState([]),[u,h]=s.useState(!0),[x,m]=s.useState([]);return s.useEffect(()=>{(async()=>{const e=await w(l,a);if(200==e.status){const s=JSON.parse(e.data.getCustomFieldGroupById);c(s.name),d(s.rules),m(s.fields),h(s.active)}})()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(Re,{name:n,setName:c,triggerSave:async()=>{if(""===n)return void r("Field group 'Name' required.","error");const e=await v(a);if(200!==e.status)return void r("Error saving group.","error");let s=[];try{s=JSON.parse(e.data.getCustomFieldGroups),Array.isArray(s)||(s=[])}catch(d){return await j(d.stack||String(d)),void r("Error parsing groups.","error")}const t=s.findIndex(e=>e.id===l),c={id:l,name:n,active:u,rules:o,fields:x};-1!==t?s[t]=c:s.push(c);200===(await f(s,a)).status?(r("Success saving group.","success"),i("/admin/settings/custom_fields")):r("Error saving group.","error")}}),e.jsx(Me,{fields:x,setFields:m}),e.jsx(ze,{rules:o,setRules:d,active:u,setActive:h})]})})},qe=()=>e.jsx("div",{className:"title-panel",children:e.jsxs("div",{className:"title-bar",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"Custom Posts"})}),e.jsxs(T,{to:"/admin/settings/custom_posts/new",className:"text-white bg-blue-700 hover:bg-blue-800 btn",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Add New Post"]})]})}),Ge=({setFilter:s,totalPosts:t,filter:a,posts:l})=>e.jsxs("div",{className:"filter-panel",children:[e.jsxs("button",{type:"button",onClick:()=>s("all"),className:"text-sm "+("all"==a?"text-black font-bold":"text-blue-800"),children:["All ",e.jsxs("span",{className:"font-normal",children:["(",t,")"]})]}),l.filter(e=>"trash"==e.status).length>0&&e.jsxs("button",{type:"button",onClick:()=>s("trash"),className:"text-sm "+("trash"==a?"text-black font-bold":"text-red-800"),children:["Trash"," ",e.jsxs("span",{className:"font-normal",children:["(",l.filter(e=>"trash"==e.status).length,")"]})]})]}),He=({bulkAction:s,setBulkAction:t,handleApply:a,filter:l})=>e.jsxs("div",{className:"flex flex-row items-center my-4",children:[e.jsxs("select",{id:"actionsDropdown",className:"select",value:s,onChange:e=>t(e.target.value),children:[e.jsx("option",{value:"",children:"Bulk Actions"}),"trash"!=l?e.jsx("option",{value:"trash",children:"Trash Items"}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"delete",children:"Delete Permanently"}),e.jsx("option",{value:"restore",children:"Restore"})]})]}),e.jsxs("button",{type:"button",className:"ml-4 text-white bg-blue-700 hover:bg-blue-800 btn",onClick:a,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"})}),"Apply"]})]}),Le=({posts:s,selectedIds:t,toggleCheckbox:a,restorePost:l,binPost:i,permanentlyDeletePost:r,allSelected:n,toggleAllCheckboxes:c})=>e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:e.jsx("input",{type:"checkbox",checked:n,onChange:c,className:"chexkbox mt-1"})}),e.jsx("th",{scope:"col",children:"Title"}),e.jsx("th",{scope:"col",children:"Database Slug"}),e.jsx("th",{scope:"col",children:"Description"})]})}),e.jsx("tbody",{children:s.map((s,n)=>{return e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"table-checkbox-cell",children:e.jsx("input",{id:"default-checkbox",type:"checkbox",value:s.id,checked:t.includes(s.id),onChange:()=>a(s.id),className:"checkbox"})}),e.jsxs("td",{className:"flex flex-col",children:[e.jsx("div",{className:"flex-center",children:e.jsx(T,{to:`/admin/settings/custom_posts/post/${s.id}`,className:"link-bold",children:s.name})}),e.jsx("div",{className:"flex-center-4",children:"trash"==s.status?e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx("button",{className:"link-blue-xs",onClick:()=>l(s.id),children:"Restore"})}),e.jsx("p",{children:e.jsx("button",{className:"link-red-xs",onClick:()=>r(s.id),children:"Permanently Delete"})})]}):e.jsx(e.Fragment,{children:e.jsx("p",{children:e.jsx("button",{className:"link-red-xs",onClick:()=>{i(s.id)},children:"Bin"})})})})]}),e.jsx("td",{children:(c=s.name,c.replace(/[^\w\s]/gi,"").replace(/\s+/g,"_").toLowerCase())}),e.jsx("td",{children:s.description?s.description:"-"})]},n);var c})})]}),We=({posts:s,setPosts:t,selectedIds:a,setSelectedIds:l,toggleCheckbox:i,restorePost:r,binPost:n,permanentlyDeletePost:c,allSelected:o,toggleAllCheckboxes:d})=>e.jsx("div",{children:e.jsx(Le,{posts:s,selectedIds:a,toggleCheckbox:i,restorePost:r,binPost:n,permanentlyDeletePost:c,allSelected:o,toggleAllCheckboxes:d})}),Je=()=>{const{loginPassword:a}=s.useContext(t),[l,i]=s.useState([]),[n,c]=s.useState([]),[o,d]=s.useState(0),[u,h]=s.useState(!1),[x,m]=s.useState("all"),[p,g]=s.useState(""),[v,b]=s.useState([]),f=l.length>0&&v.length===l.length,w=async()=>{const e=await N(a);if(200===e.status)try{let s=JSON.parse(e.data.getCustomPosts),t=[];"all"==x?t=s.filter(e=>"trash"!=e.status):"trash"==x&&(t=s.filter(e=>"trash"==e.status)),i(t),c(s),d(s.filter(e=>"trash"!=e.status).length)}catch(s){return await j(s.stack||String(s)),void r("Error parsing groups.","error")}else r("Error saving post.","error")};return s.useEffect(()=>{w()},[x]),s.useEffect(()=>{u&&(h(!1),w())},[u]),e.jsxs("div",{className:"w-full",children:[e.jsx(qe,{}),e.jsx(Ge,{posts:n,totalPosts:o,filter:x,setFilter:m}),e.jsx(He,{bulkAction:p,setBulkAction:g,handleApply:async()=>{if("trash"===p&&v.length>0){(await Promise.all(v.map(async e=>{var s,t;const l=await S(a,"trash",e);return 200===l.status&&(null==(t=null==(s=l.data)?void 0:s.updateCustomPostStatus)?void 0:t.success)}))).some(e=>e)&&(m("trash"),h(!0),b([]))}else if("restore"===p&&v.length>0){(await Promise.all(v.map(async e=>{var s,t;const l=await S(a,"active",e);return 200===l.status&&(null==(t=null==(s=l.data)?void 0:s.updateCustomPostStatus)?void 0:t.success)}))).some(e=>e)&&(m("all"),h(!0),b([]))}else if("delete"===p&&v.length>0){const s=await N(a);if(200!==s.status)return void r("Error fetching custom posts.","error");let t=[];try{t=JSON.parse(s.data.getCustomPosts),Array.isArray(t)||(t=[])}catch(e){return await j(e.stack||String(e)),void r("Error parsing custom posts.","error")}const l=t.filter(e=>!v.includes(e.id));200!==(await y(l,a)).status?r("Error deleting custom posts.","error"):(r("Successfully deleted selected posts.","success"),m("all"),h(!0),b([]))}},filter:x}),e.jsx("div",{className:"panel mt-8",children:e.jsx(We,{posts:l,setPosts:i,selectedIds:v,setSelectedIds:b,toggleCheckbox:e=>{b(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},restorePost:async e=>{const s=await S(a,"active",e);200==s.status&&s.data.updateCustomPostStatus.success&&(m("all"),h(!0))},binPost:async e=>{const s=await S(a,"trash",e);200==s.status&&s.data.updateCustomPostStatus.success&&(m("trash"),h(!0))},permanentlyDeletePost:async e=>{const s=await N(a);if(200!==s.status)return void r("Error fetching custom posts.","error");let t=[];try{t=JSON.parse(s.data.getCustomPosts),Array.isArray(t)||(t=[])}catch(i){return await j(i.stack||String(i)),void r("Error parsing custom posts.","error")}const l=t.filter(s=>s.id!==e);200===(await y(l,a)).status?(r("Successfully removed custom post.","success"),m("all"),h(!0)):r("Error removing custom post.","error")},allSelected:f,toggleAllCheckboxes:()=>{v.length===l.length?b([]):b(l.map(e=>e.id))}})})]})},Ye=({triggerSave:s})=>e.jsx("div",{className:"title-panel",children:e.jsxs("div",{className:"title-bar",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsx("h2",{className:"text-3xl",children:"Add New Post"})}),e.jsxs("button",{className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:()=>s(),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Save Changes"]})]})}),$e=()=>{const{loginPassword:a}=s.useContext(t),l=E(),[i,n]=s.useState(""),[c,o]=s.useState(""),[d,u]=s.useState(!0);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(Ye,{name:i,setName:n,triggerSave:async()=>{if(""===i)return void r("Field group 'Name' required.","error");const e={id:R(),name:i,description:c,active:d},s=await N(a);if(200!==s.status)return void r("Error saving group.","error");let t=[];try{t=JSON.parse(s.data.getCustomPosts),Array.isArray(t)||(t=[])}catch(n){return await j(n.stack||String(n)),void r("Error parsing posts.","error")}t.push(e);200===(await y(t,a)).status?(r("Success saving custom post.","success"),l("/admin/settings/custom_posts")):r("Error saving custom post.","error")}}),e.jsxs("div",{className:"panel mt-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{children:"Post Type Name"}),e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:i,onChange:e=>n(e.target.value),className:"input"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{children:"Database Slug"}),e.jsx("input",{type:"text",name:"slug",placeholder:"Slug",value:(h=i,h.replace(/[^\w\s]/gi,"").replace(/\s+/g,"_").toLowerCase()),className:"border border-gray-300 rounded-lg block w-full p-2.5 cursor-not-allowed bg-white text-gray-400",disabled:!0})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{name:i,value:c,onChange:e=>o(e.target.value),rows:4,className:"w-full p-2 bg-gray-50 border rounded resize-y"})]})]})]})});var h},Ke=({triggerSave:s})=>e.jsx("div",{className:"title-panel",children:e.jsxs("div",{className:"title-bar",children:[e.jsx("div",{className:"flex flex-row items-center",children:e.jsx("h2",{className:"text-3xl",children:"Edit Custom Post"})}),e.jsxs("button",{className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:()=>s(),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Save Changes"]})]})}),Qe=()=>{const{loginPassword:a}=s.useContext(t),{id:l}=A(),i=E(),[n,c]=s.useState(""),[o,d]=s.useState(""),[u,h]=s.useState(!0);return s.useEffect(()=>{(async()=>{const e=await C(l,a);if(200==e.status){const s=JSON.parse(e.data.getCustomPostById);c(s.name),d(s.description),h(s.active)}})()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(Ke,{triggerSave:async()=>{if(""===n)return void r("Field group 'Name' required.","error");const e=await N(a);if(200!==e.status)return void r("Error saving group.","error");let s=[];try{s=JSON.parse(e.data.getCustomPosts),Array.isArray(s)||(s=[])}catch(d){return await j(d.stack||String(d)),void r("Error parsing groups.","error")}const t=s.findIndex(e=>e.id===l),c={id:l,name:n,description:o,active:u};-1!==t?s[t]=c:s.push(c);200===(await y(s,a)).status?(r("Success saving custom post.","success"),i("/admin/settings/custom_posts")):r("Error saving custom post.","error")}}),e.jsxs("div",{className:"panel mt-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{children:"Post Type Name"}),e.jsx("input",{type:"text",name:"name",placeholder:"Name",value:n,onChange:e=>c(e.target.value),className:"input"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{children:"Database Slug"}),e.jsx("input",{type:"text",name:"slug",placeholder:"Slug",value:(x=n,x.replace(/[^\w\s]/gi,"").replace(/\s+/g,"_").toLowerCase()),className:"border border-gray-300 rounded-lg block w-full p-2.5 cursor-not-allowed bg-white text-gray-400",disabled:!0})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{name:n,value:o,onChange:e=>d(e.target.value),rows:4,className:"w-full p-2 bg-gray-50 border rounded resize-y"})]})]})]})});var x};export{fe as C,me as E,ce as R,te as S,de as W,ie as a,Ee as b,Ze as c,Je as d,$e as e,Qe as f};

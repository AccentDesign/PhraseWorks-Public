const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/theme-classic.js","assets/vendor-react.js","assets/index.js","assets/vendor-text-utils.js","assets/vendor-other.js","assets/admin-core.js","assets/vendor-headless-ui.js","assets/vendor-utils.js","assets/admin-core.css","assets/vendor-flowbite.js","assets/app-main.css","assets/theme-classic.css","assets/theme-theme2025.js","assets/theme-theme2025.css"])))=>i.map(i=>d[i]);
import{A as e,a as s,n as a,b as t,c as l,d as n,e as i,f as d,_ as r,g as o,h as c,i as m,j as u,k as h}from"./index.js";import{j as p,r as x}from"./vendor-react.js";import{z as v,L as j}from"./vendor-headless-ui.js";import{S as g,v as f,u as N,a as w,b,D as y,c as C}from"./vendor-dnd.js";import{C as S,v as T}from"./vendor-other.js";const I=({setAddSliderOpen:e})=>p.jsx("div",{className:"title-panel",children:p.jsxs("div",{className:"title-bar",children:[p.jsx("div",{children:p.jsx("h2",{className:"text-3xl",children:"Themes"})}),p.jsxs("button",{type:"button",onClick:()=>e(!0),className:"text-white bg-blue-700 hover:bg-blue-800 btn",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:p.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Add New Theme"]})]})}),M=({themes:e,activeTheme:s,setThemeToEdit:a,setEditSliderOpen:t,valid:l,deleteTheme:n,updateActiveTheme:i})=>p.jsxs("table",{className:"table table-striped",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",className:"w-[100px]"}),p.jsx("th",{scope:"col",className:"w-3/4",children:"Name"}),p.jsx("th",{scope:"col",className:"w-1/4",children:"Location"})]})}),p.jsx("tbody",{children:e.map((e,d)=>p.jsxs("tr",{children:[p.jsx("td",{children:p.jsx("button",{type:"button",className:"bin-btn",onClick:()=>n(e.id),children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6",children:p.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"})})})}),p.jsxs("td",{className:"flex flex-col",children:[p.jsxs("div",{className:"flex-center",children:[p.jsxs("button",{type:"button",className:"link-bold",onClick:()=>{a(e),t(!0)},children:[e.name,0==l&&p.jsxs("span",{className:"text-red-normal",children:[" ","- Invalid, this has no folder or files in the location"]})]}),e.name==s.name&&p.jsx("div",{className:"text-green-normal ml-2",children:"Active"})]}),p.jsx("div",{className:"flex flex-row items-center gap-4",children:e.name!=s.name&&p.jsx("p",{children:p.jsx("button",{className:"activate-btn "+(0==l?"cursor-not-allowed":"cursor-pointer"),disabled:!1===l,onClick:()=>i(e.id),children:"Set Active"})})})]}),p.jsx("td",{children:e.location})]},d))})]}),O=({addSliderOpen:t,setAddSliderOpen:l,HandleClose:n,setReloadThemes:i})=>{const{loginPassword:d}=x.useContext(e),[r,o]=x.useState(""),[c,m]=x.useState("");return p.jsx(v.Root,{show:t,as:x.Fragment,children:p.jsxs(j,{as:"div",className:"slide-panel",onClose:n,children:[p.jsx("div",{className:"fixed inset-0"}),p.jsx("div",{className:"slide-panel-content-wrapper",children:p.jsx("div",{className:"slide-panel-content",children:p.jsx("div",{className:"slide-panel-content-inner",children:p.jsx(v.Child,{as:x.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:p.jsx(j.Panel,{className:"slide-panel-dialog-panel",children:p.jsx("div",{className:"slide-panel-dialog-panel-inner px-4 sm:px-6",children:p.jsx("div",{className:"slide-panel-dialog-relative",children:p.jsx("div",{className:"flex-start",children:p.jsxs("div",{className:"w-full",children:[p.jsxs("div",{className:"slide-panel-dialog-header-wrapper",children:[p.jsx(j.Title,{className:"slide-panel-dialog-title",children:"Add Page Template"}),p.jsx("div",{className:"slide-panel-close-wrapper",children:p.jsxs("button",{type:"button",className:"slide-panel-close-btn",onClick:()=>{l(!1)},children:[p.jsx("span",{className:"absolute -inset-2.5"}),p.jsx("span",{className:"sr-only",children:"Close panel"}),p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-6 w-6",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})]})})]}),p.jsxs("div",{className:"w-full",children:[p.jsx("label",{children:"Name"}),p.jsx("input",{type:"text",name:"name",placeholder:"Name",autoComplete:"Name",value:r,className:"input",required:!0,onChange:e=>{o(e.target.value)}})]}),p.jsxs("div",{className:"w-full mt-4",children:[p.jsx("label",{children:"Location"}),p.jsx("input",{type:"text",name:"location",placeholder:"Location",autoComplete:"Location",value:c,className:"input",required:!0,onChange:e=>{m(e.target.value)}}),p.jsx("p",{className:"text-sm text-gray-500",children:"Example: `/Content/Theme`"})]}),p.jsx("div",{className:"flex flex-row justify-end mt-4",children:p.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:async()=>{const e=await s(d,r,c);if(200==e.status&&1==e.data.addTheme.success)return i(!0),l(!1),o(""),m(""),void a("Successfully created theme entry.","success");a("Failed to create theme entry.","error")},children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:p.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"})}),"Add Page Template"]})})]})})})})})})})})})]})})},R=({editSliderOpen:s,setEditSliderOpen:l,HandleClose:n,themeToEdit:i,setThemeToEdit:d,setReloadThemes:r})=>{const{loginPassword:o}=x.useContext(e),[c,m]=x.useState(""),[u,h]=x.useState("");return x.useEffect(()=>{i&&(m(null==i?void 0:i.name),h(null==i?void 0:i.location))},[i]),p.jsx(v.Root,{show:s,as:x.Fragment,children:p.jsxs(j,{as:"div",className:"slide-panel",onClose:n,children:[p.jsx("div",{className:"fixed inset-0"}),p.jsx("div",{className:"slide-panel-content-wrapper",children:p.jsx("div",{className:"slide-panel-content",children:p.jsx("div",{className:"slide-panel-content-inner",children:p.jsx(v.Child,{as:x.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:p.jsx(j.Panel,{className:"slide-panel-dialog-panel",children:p.jsx("div",{className:"slide-panel-dialog-panel-inner px-4 sm:px-6",children:p.jsx("div",{className:"slide-panel-dialog-relative",children:p.jsx("div",{className:"flex-start",children:p.jsxs("div",{className:"w-full",children:[p.jsxs("div",{className:"slide-panel-dialog-header-wrapper",children:[p.jsx(j.Title,{className:"slide-panel-dialog-title",children:"Edit Theme"}),p.jsx("div",{className:"slide-panel-close-wrapper",children:p.jsxs("button",{type:"button",className:"slide-panel-close-btn",onClick:()=>{l(!1)},children:[p.jsx("span",{className:"absolute -inset-2.5"}),p.jsx("span",{className:"sr-only",children:"Close panel"}),p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-6 w-6",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})]})})]}),p.jsxs("div",{className:"w-full",children:[p.jsx("label",{children:"Name"}),p.jsx("input",{type:"text",name:"name",placeholder:"Name",autoComplete:"Name",value:c,className:"input",required:!0,onChange:e=>{m(e.target.value)}})]}),p.jsxs("div",{className:"w-full mt-4",children:[p.jsx("label",{children:"Location"}),p.jsx("input",{type:"text",name:"location",placeholder:"Location",autoComplete:"Location",value:u,className:"input",required:!0,onChange:e=>{h(e.target.value)}})]}),p.jsx("div",{className:"flex flex-row justify-end mt-4",children:p.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:async()=>{const e=await t(o,c,u,i.id);if(200==e.status&&1==e.data.updateTheme.success)return r(!0),l(!1),d(null),void a("Successfully updated theme.","success")},children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:p.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})})]})})})})})})})})})]})})},k=Object.assign({"/src/Content/Classic/Theme.md":()=>r(()=>import("./theme-classic.js").then(e=>e.c),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])),"/src/Content/Theme2025/Theme.md":()=>r(()=>import("./theme-theme2025.js").then(e=>e.c),__vite__mapDeps([12,1,2,3,4,5,6,7,8,9,10,13]))}),E=()=>{const{loginPassword:s}=x.useContext(e),[a,t]=x.useState([]),[r,o]=x.useState([]),[c,m]=x.useState(),[u,h]=x.useState(!1),[v,j]=x.useState(!1),[g,f]=x.useState(!1),[N,w]=x.useState(null),b=()=>{},y=async(e=!0)=>{const a=await i();e&&200==a.status&&m(a.data.getTheme);const l=await d(s);if(e&&200==l.status){const e=l.data.getThemes.themes,s=e.filter(e=>`/src${e.location}/Theme.md`in k),a=e.filter(e=>!(`/src${e.location}/Theme.md`in k));t(s),o(a)}};return x.useEffect(()=>{let e=!0;return(async()=>{await y(e)})(),()=>{e=!1}},[]),x.useEffect(()=>{let e=!0;return(async()=>{u&&(await y(e),e&&h(!1))})(),()=>{e=!1}},[u]),p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"w-full",children:[p.jsx(I,{setAddSliderOpen:j}),p.jsx("div",{className:"non-padded-panel mt-8",children:p.jsx(M,{themes:a,activeTheme:c,setThemeToEdit:w,setEditSliderOpen:f,valid:!0,deleteTheme:async e=>{200==(await n(s,e)).status&&h(!0)},updateActiveTheme:async e=>{200==(await l(s,e)).status&&h(!0)}})}),p.jsx("div",{className:"non-padded-panel mt-8",children:p.jsx(M,{themes:r,activeTheme:c,setThemeToEdit:w,setEditSliderOpen:f,valid:!1})})]}),p.jsx(O,{addSliderOpen:v,setAddSliderOpen:j,HandleClose:b,setReloadThemes:h}),p.jsx(R,{editSliderOpen:g,setEditSliderOpen:f,HandleClose:b,themeToEdit:N,setThemeToEdit:w,setReloadThemes:h})]})},L=({items:e,children:s})=>p.jsx(g,{items:e.map(e=>e.id),strategy:f,children:s}),Z=()=>p.jsx("div",{className:"title-panel",children:p.jsx("div",{className:"title-bar",children:p.jsx("div",{children:p.jsx("h2",{className:"text-3xl",children:"Menus"})})})}),P=({menus:e,menuId:s,setMenuId:a})=>p.jsx("div",{className:"mt-4 title-panel",children:p.jsxs("div",{className:"flex flex-row items-center justify-start p-4",children:[p.jsx("p",{children:"Select a menu to edit "}),p.jsxs("select",{id:"filter",className:"mx-4 bg-gray-100 border-gray-300 border px-4 py-2 divide-y divide-gray-100 rounded shadow",value:s,onChange:e=>a(e.target.value),children:[p.jsx("option",{value:"",children:"Please select a menu..."}),null==e?void 0:e.map((e,s)=>p.jsx("option",{value:e.name,children:e.name},s))]}),""!=s&&p.jsxs(p.Fragment,{children:[p.jsx("p",{children:"or "}),p.jsx("button",{type:"button",className:"ml-2 text-blue-700 hover:text-blue-400",children:"create a new menu"}),p.jsx("p",{className:"mr-2",children:"."})]}),p.jsx("p",{children:"Do not forget to save your changes."})]})}),A=({item:e,children:s,className:a})=>{if(!e.id)return null;const{attributes:t,listeners:l,setNodeRef:n,transform:i,transition:d}=N({id:e.id,data:{...e,data:{...e,isHandle:!1}}}),r={transform:S.Transform.toString(i),transition:d};return p.jsx("div",{ref:n,style:r,...t,className:a,children:p.jsx("div",{className:"flex-1",children:"function"==typeof s?s({listeners:l,attributes:t}):s})})},_=({item:e,level:s,isExpanded:a,toggleItemExpanded:t,removeItem:l,handleInputChange:n,renderMenuTree:i})=>{var d;const{setNodeRef:r,isOver:o}=w({id:`${e.id}-handle`,data:{id:e.id,isHandle:!0}}),{setNodeRef:c,isOver:m}=w({id:`${e.id}`,data:{id:e.id,isHandle:!1}});return p.jsxs("div",{style:{marginLeft:20*s+"px"},children:[p.jsx("div",{className:"p-2 border mb-2 bg-blue-50 rounded",children:p.jsxs("div",{className:"w-full flex flex-row items-start",children:[p.jsx("div",{ref:r,className:"mr-2",style:{backgroundColor:o?"#e5e7eb":void 0},children:p.jsx(A,{id:`${e.id}`,item:e,children:({listeners:e,attributes:s})=>p.jsx("div",{className:"cursor-move",...e,...s,children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",children:p.jsx("path",{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})})})})}),p.jsxs("div",{ref:c,id:e.id,className:"w-full",style:{backgroundColor:m?"#e5e7eb":void 0},children:[p.jsxs("div",{className:"w-full flex flex-row justify-between items-center",children:[p.jsx("p",{children:e.label||e.title}),p.jsxs("small",{style:{fontSize:"10px",color:"gray"},children:["label: ",e.label||"none"," | title: ",e.title]}),p.jsxs("div",{className:"flex flex-row items-center",children:[p.jsx("button",{onClick:()=>l(e.id),className:"text-red-700 hover:text-red-900",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 ",children:p.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"})})}),p.jsx("button",{onClick:()=>t(e.id),children:a?p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",children:p.jsx("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1-1.06 0L12 8.25l-3.22 3.22a.75.75 0 1 1-1.06-1.06l3.75-3.75a.75.75 0 0 1 1.06 0l3.75 3.75a.75.75 0 0 1 0 1.06z",clipRule:"evenodd"})}):p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",children:p.jsx("path",{fillRule:"evenodd",d:"M7.72 11.47a.75.75 0 0 1 1.06 0L12 14.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-3.75 3.75a.75.75 0 0 1-1.06 0l-3.75-3.75a.75.75 0 0 1 0-1.06z",clipRule:"evenodd"})})})]})]}),a&&p.jsxs("div",{className:"mt-2",children:[p.jsx("label",{className:"block",children:"Label"}),p.jsx("input",{type:"text",name:"title",value:e.label||e.title||"",onChange:s=>n(e.id,"label",s.target.value),className:"w-full p-2 border rounded"}),p.jsx("label",{className:"block mt-2",children:"Override URL"}),p.jsx("input",{type:"text",name:"href",value:e.url||"",onChange:s=>n(e.id,"url",s.target.value),className:"w-full p-2 border rounded"})]})]})]})}),(null==(d=e.children)?void 0:d.length)>0&&i(e.children,s+1)]},e.id)},$=e=>{const{attributes:s,listeners:a,setNodeRef:t}=b({id:e.id,data:e.item});return p.jsx("li",{ref:t,...a,...s,className:"p-2 border mb-2 bg-blue-50 rounded",children:e.children})},H=({availableItems:e,openGroups:s,toggleGroup:a,searchItems:t})=>p.jsxs("div",{className:"bg-white shadow p-4 rounded w-1/4",children:[p.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Add Menu Items"}),p.jsx("ul",{className:"border rounded divide-y",children:e.map((e,l)=>p.jsxs("li",{children:[p.jsxs("button",{onClick:()=>a(e.type),className:"menu-list-header",children:[p.jsx("span",{children:e.type}),p.jsx("span",{children:s.includes(e.type)?"▾":"▸"})]}),s.includes(e.type)&&p.jsxs(p.Fragment,{children:[p.jsx("ul",{className:"p-3 space-y-2",children:e.items.map(e=>p.jsx($,{id:e.id,item:e,children:p.jsx("div",{className:"",children:e.title})},e.id))}),"Custom Links"!==e.type&&p.jsx("div",{className:"px-3 mb-2 w-full",children:p.jsx("input",{type:"text",name:"name",placeholder:"Search",autoComplete:"Search",className:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg w-full p-2.5",required:!0,onChange:s=>{t(e.type,s.target.value)}})})]})]},l))})]}),D=e=>{const{setNodeRef:s,isOver:a}=w({id:e.id,data:{isHandle:!1}}),t={backgroundColor:a?"#e5e7eb":void 0,marginLeft:0!=e.marginLeft?`${e.marginLeft}px`:void 0};return p.jsx("div",{ref:s,style:t,className:e.className,children:e.children})},F=({name:e,setName:s,menuItems:a,renderMenuTree:t,buildTree:l,submitSave:n})=>p.jsxs("div",{className:"bg-white shadow p-4 rounded w-3/4",children:[p.jsxs("div",{className:"w-full",children:[p.jsx("label",{children:"Menu Name"}),p.jsx("input",{type:"text",name:"name",placeholder:"Menu Name",autoComplete:"Name",value:e,className:"input",required:!0,onChange:e=>{s(e.target.value)}})]}),p.jsx("hr",{className:"my-4"}),p.jsxs(D,{id:"menuZone",className:"p-4",children:[0===JSON.parse(a).length&&p.jsx("p",{className:"text-gray-500 text-sm h-20 flex flex-row items-center justify-center border-4 border-dashed border-gray-300",children:"Drag items here to build your menu"}),p.jsx("div",{children:t(l(JSON.parse(a)))})]}),p.jsx("hr",{className:"my-4"}),p.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:n,children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:p.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"})}),"Save Menu"]})]}),J=()=>{const[s,t]=x.useState(JSON.stringify([])),[l,n]=x.useState([]),[i,d]=x.useState(["Pages"]),[r,v]=x.useState(""),[j,g]=x.useState(""),{availableItems:f,menus:N,fetchData:w,searchItems:b,saveMenu:S}=(()=>{const{loginPassword:s}=x.useContext(e),[t,l]=x.useState([]),[n,i]=x.useState([]),d=e=>e.replace(/[^\w\s]/gi,"").replace(/\s+/g,"_").toLowerCase(),r=x.useCallback(async(e=!0)=>{const a=await o(s);let t=[];e&&200==a.status&&a.data.getCustomPosts&&(t=JSON.parse(a.data.getCustomPosts));let n=[],r=[];const u=await c(s,1,4,"page");e&&200==u.status&&(n=u.data.getPosts.posts);const h=await c(s,1,4,"post");e&&200==h.status&&(r=h.data.getPosts.posts);const p=await Promise.all(t.map(async a=>{const t=d(a.name),l=await c(s,1,4,t);let n=[];return e&&200===l.status&&(n=l.data.getPosts.posts.map(e=>({id:`${t}-${e.id}`,title:e.post_title,url:`/${e.post_name}`,type:t,postId:e.id}))),{type:a.name,items:n}})),x=[{type:"Pages",items:n.map(e=>({id:`page-${e.id}`,title:e.post_title,url:`/${e.post_name}`,type:"page",postId:e.id}))},{type:"Posts",items:r.map(e=>({id:`post-${e.id}`,title:e.post_title,url:`/${e.post_name}`,type:"post",postId:e.id}))},...p,{type:"Custom Links",items:[{id:"custom",title:"Custom",url:"/",type:"custom"}]}];l(x);const v=await m(s);e&&200==v.status&&i(JSON.parse(v.data.getMenus))},[s]);return{availableItems:t,menus:n,fetchData:r,searchItems:async(e,a)=>{let t=[],n="post";if(n="Pages"===e||"Posts"===e?"Pages"===e?"page":"post":d(e),""!=a){const e=await h(s,a,1,6,n);200===e.status&&(t=e.data.getPostsSearch.posts.map(e=>({id:`${n}-${e.id}`,title:e.post_title,url:`/${e.post_name}`,type:n,postId:e.id})))}else{const e=await c(s,1,4,n);200===e.status&&(t=e.data.getPosts.posts.map(e=>({id:`${n}-${e.id}`,title:e.post_title,url:`/${e.post_name}`,type:n,postId:e.id})))}l(s=>s.map(s=>s.type===e?{...s,items:t}:s))},saveMenu:async(e,t,l)=>{const n={name:e,menuData:t},i=[...l],d=i.findIndex(s=>s.name===e);-1!==d?i[d]=n:i.push(n);const o=await u(s,i);200==o.status&&o.data.updateMenus.success?(a("Successfully updated menus.","success"),await r()):a("Failed to update menus.","error")}}})(),{activeId:I,handleDragStart:M,handleDragEnd:O}=((e,s,a)=>{const[t,l]=x.useState(null);return{activeId:t,handleDragStart:e=>{l(e.active.data.current.title)},handleDragEnd:t=>{var n;l(null);const{active:i,over:d}=t;if(!d)return;const r=i.id,o=d.id.endsWith("-handle"),c=o?null==(n=d.data)?void 0:n.current.id:d.id,m=JSON.parse(e);if(a.flatMap(e=>e.items).some(e=>e.id===r)){const e=a.flatMap(e=>e.items).find(e=>e.id===r);if(!e)return;const t={...e,id:T(),parentId:"menuZone"===c?"menuZone":c,label:e.title,url:e.url,type:e.type,postId:null==e?void 0:e.postId};return m.push(t),void s(JSON.stringify(m))}const u=m.findIndex(e=>e.id===r),h=m[u],p="menuZone"===c?{id:"menuZone"}:m.find(e=>e.id===c);if(h&&p){if(o){const e=h.parentId,a=m.filter(s=>s.parentId===e),t=a.findIndex(e=>e.id===h.id),l=a.findIndex(e=>e.id===p.id);if(-1===t||-1===l)return;a.splice(l,0,a.splice(t,1)[0]);const n=m.filter(s=>s.parentId!==e);return void s(JSON.stringify([...n,...a]))}m[u].parentId="menuZone"===p.id?"menuZone":p.id,s(JSON.stringify(m))}}}})(s,t,f),R=e=>{n(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},k=(e,s="menuZone")=>e.filter(e=>e.parentId===s).map(s=>({...s,children:k(e,s.id)})),E=(e,a,l)=>{const n=JSON.parse(s).map(s=>{if(s.id===e){return{...s,[a]:l}}return s});t(JSON.stringify(n))},A=e=>{const a=JSON.parse(s),l=(e,s)=>{const a=s.filter(s=>s.parentId===e).map(e=>e.id);return a.reduce((e,a)=>e.concat(a,l(a,s)),a)},n=[e,...l(e,a)],i=a.filter(e=>!n.includes(e.id));t(JSON.stringify(i))};x.useEffect(()=>{let e=!0;return(async()=>{await w(e)})(),()=>{e=!1}},[w]),x.useEffect(()=>{if(""!=j){const e=N.find(e=>e.name==j);e&&(t(e.menuData),v(j))}},[j,N]);const $=(e,s=0)=>p.jsx(L,{items:e,children:e.map(e=>{const a=l.includes(e.id);return p.jsx(_,{item:e,level:s,isExpanded:a,toggleItemExpanded:R,removeItem:A,handleInputChange:E,renderMenuTree:$},e.id)})});return p.jsx(p.Fragment,{children:p.jsxs("div",{className:"w-full",children:[p.jsx(Z,{}),p.jsx(P,{menus:N,menuId:j,setMenuId:g}),p.jsx("div",{className:"w-full flex flex-row items-start mt-8 gap-4",children:p.jsxs(y,{onDragStart:M,onDragEnd:O,children:[p.jsx(H,{availableItems:f,openGroups:i,toggleGroup:e=>{d(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},searchItems:b}),p.jsx(C,{children:I?p.jsx("div",{className:"p-2 border mb-2 bg-blue-50 rounded",children:`${I}`}):null}),p.jsx(F,{name:r,setName:v,menuItems:s,renderMenuTree:$,buildTree:k,submitSave:async()=>{await S(r,s,N)}})]})})]})})};export{E as A,J as a};

import{j as e,r as t}from"./vendor-react.js";import{A as s,V as l,W as a,n as i,q as r,X as n,Y as c,r as o,Z as d,$ as h,a0 as m,a1 as x,a2 as u}from"./index.js";import{z as p,L as g}from"./vendor-headless-ui.js";import{C as v}from"./vendor-utils.js";const w=({setSliderOpen:t})=>e.jsx("div",{className:"title-panel",children:e.jsxs("div",{className:"title-bar",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"Media Library"})}),e.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:()=>{t(!0)},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Add New Media File"]})]})}),f=({view:t,setView:s,search:l,setSearch:a,type:i,setType:r})=>e.jsx("div",{className:"relative bg-white shadow-md sm:rounded-lg mt-4",children:e.jsxs("div",{className:"media-menu-start",children:[e.jsx("div",{className:"w-full md:w-1/2",children:e.jsxs("form",{className:"flex items-center",children:[e.jsxs("div",{className:"mr-2 flex flex-row items-center",children:[e.jsx("button",{type:"button",className:"px-3 py-2 font-medium rounded shadow "+("squares"==t?"text-gray-800 bg-gray-200 hover:bg-gray-300":"bg-gray-50 text-gray-200"),onClick:()=>s("squares"),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",children:e.jsx("path",{fillRule:"evenodd",d:"M3 6a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V6Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3v2.25a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3V6ZM3 15.75a3 3 0 0 1 3-3h2.25a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3v-2.25Zm9.75 0a3 3 0 0 1 3-3H18a3 3 0 0 1 3 3V18a3 3 0 0 1-3 3h-2.25a3 3 0 0 1-3-3v-2.25Z",clipRule:"evenodd"})})}),e.jsx("button",{type:"button",className:"ml-2 px-3 py-2 font-medium rounded shadow "+("list"==t?"text-gray-800 bg-gray-200 hover:bg-gray-300":"bg-gray-50 text-gray-200"),onClick:()=>s("list"),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",children:e.jsx("path",{fillRule:"evenodd",d:"M2.625 6.75a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0A.75.75 0 0 1 8.25 6h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75ZM2.625 12a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0ZM7.5 12a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12A.75.75 0 0 1 7.5 12Zm-4.875 5.25a1.125 1.125 0 1 1 2.25 0 1.125 1.125 0 0 1-2.25 0Zm4.875 0a.75.75 0 0 1 .75-.75h12a.75.75 0 0 1 0 1.5h-12a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})})})]}),e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"search-input-icon",children:e.jsx("svg",{"aria-hidden":"true",className:"w-5 h-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",id:"simple-search",className:"search-input",placeholder:"Search",required:"",value:l,onChange:e=>a(e.target.value)})]})]})}),e.jsx("div",{className:"media-menu-end",children:e.jsx("div",{className:"flex items-center w-full space-x-3 md:w-auto",children:e.jsxs("select",{id:"filter",className:"select",value:i,onChange:e=>r(e.target.value),children:[e.jsx("option",{value:"all",children:"All Media Items"}),e.jsx("option",{value:"image",children:"Images"}),e.jsx("option",{value:"document",children:"Documents"})]})})})]})}),j=({bulkAction:t,setBulkAction:s,handleApply:l})=>e.jsxs("div",{className:"flex flex-row items-center mt-4",children:[e.jsxs("select",{id:"actionsDropdown",className:"bg-gray-100 border-gray-300 border px-4 py-2 divide-y divide-gray-100 rounded shadow w-44",value:t,onChange:e=>s(e.target.value),children:[e.jsx("option",{value:"",children:"Bulk Actions"}),e.jsx("option",{value:"delete",children:"Delete Permenantly"})]}),e.jsxs("button",{type:"button",className:"ml-4 flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 focus:outline-none",onClick:l,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"})}),"Apply"]})]}),b=({files:s,selectedIds:l,toggleCheckbox:a,ShowDetails:i,reloadFiles:r,setReloadFiles:n})=>{const[c,o]=t.useState(s),[d,h]=t.useState("");return t.useEffect(()=>{r&&(o(s),h(`?t=${Date.now()}`),n(!1))},[r,s,n]),e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col"}),e.jsx("th",{scope:"col",children:"File"}),e.jsx("th",{scope:"col",children:"Author"}),e.jsx("th",{scope:"col",children:"Uploaded to"}),e.jsx("th",{scope:"col",children:"Date"})]})}),e.jsx("tbody",{children:c.map((t,s)=>{var r;const n=null==t?void 0:t.filename,c=t.filename.split(".").pop().toLowerCase();return e.jsxs("tr",{children:[e.jsx("td",{scope:"row",className:"table-checkbox-cell",children:e.jsx("input",{id:`checkbox-${s}`,type:"checkbox",value:t.filename,checked:l.includes(t.filename),onChange:()=>a(t.filename),className:"checkbox"})}),e.jsx("td",{children:e.jsxs("div",{className:"flex flex-row items-center",children:[t.mimetype.includes("image")?e.jsx("img",{src:`http://localhost/uploads/${n}${d}`,className:"media-preview-img-cover",alt:(null==t?void 0:t.post_title)||(null==t?void 0:t.filename)}):"csv"===c?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm-96 144c0 4.42-3.58 8-8 8h-8c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h8c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-8c-26.51 0-48-21.49-48-48v-32c0-26.51 21.49-48 48-48h8c4.42 0 8 3.58 8 8v16zm44.27 104H160c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h12.27c5.95 0 10.41-3.5 10.41-6.62 0-1.3-.75-2.66-2.12-3.84l-21.89-18.77c-8.47-7.22-13.33-17.48-13.33-28.14 0-21.3 19.02-38.62 42.41-38.62H200c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-12.27c-5.95 0-10.41 3.5-10.41 6.62 0 1.3.75 2.66 2.12 3.84l21.89 18.77c8.47 7.22 13.33 17.48 13.33 28.14.01 21.29-19 38.62-42.39 38.62zM256 264v20.8c0 20.27 5.7 40.17 16 56.88 10.3-16.7 16-36.61 16-56.88V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v20.8c0 35.48-12.88 68.89-36.28 94.09-3.02 3.25-7.27 5.11-11.72 5.11s-8.7-1.86-11.72-5.11c-23.4-25.2-36.28-58.61-36.28-94.09V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8zm121-159L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"})}):"docx"===c||"doc"===c?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm57.1 120H305c7.7 0 13.4 7.1 11.7 14.7l-38 168c-1.2 5.5-6.1 9.3-11.7 9.3h-38c-5.5 0-10.3-3.8-11.6-9.1-25.8-103.5-20.8-81.2-25.6-110.5h-.5c-1.1 14.3-2.4 17.4-25.6 110.5-1.3 5.3-6.1 9.1-11.6 9.1H117c-5.6 0-10.5-3.9-11.7-9.4l-37.8-168c-1.7-7.5 4-14.6 11.7-14.6h24.5c5.7 0 10.7 4 11.8 9.7 15.6 78 20.1 109.5 21 122.2 1.6-10.2 7.3-32.7 29.4-122.7 1.3-5.4 6.1-9.1 11.7-9.1h29.1c5.6 0 10.4 3.8 11.7 9.2 24 100.4 28.8 124 29.6 129.4-.2-11.2-2.6-17.8 21.6-129.2 1-5.6 5.9-9.5 11.5-9.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"})}):"xlsx"===c||"xls"===c?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"})}):"pdf"===c?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"})}):e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"})}),e.jsxs("div",{className:"ml-4 flex flex-col items-start justify-start",children:[e.jsx("span",{children:t.filename}),e.jsx("button",{className:"link",onClick:()=>i(t.id),children:"View"})]})]})}),e.jsx("td",{children:(null==(r=null==t?void 0:t.author)?void 0:r.user_login)||"-"}),e.jsx("td",{children:"-"}),e.jsx("td",{children:(null==t?void 0:t.date)?new Date(t.date).toLocaleDateString():"-"})]},s)})})]})},y=({files:s,ShowDetails:l,reloadFiles:a,setReloadFiles:i})=>{const[r,n]=t.useState("");return t.useEffect(()=>{a&&(n(`?t=${Date.now()}`),i(!1))},[a,i]),e.jsx("div",{className:"flex flex-wrap gap-4",children:s.map((t,s)=>{const a=null==t?void 0:t.filename,i=t.filename.split(".").pop().toLowerCase();return e.jsxs("button",{type:"button",className:"media-box-view-btn",onClick:()=>l(t.id),children:[t.mimetype.includes("image")?e.jsx("img",{src:`http://localhost/uploads/${a}${r}`,className:"media-preview-img-cover",alt:(null==t?void 0:t.post_title)||(null==t?void 0:t.filename)}):"csv"===i?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm-96 144c0 4.42-3.58 8-8 8h-8c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h8c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-8c-26.51 0-48-21.49-48-48v-32c0-26.51 21.49-48 48-48h8c4.42 0 8 3.58 8 8v16zm44.27 104H160c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h12.27c5.95 0 10.41-3.5 10.41-6.62 0-1.3-.75-2.66-2.12-3.84l-21.89-18.77c-8.47-7.22-13.33-17.48-13.33-28.14 0-21.3 19.02-38.62 42.41-38.62H200c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-12.27c-5.95 0-10.41 3.5-10.41 6.62 0 1.3.75 2.66 2.12 3.84l21.89 18.77c8.47 7.22 13.33 17.48 13.33 28.14.01 21.29-19 38.62-42.39 38.62zM256 264v20.8c0 20.27 5.7 40.17 16 56.88 10.3-16.7 16-36.61 16-56.88V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v20.8c0 35.48-12.88 68.89-36.28 94.09-3.02 3.25-7.27 5.11-11.72 5.11s-8.7-1.86-11.72-5.11c-23.4-25.2-36.28-58.61-36.28-94.09V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8zm121-159L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"})}):"docx"===i||"doc"===i?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm57.1 120H305c7.7 0 13.4 7.1 11.7 14.7l-38 168c-1.2 5.5-6.1 9.3-11.7 9.3h-38c-5.5 0-10.3-3.8-11.6-9.1-25.8-103.5-20.8-81.2-25.6-110.5h-.5c-1.1 14.3-2.4 17.4-25.6 110.5-1.3 5.3-6.1 9.1-11.6 9.1H117c-5.6 0-10.5-3.9-11.7-9.4l-37.8-168c-1.7-7.5 4-14.6 11.7-14.6h24.5c5.7 0 10.7 4 11.8 9.7 15.6 78 20.1 109.5 21 122.2 1.6-10.2 7.3-32.7 29.4-122.7 1.3-5.4 6.1-9.1 11.7-9.1h29.1c5.6 0 10.4 3.8 11.7 9.2 24 100.4 28.8 124 29.6 129.4-.2-11.2-2.6-17.8 21.6-129.2 1-5.6 5.9-9.5 11.5-9.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"})}):"xlsx"===i||"xls"===i?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"})}):"pdf"===i?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"})}):e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"})}),e.jsx("span",{className:"w-full text-center break-words whitespace-normal text-sm overflow-hidden line-clamp-2",children:t.filename})]},s)})})},N=({totalFiles:t,page:s,perPage:l,setPage:a})=>e.jsxs("div",{className:"flex flex-rows justify-end items-center px-4 py-8",children:[e.jsxs("p",{className:"mr-4",children:[t," items"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(1==s?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s>=2&&(async()=>{a(1)})()},children:"«"}),e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(1==s?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s>=2&&(async()=>{a(s-1)})()},children:"‹"}),e.jsxs("p",{children:[s," of ",Math.ceil(t/l)]}),e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(s==Math.ceil(t/l)?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s!==Math.ceil(t/l)&&(async()=>{a(s+1)})()},children:"›"}),e.jsx("button",{className:"px-3 py-2 font-medium rounded shadow "+(s==Math.ceil(t/l)?"bg-gray-50 text-gray-200 cursor-not-allowed":"text-gray-800 bg-gray-200 hover:bg-gray-300"),onClick:()=>{s!==Math.ceil(t/l)&&(async()=>{a(Math.ceil(t/l))})()},children:"»"})]})]}),C=({sliderOpen:s,setSliderOpen:l,HandleClose:a,imgUrl:i,handleChange:r,SendData:n,fileInputRef:c})=>{const[o,d]=t.useState(!1);return e.jsx(p.Root,{show:s,as:t.Fragment,children:e.jsxs(g,{as:"div",className:"slide-panel",onClose:a,children:[e.jsx("div",{className:"fixed inset-0"}),e.jsx("div",{className:"slide-panel-content-wrapper",children:e.jsx("div",{className:"slide-panel-content",children:e.jsx("div",{className:"slide-panel-content-inner",children:e.jsx(p.Child,{as:t.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:e.jsx(g.Panel,{className:"pointer-events-auto w-screen max-w-7xl",children:e.jsx("div",{className:"bg-white flex h-full flex-col overflow-y-scroll  py-6 shadow-2xl",children:e.jsx("div",{className:"px-4 sm:px-6",children:e.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:e.jsx("div",{className:"flex items-start justify-start",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-start justify-between w-full pt-3",children:[e.jsx(g.Title,{className:"text-gray-900 text-base font-semibold leading-6",children:"Add File"}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",className:"bg-white relative rounded-md text-gray-400 hover:text-gray-500",onClick:()=>{l(!1)},children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-6 w-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})]})})]}),e.jsxs("div",{className:"flex flex-row items-center p-4 mt-8 border-4 border-dashed rounded-md min-h-40 "+(o?"border-blue-500 bg-blue-50":"border-gray-300"),onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),d(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0){const t=e.dataTransfer.files;c.current.files=t,r({target:{files:t}})}},onDragOver:e=>{e.preventDefault(),e.stopPropagation(),d(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),d(!1)},children:[e.jsx("input",{type:"file",ref:c,onChange:r}),e.jsx("button",{className:"ml-4 flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 focus:outline-none",type:"submit",onClick:async()=>{await n()},children:"Upload"})]}),i&&e.jsx("img",{src:i,className:"w-[150px]",alt:"Uploaded Preview"})]})})})})})})})})})})]})})},k=({file:r})=>{const{loginPassword:n}=t.useContext(s),[c,o]=t.useState({}),[d,h]=t.useState("");return t.useEffect(()=>{r.id&&(async()=>{if(e=r.id,!/^\d+$/.test(e))return;var e;const t=await l(r.id);if(200==t.status){const e=JSON.parse(JSON.parse(t.data.getMediaItemData));o(e),(null==e?void 0:e.alt)&&h(null==e?void 0:e.alt)}})()},[r]),e.jsxs("div",{children:[e.jsx("label",{className:"block",children:"Alt"}),e.jsx("input",{type:"text",name:"title",value:d,onChange:e=>h(e.target.value),className:"w-full p-2 border rounded"}),e.jsxs("button",{type:"button",className:"mt-4 flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 focus:outline-none",onClick:async()=>{c.alt!=d&&(c.alt=d);(await a(n,r.id,JSON.stringify(JSON.stringify(c)))).data.updateMediaItemData.success?i("Successfully updated.","success"):i("Failed to update.","error")},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})]})};function S({imageUrl:l,filename:a,onSave:i,setEditFile:c}){const{loginPassword:o}=t.useContext(s),[d,h]=t.useState({x:0,y:0}),[m,x]=t.useState(1),[u,p]=t.useState(0),[g,w]=t.useState(null),[f,j]=t.useState(void 0),[b,y]=t.useState([]),[N,C]=t.useState("image"),[k,S]=t.useState(0),[H,M]=t.useState(0),[z,V]=t.useState([]),[F,D]=t.useState(l),[B,L]=t.useState(null),R=t.useCallback((e,t)=>{w(t)},[]);t.useEffect(()=>{if(!F)return;const e=new Image;e.src=F,e.onload=()=>{const t=e.width/e.height;S(e.width),M(e.height),j(t)}},[F]);return t.useEffect(()=>{null!=f&&(async()=>{const e=await n(o);if(200==e.status){const t=JSON.parse(e.data.getMediaSettings.settings);t.unshift({title:"Image",slug:"image",width:k,height:H});const s=[],a=l.lastIndexOf("."),i=-1!==a?l.slice(0,a):l,r=-1!==a?l.slice(a):"";t.map(e=>{let t=i;"image"!==e.slug&&(t+="-"+e.slug),t+="image"==e.slug?r:".webp",s.push({setting:e.slug,url:t,width:parseInt(e.width),height:parseInt(e.height)})}),V(s),y(t)}})()},[f]),t.useEffect(()=>{if("select"===B){const e=z.find(e=>e.setting===N);(null==e?void 0:e.url)&&D(e.url)}},[N,z,B]),l?e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("select",{name:"imageSetting",value:N,onChange:e=>{L("select"),C(e.target.value)},className:"bg-gray-100 border-gray-300 border px-4 py-2 divide-y divide-gray-100 rounded shadow",children:[e.jsx("option",{value:"",children:"Please select a file"}),b.map((t,s)=>e.jsx("option",{value:t.slug,children:t.title},s))]}),e.jsx("div",{className:"relative w-full h-[400px] bg-gray-800 rounded overflow-hidden",children:e.jsx(v,{image:F,crop:d,zoom:m,rotation:u,aspect:f,onCropChange:h,onRotationChange:p,onZoomChange:x,onCropComplete:R,cropShape:"rect",showGrid:!0})}),e.jsx("p",{children:"Please note that cropping/spinning the image will change the original image, you will not be able to undo this action."}),e.jsx("div",{className:"flex gap-2 mb-4",children:[{label:"Square",value:1,width:800,height:800},{label:"16:9",value:16/9,width:1920,height:1080},{label:"4:3",value:4/3,width:1600,height:1200}].map(t=>e.jsx("button",{onClick:()=>{L("aspect"),j(t.value)},className:"px-3 py-1 rounded "+(f===t.value?"bg-blue-500 text-white":"bg-gray-200"),children:t.label},t.label))}),e.jsx("div",{className:"pb-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:["Zoom ",e.jsxs("span",{className:"text-gray-500",children:["(",m.toFixed(2),")"]})]}),e.jsx("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:m,onChange:e=>x(Number(e.target.value)),className:"w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg"}),e.jsx("span",{className:"text-sm text-gray-500 absolute start-0 -bottom-6",children:"0.5"}),e.jsx("span",{className:"text-sm text-gray-500 absolute start-1/4 -translate-x-1/2 -bottom-6",children:"1.125"}),e.jsx("span",{className:"text-sm text-gray-500 absolute start-1/2 -translate-x-1/2 -bottom-6",children:"1.75"}),e.jsx("span",{className:"text-sm text-gray-500 absolute start-3/4 -translate-x-1/2 -bottom-6",children:"2.375"}),e.jsx("span",{className:"text-sm text-gray-500 absolute end-0 -bottom-6",children:"3"})]})}),e.jsx("div",{className:"pb-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:["Rotation ",e.jsxs("span",{className:"text-gray-500",children:["(",u,"°)"]})]}),e.jsx("input",{type:"range",min:"0",max:"360",step:"1",value:u,onChange:e=>p(Number(e.target.value)),className:"w-full h-3 bg-gray-200 rounded-lg appearance-none cursor-pointer range-lg"}),e.jsx("span",{className:"text-sm text-gray-500 absolute start-0 -bottom-6",children:"0"}),e.jsx("span",{className:"text-sm text-gray-500 absolute start-1/4 -translate-x-1/2 -bottom-6",children:"90"}),e.jsx("span",{className:"text-sm text-gray-500 absolute start-1/2 -translate-x-1/2 -bottom-6",children:"180"}),e.jsx("span",{className:"text-sm text-gray-500 absolute start-3/4 -translate-x-1/2 -bottom-6",children:"270"}),e.jsx("span",{className:"text-sm text-gray-500 absolute end-0 -bottom-6",children:"360"})]})}),e.jsx("button",{onClick:async()=>{try{const e=await((e,t,s,l=0)=>new Promise((a,i)=>{const r=new Image;r.crossOrigin="anonymous",r.src=e,r.onload=()=>{const e=document.createElement("canvas"),n=e.getContext("2d"),c=2*Math.max(r.width,r.height);e.width=c,e.height=c,n.translate(c/2,c/2),n.rotate(l*Math.PI/180),n.translate(-c/2,-c/2),n.drawImage(r,(c-r.width)/2,(c-r.height)/2);const o=c/2-r.width/2+s.x,d=c/2-r.height/2+s.y,h=n.getImageData(o,d,s.width,s.height);e.width=s.width,e.height=s.height,n.putImageData(h,0,0),e.toBlob(e=>{if(!e)return void i(new Error("Canvas is empty"));const s=new File([e],t,{type:"image/webp"});a(s)},"image/webp",.9)},r.onerror=e=>i(e)}))(F,a,g,u);null==i||i(e,N)}catch(e){await r(e.stack||String(e))}},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save Cropped Image"}),e.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 ml-2",children:"Cancel"})]}):e.jsx("p",{children:"No image provided"})}const H=({sliderDetailsOpen:s,setSliderDetailsOpen:l,HandleClose:a,files:i,detailsId:r,toggleCheckbox:n,setBulkAction:c,setApplyTriggered:o,deleteFile:d,editFile:h,setEditFile:m,replaceFile:x})=>e.jsx(p.Root,{show:s,as:t.Fragment,children:e.jsxs(g,{as:"div",className:"slide-panel",onClose:a,children:[e.jsx("div",{className:"fixed inset-0"}),e.jsx("div",{className:"slide-panel-content-wrapper",children:e.jsx("div",{className:"slide-panel-content",children:e.jsx("div",{className:"slide-panel-content-inner",children:e.jsx(p.Child,{as:t.Fragment,enter:"transform transition ease-in-out duration-500 sm:duration-700",enterFrom:"translate-x-full",enterTo:"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700",leaveFrom:"translate-x-0",leaveTo:"translate-x-full",children:e.jsx(g.Panel,{className:"pointer-events-auto w-screen max-w-7xl",children:e.jsx("div",{className:"bg-white flex h-full flex-col overflow-y-scroll  py-6 shadow-2xl",children:e.jsx("div",{className:"px-4 sm:px-6",children:e.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:e.jsx("div",{className:"flex items-start justify-start",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-start justify-between w-full pt-3",children:[e.jsx(g.Title,{className:"slide-panel-dialog-title",children:"File Details"}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",className:"bg-white relative rounded-md text-gray-400 hover:text-gray-500",onClick:()=>{l(!1),m(!1)},children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"h-6 w-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})})]})})]}),e.jsx("div",{className:"mt-4",children:h?e.jsx(e.Fragment,{children:i.filter(e=>e.id==r).map(t=>e.jsx(S,{filename:t.filename,imageUrl:`http://localhost/uploads/${null==t?void 0:t.filename}`,onSave:async(e,s)=>{await x(t.id,t.filename,e,s)},setEditFile:m},t.id))}):e.jsx(e.Fragment,{children:i.filter(e=>e.id==r).map(t=>{var s;const l=null==t?void 0:t.filename;return e.jsxs("div",{className:"flex flex-row",children:[e.jsx("div",{className:"w-1/2",children:t.mimetype.includes("image")?e.jsx("img",{src:`http://localhost/uploads/${l}`,className:"media-preview-img-cover"}):"csv"==t.filename.split(".").pop().toLowerCase()?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm-96 144c0 4.42-3.58 8-8 8h-8c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h8c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-8c-26.51 0-48-21.49-48-48v-32c0-26.51 21.49-48 48-48h8c4.42 0 8 3.58 8 8v16zm44.27 104H160c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h12.27c5.95 0 10.41-3.5 10.41-6.62 0-1.3-.75-2.66-2.12-3.84l-21.89-18.77c-8.47-7.22-13.33-17.48-13.33-28.14 0-21.3 19.02-38.62 42.41-38.62H200c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8h-12.27c-5.95 0-10.41 3.5-10.41 6.62 0 1.3.75 2.66 2.12 3.84l21.89 18.77c8.47 7.22 13.33 17.48 13.33 28.14.01 21.29-19 38.62-42.39 38.62zM256 264v20.8c0 20.27 5.7 40.17 16 56.88 10.3-16.7 16-36.61 16-56.88V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v20.8c0 35.48-12.88 68.89-36.28 94.09-3.02 3.25-7.27 5.11-11.72 5.11s-8.7-1.86-11.72-5.11c-23.4-25.2-36.28-58.61-36.28-94.09V264c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8zm121-159L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9z"})}):"docx"==t.filename.split(".").pop().toLowerCase()||"doc"==t.filename.split(".").pop().toLowerCase()?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm57.1 120H305c7.7 0 13.4 7.1 11.7 14.7l-38 168c-1.2 5.5-6.1 9.3-11.7 9.3h-38c-5.5 0-10.3-3.8-11.6-9.1-25.8-103.5-20.8-81.2-25.6-110.5h-.5c-1.1 14.3-2.4 17.4-25.6 110.5-1.3 5.3-6.1 9.1-11.6 9.1H117c-5.6 0-10.5-3.9-11.7-9.4l-37.8-168c-1.7-7.5 4-14.6 11.7-14.6h24.5c5.7 0 10.7 4 11.8 9.7 15.6 78 20.1 109.5 21 122.2 1.6-10.2 7.3-32.7 29.4-122.7 1.3-5.4 6.1-9.1 11.7-9.1h29.1c5.6 0 10.4 3.8 11.7 9.2 24 100.4 28.8 124 29.6 129.4-.2-11.2-2.6-17.8 21.6-129.2 1-5.6 5.9-9.5 11.5-9.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"})}):"xlsx"==t.filename.split(".").pop().toLowerCase()||"xls"==t.filename.split(".").pop().toLowerCase()?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"})}):"pdf"==t.filename.split(".").pop().toLowerCase()?e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"})}):e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"200px",width:"200px",xmlns:"http://www.w3.org/2000/svg",className:"media-preview-img w-4 h-4",children:e.jsx("path",{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"})})}),e.jsxs("div",{className:"w-1/2 pl-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Filename:"})," ",t.filename]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Uploaded By:"})," ",null==(s=null==t?void 0:t.author)?void 0:s.user_login]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Uploaded On:"})," ",new Date(t.date).toLocaleDateString()]}),e.jsx("button",{type:"button",className:"mt-4 flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 focus:outline-none",onClick:async()=>{m(!0)},children:"Edit Files"}),e.jsx("hr",{className:"my-4"}),e.jsx(k,{file:t}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 text-sm",children:"View media file"}),e.jsx("a",{href:t.url,download:t.filename||"file",className:"text-blue-500 text-sm",target:"_blank",rel:"noopener noreferrer",children:"Download file"}),e.jsx("button",{type:"button",className:"text-red-500 text-sm cursor-pointer",onClick:async()=>{await d(t.filename)},children:"Delete permanently"})]})]})]},t.id)})})})]})})})})})})})})})})]})}),M=()=>{const{loginPassword:l}=t.useContext(s),a=t.useRef(),[n,u]=t.useState(null),[p,g]=t.useState(null),[v,k]=t.useState([]),[S,M]=t.useState(1),[z,V]=t.useState([]),[F,D]=t.useState(""),[B,L]=t.useState(0),[R,A]=t.useState(null),[O,W]=t.useState("squares"),[I,P]=t.useState("all"),[Z,E]=t.useState(""),[T,U]=t.useState(!1),[$,_]=t.useState(!1),[J,q]=t.useState(!1),[G,X]=t.useState(!1),[Y,K]=t.useState(""),[Q,ee]=t.useState(!0),te=()=>{},se=e=>{V(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},le=async()=>{"delete"===F&&z.length>0&&(await c(l,z),ie(),q(!1))},ae=e=>{A(e),q(!0)},ie=async()=>{const e=await o(l,20*(S-1),I,Z);if(200==e.status){const t=[];L(e.data.getMediaFiles.total),e.data.getMediaFiles.files.map(e=>{const s=`http://localhost/uploads/${e.filename}`,l={id:e.id?e.id:crypto.randomUUID(),filename:e.filename,mimetype:e.mimetype,url:s,author:e.author,date:e.date,attachment_metadata:JSON.parse(e.attachment_metadata),metadata:(null==e?void 0:e.metadata)?JSON.parse(e.metadata):{}};t.push(l)}),k(t),ee(!0)}};return t.useEffect(()=>{G&&"delete"===F&&(le(),X(!1))},[F,G]),t.useEffect(()=>{ie()},[S,I,Z]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full",children:[e.jsx(w,{setSliderOpen:_}),Y&&e.jsx("img",{src:Y,alt:"Preview",style:{maxWidth:"300px",maxHeight:"300px"}}),e.jsx(f,{view:O,setView:W,search:Z,setSearch:E,type:I,setType:P}),"list"==O&&e.jsx(j,{bulkAction:F,setBulkAction:D,handleApply:le}),e.jsxs("div",{className:"panel mt-8 mt-8",children:["list"==O?e.jsx(b,{files:v,selectedIds:z,toggleCheckbox:se,ShowDetails:ae,reloadFiles:Q,setReloadFiles:ee}):e.jsx(y,{files:v,ShowDetails:ae,reloadFiles:Q,setReloadFiles:ee}),e.jsx(N,{totalFiles:B,page:S,perPage:20,setPage:M})]})]}),e.jsx(C,{sliderOpen:$,setSliderOpen:_,HandleClose:te,imgUrl:p,handleChange:e=>{u(e.target.files[0])},SendData:async()=>{if(!a.current.files.length)return;const e=a.current.files[0];if(e)try{const t=await d(l,e);if(200===t.status&&t.data.uploadFile){i("File uploaded","success");let t=e.name.replace(/[^a-zA-Z0-9._-]/g,"_");const s=await h(t),l=URL.createObjectURL(s);g(l),M(1),ie(),a.current.value=""}}catch(t){await r(t.stack||String(t))}else i("Please select a file.","error")},fileInputRef:a}),e.jsx(H,{sliderDetailsOpen:J,setSliderDetailsOpen:q,HandleClose:te,files:v,detailsId:R,toggleCheckbox:se,setBulkAction:D,setApplyTriggered:X,deleteFile:async e=>{try{const t=await x(l,e);200===t.status&&t.data.deleteFile&&(A(null),ie(),q(!1),i("File deleted","success"))}catch(t){await r(t.stack||String(t))}},editFile:T,setEditFile:U,replaceFile:async(e,t,s,a)=>{if(!s)return void i("Please select a file.","error");const r=s,n=await m(l,e,r,a);200===n.status&&n.data.replaceFileWithSetting&&(i("File uploaded","success"),U(!1),M(1),q(!1),ie())}})]})},z=()=>e.jsx("div",{className:"title-panel",children:e.jsx("div",{className:"title-bar",children:e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"Media Settings"})})})}),V=()=>{const{loginPassword:l}=t.useContext(s),[a,r]=t.useState([]);return t.useEffect(()=>{(async()=>{const e=await n(l);200==e.status&&r(JSON.parse(e.data.getMediaSettings.settings))})()},[]),e.jsx("div",{className:"panel mt-8",children:e.jsxs("div",{className:"media-settings",children:[a.map((t,s)=>e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex-row-between",children:[e.jsxs("h2",{className:"m-0 text-2xl",children:["Setting: ",t.title]}),e.jsx("button",{onClick:()=>(e=>{r(t=>t.filter((t,s)=>s!==e))})(s),className:"text-red-500 hover:text-red-700 text-sm",children:"Delete"})]}),e.jsxs("div",{className:"mb-4 flex-row-between gap-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{children:"Title"}),e.jsx("input",{type:"text",name:"title",placeholder:"Title",autoComplete:"Title",value:t.title,className:"input",required:!0,onChange:e=>{((e,t)=>{const s=t.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-]/g,"");r(l=>{const a=[...l];return a[e]={...a[e],title:t,slug:s},a})})(s,e.target.value)}})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{children:"Slug"}),e.jsx("input",{type:"text",name:"slug",placeholder:"Slug",autoComplete:"Slug",disabled:!0,value:t.slug,className:"input-disallowed"})]})]}),e.jsxs("div",{className:"my-4 flex flex-row justify-between gap-4",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{children:"Width"}),e.jsx("input",{type:"text",name:"width",placeholder:"Width",autoComplete:"Width",value:t.width,className:"bg-gray-50 border border-gray-300 text-gray-800 rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5",onChange:e=>{((e,t)=>{r(s=>{const l=[...s];return l[e]={...l[e],width:t},l})})(s,e.target.value)}})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx("label",{children:"Height"}),e.jsx("input",{type:"text",name:"height",placeholder:"Height",autoComplete:"Height",value:t.height,className:"bg-gray-50 border border-gray-300 text-gray-800 rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5",onChange:e=>{((e,t)=>{r(s=>{const l=[...s];return l[e]={...l[e],height:t},l})})(s,e.target.value)}})]})]}),e.jsx("hr",{})]},s)),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsxs("button",{type:"button",className:"text-gray-600 bg-gray-300 hover:bg-gray-400 hover:text-white btn",onClick:()=>{r(e=>[...e,{title:"",slug:"",width:"",height:""}])},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Add A New Setting"]}),e.jsxs("button",{type:"button",className:"text-white bg-blue-700 hover:bg-blue-800 btn",onClick:()=>{(async()=>{const e=await u(l,JSON.stringify(a));200==e.status&&(e.data.updateMediaSettings.success?i("Successfully updated settings","success"):i("Failed to update settings","error"))})()},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-2 -ml-1",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}),"Save Settings"]})]})]})})},F=()=>e.jsxs("div",{className:"w-full",children:[e.jsx(z,{}),e.jsx(V,{})]});export{M,F as a};

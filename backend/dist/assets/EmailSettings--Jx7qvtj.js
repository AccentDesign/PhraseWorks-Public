import{j as e,r as t,A as M,a7 as E,a8 as N,n as d,a9 as _}from"./index-jfVTkSr8.js";import{V as C,H as A,P as R,F as k}from"./PageContent-C8XW3_vI.js";import"./index-DBMsOViK.js";const U=()=>e.jsx("div",{className:"relative overflow-hidden bg-white shadow-md dark:bg-gray-800 sm:rounded-lg",children:e.jsx("div",{className:"flex-row items-center justify-between p-4 space-y-3 sm:flex sm:space-y-0 sm:space-x-4",children:e.jsx("div",{children:e.jsx("h2",{className:"text-3xl",children:"Email Settings"})})})}),u=({name:a,title:r,value:c,updateFunction:i,text:l})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"w-full md:w-1/2 ",children:[e.jsx("label",{children:r}),e.jsx("input",{type:"text",name:a,placeholder:r,autoComplete:r,value:c,className:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-full p-2.5",required:!0,onChange:o=>{i(o.target.value)}})]}),l?e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:l}):""]}),O=({name:a,title:r,value:c,updateFunction:i,text:l})=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"w-auto",children:[e.jsx("label",{children:r}),e.jsx("input",{type:"number",name:a,placeholder:r,autoComplete:r,value:c,min:0,className:"bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-blue-600 focus:border-blue-600 block w-auto p-2.5",required:!0,onChange:o=>{i(o.target.value)}})]}),l?e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:l}):""]}),F=()=>{const{loginPassword:a}=t.useContext(M),[r,c]=t.useState([]),[i,l]=t.useState(""),[o,x]=t.useState(""),[g,h]=t.useState("login"),[p,S]=t.useState(""),[j,T]=t.useState(587),[f,P]=t.useState(!1),[m,b]=t.useState(""),v=async()=>{const s=await N(a,{SMTP_USERNAME:i,SMTP_PASSWORD:o,SMTP_AUTHTYPE:g,SMTP_HOST:p,SMTP_PORT:j,SMTP_SECURE:f});s.status==200?s.data.updateEmailSettings.success?(y(),d("Successfully updated email settings.","success")):d("Failed to update email settings.","error"):d("Failed to update email settings.","error")},w=async()=>{m!=""&&(await _(a,m)).status==200&&(b(""),d("We cannot guarantee that it will send but have received no errors, please check your emails.","success"))},y=async()=>{const n=await E(a);if(n.status==200){const s=JSON.parse(n.data.getEmailSettings.data);c(s),l(s.SMTP_USERNAME),x(s.SMTP_PASSWORD),h(s.SMTP_AUTHTYPE),S(s.SMTP_HOST),T(s.SMTP_PORT),P(s.SMTP_SECURE)}};return t.useEffect(()=>{y()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full",children:[e.jsx(U,{}),e.jsxs("div",{className:"panel mt-8 mt-8",children:[e.jsx(u,{name:"smtp_username",title:"SMTP Username",value:i,updateFunction:l}),e.jsx(u,{name:"smtp_password",title:"SMTP Password",value:o,updateFunction:x}),e.jsx("label",{className:"block",children:"SMTP Authtype"}),e.jsxs("select",{id:"smtp_authtype",className:"bg-gray-100 border-gray-300 border px-4 py-2 divide-y divide-gray-100 rounded shadow w-full md:w-1/2 mb-4",value:g,onChange:n=>h(n.target.value),children:[e.jsx("option",{value:"",children:"Please select an option..."}),e.jsx("option",{value:"plain",children:"Plain"}),e.jsx("option",{value:"login",children:"Login"}),e.jsx("option",{value:"cram-md5",children:"Cram md5"})]}),e.jsx(u,{name:"smtp_host",title:"SMTP Host",value:p,updateFunction:S}),e.jsx(O,{name:"smtp_port",title:"SMTP Port",value:j,updateFunction:T}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("input",{id:"default-checkbox",type:"checkbox",checked:f,onChange:n=>P(n.target.checked),className:"mt-1 w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded-sm focus:ring-blue-500 focus:ring-2"}),e.jsx("div",{className:"ml-2",children:e.jsx("label",{htmlFor:"default-checkbox",className:"text-sm text-gray-700",children:"SMTP Secure"})})]}),e.jsx("div",{className:"flex flex-row justify-end mt-8",children:e.jsxs("button",{type:"button",className:"flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 focus:outline-none dark:focus:ring-primary-800",onClick:v,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:e.jsx("path",{fillRule:"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z",clipRule:"evenodd"})}),"Update"]})}),e.jsx("hr",{className:"my-4"}),e.jsx("h2",{className:"text-xl",children:"Test Email"}),e.jsx(u,{name:"to",title:"To Email",value:m,updateFunction:b}),e.jsx("div",{className:"flex flex-row justify-end mt-8",children:e.jsxs("button",{type:"button",className:"flex items-center justify-center px-4 py-2 text-sm font-medium text-white rounded-lg bg-gray-500 hover:bg-gray-800 focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 focus:outline-none dark:focus:ring-primary-800",onClick:w,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 mr-2",children:[e.jsx("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),e.jsx("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"})]}),"Send Test"]})})]})]})})},W=({siteTitle:a})=>(document.title=`Email Settings - ${a}`,e.jsxs(C,{children:[e.jsx(A,{}),e.jsx(R,{children:e.jsx(F,{})}),e.jsx(k,{})]}));export{W as default};
